---
title: "Использование универсальных текстовых сопоставлений | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "_UNICODE"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "_MBCS - тип данных"
  - "_T - тип"
  - "_TCHAR - тип"
  - "_TEXT - тип"
  - "_TINT - тип"
  - "_TSCHAR - тип"
  - "_TUCHAR - тип"
  - "_TXCHAR - тип"
  - "_UNICODE - константа"
  - "создание текстовых типов данных"
  - "универсальные текстовые сопоставления"
  - "сопоставления, универсальный текст"
  - "MBCS - тип данных"
  - "T - тип"
  - "TCHAR - тип"
  - "типы данных TCHAR.H, сопоставления, определенные в"
  - "TEXT - тип"
  - "TINT - тип"
  - "TSCHAR - тип"
  - "TUCHAR - тип"
  - "TXCHAR - тип"
  - "UNICODE - константа"
ms.assetid: 2848121c-e51f-4b9b-a2e6-833ece4b0cb3
caps.latest.revision: 8
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 8
---
# Использование универсальных текстовых сопоставлений
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

**Блок, относящийся только к системам Майкрософт**  
  
 Чтобы упростить написание кода для разных международных рынков, в библиотеке времени выполнения Майкрософт имеются относящиеся к Майкрософт "универсальные текстовые" сопоставления для большинства типов данных, стандартных процедур и других объектов.  Эти сопоставления определяются в TCHAR.H.  Эти сопоставления имен можно использовать для написания универсального кода, который можно компилировать в любом из трёх типов кодировок: ASCII \(SBCS\), MBCS или Unicode, в зависимости от константы манифеста, указанной с помощью оператора `#define`.  Универсальные текстовые сопоставления представляют собой расширения Microsoft, несовместимые со стандартами ANSI.  
  
### Директивы препроцессора для универсальных текстовых сопоставлений  
  
|\#define|Скомпилированная версия|Пример|  
|--------------|-----------------------------|------------|  
|`_UNICODE`|Юникод \(расширенные символы\)|`_tcsrev` сопоставляется функции `_wcsrev`|  
|`_MBCS`|Многобайтовая кодировка|`_tcsrev` сопоставляется функции `_mbsrev`|  
|Нет \(по умолчанию: не определена ни `_UNICODE`, ни `_MBCS`\)|SBCS \(ASCII\)|`_tcsrev` сопоставляется с `strrev`|  
  
 Например, определенная в файле TCHAR.H универсальная текстовая функция `_tcsrev` сопоставляется функции `mbsrev`, если в программе определена `MBCS`, или функции `_wcsrev` , если определена `_UNICODE` .  В противном случае `_tcsrev` сопоставляется `strrev`.  
  
 Универсальный текстовый тип данных `_TCHAR`, также определенный в TCHAR.H, сопоставляется типу `char`, если определена `_MBCS`, типу `wchar_t`, если определена `_UNICODE`, и типу `char`, если ни одна из констант не определена.  Для удобства в файле TCHAR.H также предусмотрены другие сопоставления типов данных, однако `_TCHAR` является наиболее эффективным типом.  
  
### Универсальные текстовые сопоставления типов данных  
  
|Универсальные текстовые имена типов данных|SBCS \(\_UNICODE, \_MBCS не определены\)|\_MBCS определено|\_UNICODE определено|  
|------------------------------------------------|----------------------------------------------|-----------------------|--------------------------|  
|`_TCHAR`|`char`|`char`|`wchar_t`|  
|`_TINT`|`int`|`int`|`wint_t`|  
|`_TSCHAR`|`signed char`|`signed char`|`wchar_t`|  
|`_TUCHAR`|`unsigned char`|`unsigned char`|`wchar_t`|  
|`_TXCHAR`|`char`|`unsigned char`|`wchar_t`|  
|`_T` или `_TEXT`|Не действует \(удаляется препроцессором\)|Не действует \(удаляется препроцессором\)|`L` \(преобразовывает следующий символ или строку к его\(её\) аналогу в Юникоде\)|  
  
 Полный список универсальных текстовых сопоставлений процедур, переменных и других объектов см. в разделе [Универсальные текстовые сопоставления](../c-runtime-library/generic-text-mappings.md).  
  
 В следующих примерах кода показано использование функций `_TCHAR` и `_tcsrev` для сопоставления моделям MBCS, Unicode и SBCS.  
  
```  
_TCHAR *RetVal, *szString;  
RetVal = _tcsrev(szString);  
```  
  
 Если был указан `MBCS`, препроцессор сопоставляет предыдущий фрагмент следующему коду:  
  
```  
char *RetVal, *szString;  
RetVal = _mbsrev(szString);  
```  
  
 Если был указан `_UNICODE`, препроцессор сопоставляет тот же фрагмент следующему коду:  
  
```  
wchar_t *RetVal, *szString;  
RetVal = _wcsrev(szString);  
```  
  
 Если не определена ни `_MBCS`, ни `_UNICODE`, препроцессор сопоставляет этот фрагмент коду в однобайтовой ASCII, как показано ниже:  
  
```  
char *RetVal, *szString;  
RetVal = strrev(szString);  
```  
  
 Таким образом, можно создавать, обслуживать и компилировать единый исходный файл кода, который будет выполняться с процедурами, использующими любую из трех описанных выше кодировок.  
  
 **Завершение блока, относящегося только к системам Майкрософт**  
  
## См. также  
 [Универсальные текстовые сопоставления](../c-runtime-library/generic-text-mappings.md)   
 [Сопоставления типов данных](../c-runtime-library/data-type-mappings.md)   
 [Сопоставления констант и глобальных переменных](../c-runtime-library/constant-and-global-variable-mappings.md)   
 [Сопоставления процедур](../c-runtime-library/routine-mappings.md)   
 [Пример программы, использующей обычный текст](../c-runtime-library/a-sample-generic-text-program.md)