---
title: mbrtoc16, mbrtoc323 | Документы Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.reviewer: ''
ms.suite: ''
ms.technology:
- cpp
- devlang-cpp
ms.tgt_pltfrm: ''
ms.topic: reference
apiname:
- mbrtoc16
- mbrtoc32
apilocation:
- msvcrt.dll
- msvcr80.dll
- msvcr90.dll
- msvcr100.dll
- msvcr100_clr0400.dll
- msvcr110.dll
- msvcr110_clr0400.dll
- msvcr120.dll
- msvcr120_clr0400.dll
- ucrtbase.dll
- api-ms-win-crt-convert-l1-1-0.dll
apitype: DLLExport
f1_keywords:
- mbrtoc16
- mbrtoc32
- uchar/mbrtoc16
- uchar/mbrtoc32
dev_langs:
- C++
helpviewer_keywords:
- mbrtoc16 function
- mbrtoc32 function
ms.assetid: 099ade4d-56f7-4e61-8b45-493f1d7a64bd
caps.latest.revision: 5
author: corob-msft
ms.author: corob
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 842950535dd71ba678e00a3203df17625ab50a4d
ms.sourcegitcommit: ef859ddf5afea903711e36bfd89a72389a12a8d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2018
---
# <a name="mbrtoc16-mbrtoc32"></a>mbrtoc16, mbrtoc32

Преобразует первый многобайтовый символ в строке обычных символов в эквивалентный символ в кодировке UTF-16 или UTF-32.

## <a name="syntax"></a>Синтаксис

```C
size_t mbrtoc16(
   char16_t* destination,
   const char* source,
   size_t max_bytes,
   mbstate_t* state
);

size_t mbrtoc32(
   char32_t* destination,
   const char* source,
   size_t max_bytes,
   mbstate_t* state
);

```

### <a name="parameters"></a>Параметры

*Назначение*<br/>
Указатель на **char16_t** или **char32_t** эквивалент Многобайтовый символ для преобразования. Если значение равно null, функция не сохраняет значение.

*Источник*<br/>
Указатель на строку многобайтовых символов, которую нужно преобразовать.

*max_bytes*<br/>
Максимальное число байтов в *источника* нужно проверить на наличие знака для преобразования. Это должно быть значение от 1 до число байтов, включая символ завершения null, остающихся в *источника*.

*state*<br/>
Указатель на **mbstate_t** объект состояния преобразования, используемые для интерпретации многобайтовой строки в один или несколько выходных символов.

## <a name="return-value"></a>Возвращаемое значение

В случае успешного выполнения возвращает значение первого из этих условий, которые применяются, с учетом текущего *состояние* значение:

|Значение|Условие|
|-----------|---------------|
|0|Следующий *max_bytes* или меньше символов, преобразованных из *источника* соответствуют расширенному символу null, которое является значением, хранящиеся в случае *назначения* не имеет значение null.<br /><br /> *состояние* содержит начальное состояние сдвига.|
|Между 1 и *max_bytes*включительно|Возвращаемое значение представляет число байтов *источника* , составляющих допустимый Многобайтовый символ. Если сохраняется преобразованный расширенный символ *назначения* не имеет значение null.|
|-3|Следующий расширенный символ, возникающие в результате предыдущего вызова функции будет сохранено в *назначения* Если *назначения* не имеет значение null. Ни один байт из *источника* используются при вызове этой функции.<br /><br /> Когда *источника* указывает на Многобайтовый символ, который требует более чем один расширенный символ для представления (например, суррогатная пара), то *состояние* значение обновляется, чтобы при следующем вызове функции записывает  out дополнительный символ.|
|-2|Следующий *max_bytes* байтов представляют неполный, но потенциально допустимый Многобайтовый символ. Значение не хранится в *назначения*. Это может произойти, если *max_bytes* равно нулю.|
|-1|Произошла ошибка кодирования. Следующий *max_bytes* или менее байт не составляют полный и допустимый Многобайтовый символ. Значение не хранится в *назначения*.<br /><br /> **EILSEQ** хранится в **errno** , а состояние преобразования *состояние* не указан.|

## <a name="remarks"></a>Примечания

**Mbrtoc16** функция считывает до *max_bytes* байтов из *источника* найти первый полный допустимый Многобайтовый символ, а затем сохраняет эквивалентный UTF-16 символ в *назначения*. Исходные байты интерпретируются в соответствии с многобайтовым языковым стандартом текущего потока. Если Многобайтовый символ требует более одного символа выходные данные UTF-16, например суррогатной пары, то *состояние* имеет значение для хранения следующий символ UTF-16 в *назначения* при следующем вызове к **mbrtoc16**. **Mbrtoc32** функция идентична, но выходные данные хранятся в виде символов UTF-32.

Если *источника* имеет значение null, эти функции возвращают эквивалентный вызову с использованием аргументов **NULL** для *назначения*, **» «** для *источника*и 1 для *max_bytes*. Переданный значения *назначения* и *max_bytes* игнорируются.

Если *источника* — не null, функция начинается с начала строки и проверяет не более *max_bytes* байт для определения числа байтов, необходимых для составления следующего многобайтового символа, включая любые последовательности сдвигов. Если проверяемые байты содержат допустимый и полный многобайтовый символ, функция преобразует его в эквивалентный 16- или 32-битовый расширенный символ (либо несколько символов). Если *назначения* не равно NULL, функция сохраняет первый (и, возможно, единственный) результат символ в конечном объекте. Если требуются дополнительные выходные символы, значение задано *состояние*, чтобы последующие вызовы функции выводились дополнительные символы и возвращаемое значение -3. Если символов больше не требуется, *состояние* задано в начальном состоянии сдвига.

## <a name="requirements"></a>Требования

|Функция|Заголовок C|Заголовок C++|
|--------------|--------------|------------------|
|**mbrtoc16**, **mbrtoc32**|\<uchar.h>|\<cuchar>|

Дополнительные сведения о совместимости см. в разделе [Совместимость](../../c-runtime-library/compatibility.md).

## <a name="see-also"></a>См. также

[Преобразование данных](../../c-runtime-library/data-conversion.md)<br/>
[Языковой стандарт](../../c-runtime-library/locale.md)<br/>
[Интерпретация последовательностей многобайтовых символов](../../c-runtime-library/interpretation-of-multibyte-character-sequences.md)<br/>
[c16rtomb, c32rtomb](c16rtomb-c32rtomb1.md)<br/>
[mbrtowc](mbrtowc.md)<br/>
[mbsrtowcs](mbsrtowcs.md)<br/>
[mbsrtowcs_s](mbsrtowcs-s.md)<br/>
