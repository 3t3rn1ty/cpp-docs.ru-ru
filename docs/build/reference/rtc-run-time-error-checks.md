---
title: "/RTC (проверки ошибок во время выполнения) | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "/rtc"
  - "VC.Project.VCCLCompilerTool.SmallerTypeCheck"
  - "VC.Project.VCCLCompilerTool.UninitializedVariableCheck"
  - "VC.Project.VCCLCompilerTool.StackFrameCheck"
  - "VC.Project.VCCLCompilerTool.BasicRuntimeChecks"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "/RTC1 - параметр компилятора [C++]"
  - "/RTCc - параметр компилятора [C++]"
  - "/RTCs - параметр компилятора [C++]"
  - "/RTCu - параметр компилятора [C++]"
  - "__MSVC_RUNTIME_CHECKS - макрос"
  - "RTC1 - параметр компилятора"
  - "-RTC1 - параметр компилятора [C++]"
  - "RTCc - параметр компилятора"
  - "-RTCc - параметр компилятора [C++]"
  - "RTCs - параметр компилятора"
  - "-RTCs - параметр компилятора [C++]"
  - "RTCu - параметр компилятора"
  - "-RTCu - параметр компилятора [C++]"
  - "проверки во время выполнения, /RTC - параметр"
  - "ошибки во время выполнения, проверка ошибок"
  - "ошибки во время выполнения, проверки во время выполнения"
ms.assetid: 9702c558-412c-4004-acd5-80761f589368
caps.latest.revision: 18
caps.handback.revision: 16
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# /RTC (проверки ошибок во время выполнения)
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

Этот параметр используется вместе с прагма\-директивой [runtime\_checks](../Topic/runtime_checks.md) для включения или отключения функции проверки ошибок во время выполнения.  
  
## Синтаксис  
  
```  
/RTC1  
/RTCc  
/RTCs  
/RTCu  
```  
  
## Аргументы  
 `1`  
 Эквивалентен **\/RTC**`su`.  
  
 `c`  
 Сообщает, когда значение преобразуется к типу данных меньшего размера, что приводит к потере данных.  Пример такой ситуации — случай, в котором значение типа `short 0x101` присваивается переменной типа `char`.  
  
 Этот параметр выдает сообщение в ситуациях, в которых планируется усечение, например, когда первые восемь бит значения типа `int` требуется вернуть как значение типа `char`.  Поскольку аргумент **\/RTC**`c` приводит к возникновению ошибки во время выполнения, если при присваивании теряется какая\-либо информация, можно замаскировать нужную информацию, чтобы избежать ошибки во время выполнения вследствие применения **\/RTC**`c`.  Примеры.  
  
```  
#include <crtdbg.h>  
  
char get8bits(int value, int position) {  
   _ASSERT(position < 32);  
   return (char)(value >> position);  
   // Try the following line instead:  
   // return (char)((value >> position) & 0xff);  
}  
  
int main() {  
   get8bits(12341235,3);  
}  
```  
  
 `s`  
 Включает проверку ошибок кадра стека во время выполнения следующим образом:  
  
-   Локальные переменные инициализируются ненулевыми значениями.  Это помогает обнаружить ошибки, которые не появляются при выполнении в режиме отладки.  В отладочном построении больше шансов на то, что стековые переменные будут иметь нулевые значения, чем в выпускном, поскольку компилятор оптимизирует стековые переменные в выпускном построении.  После того, как программа использовала область стека, компилятор никогда не будет восстанавливать в нем нулевые значения.  Следовательно, в дальнейшем неинициализированные стековые переменные, использующие ту же область стека, могут возвращать значения, оставшиеся после первого использования этой области стековой памяти.  
  
-   Обнаружение перевыполнений и недовыполнений локальных переменных, таких как массивы.  **\/RTC**`s` не обнаружит переполнения при доступе к памяти из\-за заполнения компилятора внутри структуры.  Заполнение может возникать при использовании параметра [align](../../cpp/align-cpp.md), [\/Zp \(Выравнивание члена структуры\)](../Topic/-Zp%20\(Struct%20Member%20Alignment\).md) или [pack](../../preprocessor/pack.md), или же в случае, когда элементы структуры упорядочиваются способом, при котором компилятору требуется внести заполнение.  
  
-   Выполняется проверка указателя стека, при которой выявляется его повреждение.  Повреждение указателя стека может произойти в результате несоответствия соглашений о вызовах.  Пример такой ситуации — вызов функции из библиотеки DLL, экспортированной как [\_\_stdcall](../../cpp/stdcall.md), с помощью указателя на функцию, объявленного как [\_\_cdecl](../Topic/__cdecl.md).  
  
 `u`  
 Сообщает, когда используется неинициализированная переменная.  Например, инструкция, приводящая к возникновению предупреждения компилятора `C4701`, может также привести к ошибке во время выполнения при использовании параметра **\/RTC**`u`.  Любая инструкция, приводящая к возникновению [Предупреждение компилятора \(уровень 1 и уровень 4\) C4700](../../error-messages/compiler-warnings/compiler-warning-level-1-and-level-4-c4700.md), при использовании параметра **\/RTC**`u` будет создавать ошибку во время выполнения.  
  
 Тем не менее, рассмотрим следующий фрагмент кода:  
  
```  
int a, *b, c;  
if ( 1 )  
b = &a;  
c = a;  // No run-time error with /RTCu  
```  
  
 Если переменная могла быть инициализирована, то параметр **\/RTC**`u` не сообщит о ней во время выполнения.  Например, после создания указателя\-псевдонима переменной компилятор не будет ее отслеживать и сообщать об ее использовании без инициализации.  По сути, переменную можно инициализировать, получив ее адрес.  & Оператор работает так же, как и оператор присваивания в этой ситуации.  
  
## Заметки  
 Проверки ошибок во время выполнения — это способ обнаружения проблем в выполняющемся коде. Дополнительные сведения см. в разделе [Практическое руководство. Настройка проверок во время выполнения машинного кода](../Topic/How%20to:%20Use%20Native%20Run-Time%20Checks.md).  
  
 При компиляции программы из командной строки с помощью какого\-либо из параметров компилятора **\/RTC** выполнение всех прагма\-директив [optimize](../../preprocessor/optimize.md) в коде будет прекращено без уведомления.  Это происходит вследствие того, что проверки ошибок во время выполнения не действуют в выпускаемом \(оптимизированном\) построении.  
  
 Для построений в ходе разработки следует использовать параметр **\/RTC**; для окончательных сборок параметр **\/RTC** использовать не следует.  **\/RTC** не может использоваться с оптимизациями компилятора \([Параметры \/O \(оптимизация кода\)](../../build/reference/o-options-optimize-code.md)\).  Образ программы, построенный с параметром **\/RTC**, будет немного больше и немного медленнее, чем образ, построенный с параметром **\/Od** \(снижение скорости не превысит 5 процентов по сравнению с построением **\/Od**\).  
  
 При использовании любого параметра **\/RTC** или параметра [\/GZ](../../build/reference/gz-enable-stack-frame-run-time-error-checking.md) будет использована директива препроцессора \_\_MSVC\_RUNTIME\_CHECKS.  
  
### Установка данного параметра компилятора в среде разработки Visual Studio  
  
1.  Откройте диалоговое окно **Страницы свойств** проекта.  Дополнительные сведения см. в разделе [Открытие свойств страниц проекта](../../misc/how-to-open-project-property-pages.md).  
  
2.  Откройте папку **C\/C\+\+**.  
  
3.  Выберите страницу свойств **Создание кода**.  
  
4.  Измените свойство **Основные проверки времени выполнения**, свойство **Проверка на преобразование к меньшему типу**, или же оба этих свойства.  
  
### Установка данного параметра компилятора программным способом  
  
-   См. описание свойств <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.BasicRuntimeChecks%2A> и <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.SmallerTypeCheck%2A>.  
  
## См. также  
 [Параметры компилятора](../../build/reference/compiler-options.md)   
 [Настройка параметров компилятора](../Topic/Setting%20Compiler%20Options.md)   
 [RTC sample](http://msdn.microsoft.com/ru-ru/b3415b09-f6fd-43dc-8c02-9a910bc2574e)