---
title: / Qspectre | Документы Microsoft
ms.custom: ''
ms.date: 1/23/2018
ms.technology:
- cpp-tools
ms.topic: reference
dev_langs:
- C++
f1_keywords:
- /Qspectre
helpviewer_keywords:
- /Qspectre
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: 3d87850ae5413ccf876eb4d4b44b34e34527ef9a
ms.sourcegitcommit: be2a7679c2bd80968204dee03d13ca961eaa31ff
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
ms.locfileid: "32379423"
---
# <a name="qspectre"></a>/ Qspectre

Указывает компилятору создание инструкции для устранения определенных уязвимостей системы безопасности Spectre вариант 1.

## <a name="syntax"></a>Синтаксис

> **/Qspectre**

## <a name="remarks"></a>Примечания

**/Qspectre** предписывает компилятору вставить инструкции для устранения определенных [Spectre уязвимости системы безопасности](https://spectreattack.com/spectre.pdf). Эти уязвимости, вызывается *атаки на стороне канала Упреждающее исполнение*, влияющие на множество операционных систем и современные процессоры, включая процессоры Intel, AMD и ARM.

**/Qspectre** параметр выключен по умолчанию.

В исходном выпуске **/Qspectre** параметр работает только в оптимизированном коде. Следует убедиться, что компиляции кода с любой из параметров оптимизации (например, [/O2 или/O1](o1-o2-minimize-size-maximize-speed.md) , но не [/Od](od-disable-debug.md)) чтобы убедиться, что применяется по устранению рисков. Аналогичным образом проверить код, использующий [#pragma optimize («stg», выходить из системы)](../../preprocessor/optimize.md).

### <a name="applicability"></a>Область применения

Если код работает с данными, которая пересекает границу доверия, то мы рекомендуем использовать **/Qspectre** параметр, чтобы перестроить и развернуть код, чтобы решить эту проблему, как можно быстрее. Примеры кода, который работает с данными, которые пересекает границы доверия код, который загружает недоверенные входные данные, которые могут повлиять на выполнение, например, код, который делает удаленной процедуры вызывает, анализирует ненадежных входных данных или файлов или использует другой локальный процесс между интерфейсы взаимодействия (IPC). Методы стандартных "песочницы" не может быть достаточно. Тщательно следует проверить ваш "песочницы", прежде чем решить, что код не пересекает границы доверия.

### <a name="availability"></a>Доступность

**/Qspectre** доступен в версии Visual Studio 2017 г 15.5.5 и все обновления в компиляторы Microsoft Visual C++ (параметры MSVC), внесенных после 23 января 2018.

Все версии Visual Studio 2017 г. версия 15,5 и все предварительные версии Visual Studio версии 15,6 уже содержать недокументированный параметр **/d2guardspecload**, эквивалентный начальной поведение **/Qspectre**. Можно использовать **/d2guardspecload** для применения одного исправления в код в этих версиях компилятора. Обновите сборку на использование **/Qspectre** в компиляторах, режим; **/Qspectre** в более поздних версиях компилятора параметр также поддерживает новые способы их устранения.

### <a name="effect"></a>Действие

**/Qspectre** параметр генерирует код, чтобы избежать сокращают вариант 1, обход проверки границ [CVE 2017 г. 5753](https://nvd.nist.gov/vuln/detail/CVE-2017-5753). Он работает путем вставки инструкций, которые действуют как барьер наблюдающей код выполнения. Инструкции, для снижения предположение процессора зависит от процессора и его микроархитектуры и может измениться в будущих версиях компилятора.

Когда **/Qspectre** включен, компилятор пытается определить экземпляры, где Упреждающее исполнение команд могут обходить проверок границ и вставляет инструкции барьера. Это важно отметить, что существуют ограничения анализа, который компилятор может выполнить для определения экземпляров вариант 1. Таким образом, нет никакой гарантии, что все возможные экземпляры variant 1 инструментированы. в разделе **/Qspectre**.

### <a name="performance-impact"></a>Влияние на производительность

Влияние на производительность **/Qspectre** замеченных можно пренебречь в несколько очень больших баз кода, однако нет гарантии, что производительность кода в разделе **/Qspectre** остается без изменений. Код, чтобы определить влияние на производительность параметра следует сравнить. Если вы знаете, что в цикле или блоке критическим с точки зрения производительности по снижению не требуется, по снижению можно выборочно отключить с помощью [__declspec(spectre(nomitigation))](../../cpp/spectre.md) директивы. Эта директива недоступен в компиляторах, которые поддерживают только **/d2guardspecload** параметр.

### <a name="additional-information"></a>Дополнительные сведения

Для получения дополнительных сведений см. в разделе официальные [ADV180002 советы по безопасности корпорации Майкрософт, руководство для снижения уязвимости стороне канала Упреждающее исполнение](https://portal.msrc.microsoft.com/en-US/security-guidance/advisory/ADV180002). Рекомендации также доступна из Intel, [наблюдающей выполнения стороне канал исправлений](https://software.intel.com/sites/default/files/managed/c5/63/336996-Speculative-Execution-Side-Channel-Mitigations.pdf)и ARM, [стороны каналы предположение кэша](https://developer.arm.com/-/media/Files/pdf/Cache_Speculation_Side-channels.pdf). Обзором Windows конкретной Spectre и Meltdown способы их устранения см. [влияние производительности Spectre и Meltdown исправлений в системах Windows](https://cloudblogs.microsoft.com/microsoftsecure/2018/01/09/understanding-the-performance-impact-of-spectre-and-meltdown-mitigations-on-windows-systems/) в блоге Microsoft Secure. Обзор Spectre бюллетене параметры MSVC способы их устранения см. в разделе [Spectre исправлений в параметры MSVC](https://blogs.msdn.microsoft.com/vcblog/2018/01/15/spectre-mitigations-in-msvc./) блоге группы разработчиков Visual C++.

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Дополнительные сведения см. в разделе [работа со свойствами проекта](../../ide/working-with-project-properties.md).

1. Выберите **свойства конфигурации** > **C/C++** > **командной строки** страницу свойств.

1. Введите **/Qspectre** параметра компилятора в **Дополнительные параметры** поле. Выберите **ОК** для применения изменений.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также

[Параметры /Q (низкоуровневые операции)](../../build/reference/q-options-low-level-operations.md)  
[Параметры компилятора](../../build/reference/compiler-options.md)  
[Настройка параметров компилятора](../../build/reference/setting-compiler-options.md)  
