---
title: "/Zc:wchar_t (wchar_t – это собственный тип) | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "VC.Project.VCCLWCECompilerTool.TreatWChar_tAsBuiltInType"
  - "VC.Project.VCCLCompilerTool.TreatWChar_tAsBuiltInType"
  - "/Zc:wchar_t"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "/Zc - параметры компилятора [C++]"
  - "параметры компилятора - совместимость"
  - "wchar_t - тип"
  - "Zc - параметры компилятора [C++]"
  - "-Zc - параметры компилятора [C++]"
ms.assetid: b0de5a84-da72-4e5a-9a4e-541099f939e0
caps.latest.revision: 18
caps.handback.revision: 18
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# /Zc:wchar_t (wchar_t – это собственный тип)
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

Разбор `wchar_t` как встроенного типа в соответствии со стандартом C\+\+.  По умолчанию параметр **\/Zc:wchar\_t** включен.  
  
## Синтаксис  
  
```  
/Zc:wchar_t[-]  
```  
  
## Заметки  
 Если параметр **\/Zc:wchar\_t** включен, `wchar_t` сопоставляется собственному специальному типу `__wchar_t` Microsoft.  Если указан параметр **\/Zc:wchar\_t\-** \(со знаком минус\), `wchar_t` сопоставляется объявлению `typedef` для типа `unsigned short`.  \(В Visual C\+\+ 6.0 и ранее тип `wchar_t` не был реализован как встроенный тип, а объявлялся в файле wchar.h как `typedef` для `unsigned short`.\) Не рекомендуется использовать **\/Zc:wchar\_t\-**, поскольку стандарт C\+\+ требует, чтобы тип `wchar_t` был встроенным типом.  Использование версии `typedef` может вызывать проблемы переносимости.  Если при обновлении с более ранней версии Visual C\+\+ возникает ошибка компилятора [C2664](../../error-messages/compiler-errors-2/compiler-error-c2664.md) в связи с тем, что код пытается выполнить неявное преобразование типа `wchar_t` в тип `unsigned short`, рекомендуется изменить код, чтобы устранить ошибку, но не менять значение параметра **\/Zc:wchar\_t\-**.  
  
 Microsoft реализует тип `wchar_t` как двухбайтовое значение без знака.  Дополнительные сведения о `wchar_t` см. в разделах [Диапазоны типов данных](../../cpp/data-type-ranges.md) и [Фундаментальные типы](../../cpp/fundamental-types-cpp.md).  
  
 При создании нового кода, который должен взаимодействовать со старым кодом, в котором по\-прежнему используется версия `typedef` типа `wchar_t`, создайте перегруженные версии для вариантов `unsigned short` и `__wchar_t` типа `wchar_t`, чтобы код можно было связать как с кодом, скомпилированным с параметром **\/Zc:wchar\_t**, так и с кодом, скомпилированным без этого параметра.  В противном случае будет необходимо предоставить две различных сборки библиотеки — одну с включенным параметром **\/Zc:wchar\_t**, вторую — с выключенным.  Даже в этом случае рекомендуется произвести сборку старого кода с использованием компилятора, который используется для компиляции нового кода.  Никогда не смешивайте двоичные файлы, скомпилированные разными компиляторами.  
  
 Если указан параметр **\/Zc:wchar\_t**, определены символы **\_WCHAR\_T\_DEFINED** и **\_NATIVE\_WCHAR\_T\_DEFINED**.  Для получения дополнительной информации см. [Предустановленный макрос](../../preprocessor/predefined-macros.md).  
  
 Поскольку теперь по умолчанию параметр **\/Zc:wchar\_t** включен, если в коде используются глобальные функции COM компилятора, рекомендуется заменить явные ссылки на comsupp.lib \(из директивы [comment pragma](../../preprocessor/comment-c-cpp.md) или из командной строки\) ссылками на comsuppw.lib или comsuppwd.lib.  \(Если необходимо выполнять компиляцию с параметром **\/Zc:wchar\_t\-**, используйте comsupp.lib.\) Если включен файл заголовка comdef.h, правильная библиотека задается автоматически.  Дополнительные сведения о поддержке COM компилятором см. в разделе [Поддержка компилятора COM](../Topic/Compiler%20COM%20Support.md).  
  
 При компиляции кода C тип `wchar_t` не поддерживается.  Дополнительные сведения о вопросах соответствия, связанных с Visual C\+\+, см. в разделе [Нестандартное поведение](../Topic/Nonstandard%20Behavior.md).  
  
### Установка данного параметра компилятора в среде разработки Visual Studio  
  
1.  Откройте диалоговое окно **Страницы свойств** проекта.  Дополнительные сведения см. в разделе [Работа со свойствами проектов](../../ide/working-with-project-properties.md).  
  
2.  В левой области разверните узел **Свойства конфигурации**, **C\/C\+\+**, затем выберите **Язык**.  
  
3.  Измените значение свойства **Считать WChar\_t встроенным типом**.  
  
### Установка данного параметра компилятора программным способом  
  
-   См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.TreatWChar_tAsBuiltInType%2A>.  
  
## См. также  
 [\/Zc \(соответствие\)](../../build/reference/zc-conformance.md)