---
title: "/GUARD (Включить проверки защиты) | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
ms.assetid: 72758e23-70ac-4616-94d7-d767477406d1
caps.latest.revision: 5
caps.handback.revision: 5
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# /GUARD (Включить проверки защиты)
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

Указывает поддержку для проверок защиты потока управления в исполняемом образе.  
  
## Синтаксис  
  
```  
/GUARD:{CF|NO}  
```  
  
## Заметки  
 Если задано \/GUARD:CF, компоновщик изменяет заголовок файла DLL или EXE, чтобы указать поддержку для проверок среды выполнения защиты потока управления \(CFG\).  Компоновщик также добавляет в заголовок требуемый целевой поток управления.  По умолчанию параметр \/GUARD:CF отключен.  Его можно отключить явным образом, если задать \/GUARD:NO.  Для эффективной работы для параметра \/GUARD:CF также требуется параметр компоновщика [\/DYNAMICBASE \(использование технологии Address Space Layout Randomization \(ASRL\)\)](../../build/reference/dynamicbase-use-address-space-layout-randomization.md), который по умолчанию включен.  
  
 При компиляции исходного кода с помощью параметра [\/guard:cf](../../build/reference/guard-enable-control-flow-guard.md) компилятор анализирует поток управления путем проверки всех косвенных вызовов на наличие возможных конечных адресов.  Компилятор вставляет код, чтобы убедиться, что целевой адрес инструкции косвенного вызова находится в списке известных целевых адресов во время выполнения.  Операционные системы, поддерживающие CFG, останавливают программу, для которой проверка в среде выполнения CFG завершается сбоем.  Это позволяет усложнить для злоумышленника процесс выполнения вредоносного кода путем повреждения данных для изменения целевого объекта вызова.  
  
 Чтобы компилятор и компоновщик смогли создавать исполняемые образы с включенной функцией CFG, необходимо задать параметр \/GUARD:CF.  Код, компилируемый, но не скомпонованный с помощью \/GUARD:CF, снижает стоимость проверки среды выполнения, но не включает защиту CFG.  Если параметр \/GUARD:CF задан для команды `cl`, чтобы выполнять компиляцию и компоновку за один шаг, компилятор передает флаг компоновщику.  Если в Visual Studio задано свойство **Защита потока управления**, то параметр \/GUARD:CF передается как в компилятор, так и в компоновщик.  Если файлы объектов или библиотеки скомпилированы отдельно, необходимо явным образом задать параметр в команде `link`.  
  
### Настройка этого параметра компоновщика в Visual Studio  
  
1.  Откройте диалоговое окно **Окна свойств** проекта.  Дополнительные сведения см. в разделе [Открытие свойств страниц проекта](../../misc/how-to-open-project-property-pages.md).  
  
2.  Разверните узлы **Свойства конфигурации**, **Компоновщик**, **Командная строка**.  
  
3.  В разделе **Дополнительные параметры** введите `/GUARD:CF`.  
  
## См. также  
 [\/guard \(включение защиты потока управления\)](../../build/reference/guard-enable-control-flow-guard.md)   
 [Настройка параметров компоновщика](../../build/reference/setting-linker-options.md)   
 [Параметры компоновщика](../../build/reference/linker-options.md)