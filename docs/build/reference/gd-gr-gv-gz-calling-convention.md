---
title: / Gd, / GR, GV, /Gz (соглашение о вызовах) | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-tools
ms.topic: reference
f1_keywords:
- /gr
- /Gv
- /gz
- /Gd
- VC.Project.VCCLCompilerTool.CallingConvention
dev_langs:
- C++
helpviewer_keywords:
- -Gd compiler option [C++]
- -Gv compiler option [C++]
- /Gv compiler option [C++]
- -Gr compiler option [C++]
- Gd compiler option [C++]
- Gr compiler option [C++]
- /Gz compiler option [C++]
- -Gz compiler option [C++]
- /Gd compiler option [C++]
- Gz compiler option [C++]
- Gv compiler option [C++]
- /Gr compiler option [C++]
ms.assetid: fd3110cb-2d77-49f2-99cf-a03f9ead00a3
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: 3da8b4fcddbc384a785b27f0a7d706236a46ccf0
ms.sourcegitcommit: a4454b91d556a3dc43d8755cdcdeabcc9285a20e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2018
ms.locfileid: "34703776"
---
# <a name="gd-gr-gv-gz-calling-convention"></a>/Gd, /Gr, /Gv, /Gz (соглашение о вызовах)
Эти параметры определяют порядок, в функцию аргументы передаются в стек ли вызывающая или вызываемая функция удаляет аргументы из стека в конце вызова, а также соглашение об именах, используемый компилятором для идентификации отдельные функции.

## <a name="syntax"></a>Синтаксис

> **/Gd**<br/>
> **/Gr**<br/>
> **/Gv**<br/>
> **/GZ**<br/>

## <a name="remarks"></a>Примечания

**/Gd**, параметр по умолчанию, указывает [__cdecl](../../cpp/cdecl.md) соглашение о вызовах для всех функций за исключением членов C++, функции и функции, помеченные [__stdcall](../../cpp/stdcall.md), [__ fastcall](../../cpp/fastcall.md), или [__vectorcall](../../cpp/vectorcall.md).

**/ GR** указывает `__fastcall` соглашение о вызовах для всех функций за исключением функций-членов C++, функции с именем `main`и функции, помеченные `__cdecl`, `__stdcall`, или `__vectorcall`. Все `__fastcall` функции должны иметь прототипы. Это соглашение о вызове доступна только в компиляторах, предназначенных для x86 и учитывается в компиляторах, предназначенных для других архитектур.

**/GZ** указывает `__stdcall` соглашение о вызовах для всех функций за исключением функций-членов C++, функции с именем `main`и функции, помеченные `__cdecl`, `__fastcall`, или `__vectorcall`. Все `__stdcall` функции должны иметь прототипы. Это соглашение о вызове доступна только в компиляторах, предназначенных для x86 и учитывается в компиляторах, предназначенных для других архитектур.

**/GV** указывает `__vectorcall` соглашение о вызовах для всех функций за исключением функций-членов C++, называемый основным функции, функции с `vararg` переменное число аргументов или функции, которые отмечены конфликтующее `__cdecl`, `__stdcall`, или `__fastcall` атрибута. Это соглашение о вызове доступна только для x86- и x64 архитектуры, поддерживающие /arch:SSE2 и выше и учитывается в компиляторах, предназначенных для архитектуры ARM.

Функции, которые принимают переменное число аргументов должны быть помечены как `__cdecl`.

**/Gd**, **/GR**, **/Gv** и **/Gz** не совместимы с [/CLR: safe](../../build/reference/clr-common-language-runtime-compilation.md) или   **/CLR: pure**. **/CLR: pure** и **/CLR: safe** параметры компилятора являются устаревшими в Visual Studio 2015 и не поддерживается в Visual Studio 2017 г.

> [!NOTE]
> По умолчанию для x86 процессоров, функций-членов C++ используйте [__thiscall](../../cpp/thiscall.md).

Для всех процессоров, функция-член, который явным образом помечен как `__cdecl`, `__fastcall`, `__vectorcall`, или `__stdcall` использует соглашение о вызовах, если он не учитывается в этой архитектуре. Функция-член, которая принимает переменное число аргументов, всегда использует `__cdecl` соглашение о вызовах.

Эти параметры компилятора не оказывают влияния на Декорирование имен методов в C++ и функций. Если иное не объявлено как `extern "C"`, методы и функции C++ используют другую схему именования. Дополнительные сведения см. в разделе [декорированные имена](../../build/reference/decorated-names.md).

Дополнительные сведения о соглашения о вызовах см. в разделе [соглашения о вызовах](../../cpp/calling-conventions.md).

## <a name="cdecl-specifics"></a>особенности __cdecl

На x86 процессоры, все аргументы функции передаются в стек справа налево. На ARM и x64 архитектур, а некоторые аргументы передаются через регистр, и остальные передаются в стек справа налево. Вызывающую программу выводит аргументы из стека.

Для языка C `__cdecl` использует соглашение об именовании, имя функции предшествует знак подчеркивания ( `_` ); регистра не выполняется. Если иное не объявлено как `extern "C"`, функции C++ используют другую схему именования. Дополнительные сведения см. в разделе [декорированные имена](../../build/reference/decorated-names.md).

## <a name="fastcall-specifics"></a>особенности __fastcall

Некоторые `__fastcall` аргументы функции передаются в регистрах (для x86 процессоры, ECX и EDX), а остальные передаются в стек справа налево. Вызываемая процедура извлекает эти аргументы из стека перед возвратом. Как правило **/GR** снижает время выполнения.

> [!NOTE]
> Следует соблюдать осторожность при использовании `__fastcall` соглашение о вызовах для любой функции, который написан на языке встроенной сборки. Использование регистров, могут конфликтовать с использованием компилятором.

Для языка C `__fastcall` использует соглашение об именовании, имя функции предшествует знак (`@`) следуют размер аргументов функции в байтах. Изменение регистра не выполняется. Компилятор использует этот шаблон для соглашения об именах:

`@function_name@number`

При использовании `__fastcall` соглашение об именовании, используйте стандартные включаемые файлы. В противном случае вы получите неразрешенные внешние ссылки.

## <a name="stdcall-specifics"></a>особенности __stdcall

Объект `__stdcall` аргументы функции передаются в стек справа налево, а вызываемая функция извлекает эти аргументы из стека перед возвратом.

Для языка C `__stdcall` использует соглашение об именовании, имя функции предшествует знак подчеркивания ( `_` ) и за которым следует знак (@) и размер аргументов функции в байтах. Преобразование регистра не выполняется. Компилятор использует этот шаблон для соглашения об именах:

`_functionname@number`

## <a name="vectorcall-specifics"></a>особенности __vectorcall

Объект `__vectorcall` целочисленные аргументы функции передаются по значению, используя не более двух (на x86) или четыре (на x64) целое число со знаком регистрирует и до шести XMM регистров с плавающей запятой и значения вектора, а остальные передаются в стек справа налево. Вызываемая функция очищает стек перед возвратом. Вектор и возвращаемого значения с плавающей запятой, возвращаются в XMM0.

Для языка C `__vectorcall` соглашение об именовании используется имя функции, следуют символов (@@) и размер аргументов функции в байтах. Преобразование регистра не выполняется. Компилятор использует этот шаблон для соглашения об именах:

`functionname@@number`

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Дополнительные сведения см. в разделе [работа со свойствами проекта](../../ide/working-with-project-properties.md).

1. Выберите **C/C++** > **Дополнительно** страницу свойств.

1. Изменить **соглашение о вызовах** свойство.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.CallingConvention%2A>.

## <a name="see-also"></a>См. также

- [Параметры компилятора](../../build/reference/compiler-options.md)
- [Настройка параметров компилятора](../../build/reference/setting-compiler-options.md)
