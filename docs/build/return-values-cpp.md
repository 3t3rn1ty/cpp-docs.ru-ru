---
title: "Возвращаемые значения (C++) | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
ms.assetid: 53583524-b337-4228-a9c6-c9bf516babe8
caps.latest.revision: 17
caps.handback.revision: 15
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# Возвращаемые значения (C++)
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Скалярное возвращаемое значение не больше 64 битов возвращается посредством RAX \(сюда входят типы \_\_m64\).  Нескалярные типы, включая типы с плавающей точкой, тип Double и векторные типы, такие как [\_\_m128](../Topic/__m128.md), [\_\_m128i](../Topic/__m128i.md) и [\_\_m128d](../cpp/m128d.md), возвращаются в XMM0.  Состояние неиспользуемых битов в возвращаемом значении в RAX или XMM0 не определяется.  
  
 Определенные пользователем типы можно вернуть из глобальных функций и статических функций\-членов по значению.  Для возврата в RAX по значению длина определенных пользователем типов должна быть 1, 2, 4, 8, 16, 32 или 64 бита; типы должны быть без определенного пользователем конструктора, деструктора или оператора назначения копирования; без частных или защищенных нестатических данных\-членов; без нестатических данных\-членов ссылочного типа; без базовых классов; без виртуальных функций и без данных\-членов, которые также не соответствуют этим требованиям.  \(Фактически это — определение типа C \+\+ 03 POD.  Поскольку определение изменилось в стандарте C \+\+ 11, не рекомендуется использовать `std::is_pod` для этого теста.\) В противном случае вызывающий объект берет на себя ответственность за выделение памяти и передачу указателя для возвращаемого значения в качестве первого аргумента.  Последующие аргументы затем перемещаются на один аргумент вправо.  Тот же указатель должен быть возвращен вызываемой стороной в RAX.  
  
 В приведенных ниже примерах показан способ передачи параметров и возвращаемых значений для функций с указанными объявлениями.  
  
## Пример возвращаемого значения 1 — результат в 64 бита  
  **\_\_int64 func1\(int a, float b, int c, int d, int e\);**  
**\/\/ вызывающий объект передает переменную "a" в RCX, "b" в XMM1, "c" в R8, "d" в R9, а "e" перемещает в стек,**  
**\/\/вызываемый объект возвращает в RAX результат \_\_int64.**   
## Пример возвращаемого значения 2 — результат в 128 бит  
  **\_\_m128 func2\(float a, double b, int c, \_\_m64 d\);**   
**\/\/вызывающий объект передает a в XMM0, b в XMM1, c в R8, d в R9,**   
**\/\/вызываемый объект возвращает в XMM0 результат \_\_m128.**   
## Пример возвращаемого значения 3 — результат пользовательского типа по указателю  
  **struct Struct1 {**  
 **int j, k, l;    \/\/Struct1 превышает 64 бита.  };**  
**Struct1 func3\(int a, double b, int c, float d\);**   
**\/\/вызывающий объект выделяет память для возвращаемого Struct1 и передает указатель в RCX,**   
**\/\/a в RDX, b в XMM2, c в R9, помещает d в стек;**   
**\/\/вызываемый объект возвращает указатель в результат Struct1 в RAX.**    
## Пример возвращаемого значения 4 — результат пользовательского типа по значению  
  **struct Struct2 {**  
 **int j, k;    \/\/Struct2 соответствует размеру в 64 бита и требованиям для возврата по значению.  };**  
**Struct2 func4\(int a, double b, int c, float d\);**   
**\/\/вызывающий объект передает a в RCX, b в XMM1, c в R8, d в XMM3;**   
**\/\/вызываемый объект возвращает в RAX результат Struct2 по значению.**    
## См. также  
 [Соглашение о вызовах](../build/calling-convention.md)