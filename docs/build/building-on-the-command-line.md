---
title: "Построение в командной строке кода C/C++ | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-tools
ms.tgt_pltfrm: 
ms.topic: get-started-article
dev_langs:
- C++
helpviewer_keywords:
- command-line builds [C++]
- compiling source code [C++], command line
- builds [C++], command-line
- command line [C++], building from
- command line [C++], compilers
ms.assetid: 7ca9daed-a003-4162-842d-908f79058365
caps.latest.revision: 
author: corob-msft
ms.author: corob
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 9f613c20e0cab45a8eaa802c4c7ba0c6ac391357
ms.sourcegitcommit: 6002df0ac79bde5d5cab7bbeb9d8e0ef9920da4a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2018
---
# <a name="build-cc-code-on-the-command-line"></a>Построение кода C/C++ в командной строке

Вы можете выполнять сборку приложений на языках C и C++ из командной строки с помощью средств, включенных в [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)].

При выборе одного из рабочих нагрузок C++ [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] установщик, он устанавливает набор средств, включающий компиляторов C/C++, компоновщики, и другие средства построения. Эти средства используются [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] интегрированной среды разработки и они также могут использоваться из командной строки. Существуют отдельные компиляторы размещенных x86 и размещенных x64 и средства для создания кода для x86, x64 и целевые объекты ARM. Каждый набор средств для определенного узла и целевая архитектура сборки хранятся в собственном каталоге. Для правильной работы этих средств требуется несколько включать определенные переменные среды, чтобы добавить их к пути и задать файл, файл библиотеки и расположения пакета SDK. Чтобы упростить процесс для задания этих переменных среды, программа установки создает настраиваемый командные файлы, также известные как пакетных файлов, во время установки. Один из этих файлов команда запускаются в окне командной строки, чтобы задать архитектура конкретную сборку. Для удобства, программа установки создает ярлыки в меню «Пуск» (или начальной странице в Windows 8.x), откройте окно командной строки разработчика с помощью эти командные файлы, поэтому все необходимые переменные среды, задайте и готова к использованию. 

Необходимые переменные среды специфичны для установки и архитектуру сборки следует выбрать и могут изменяться при обновлении продукта. Таким образом настоятельно рекомендуется использовать один из ярлыков установленных командной строке или командных файлов вместо настройки переменных окружения в Windows самостоятельно. Дополнительные сведения см. в разделе [набор переменных пути и среды для сборок командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md).  

Наборы инструментов командной строки, командные файлы и ярлыки командной строки, которые установлены зависят от процессора компьютера и параметров, выбранных во время установки. Как минимум будут установлены 32-разрядные размещенные x86 средства, создающие 32-разрядный x86 машинный код и кросс-средства, создающие x64 собственный 64-разрядного кода. Если у вас есть 64-разрядной версии Windows, также будут установлены 64-разрядные размещенные x64 средства, создающие 64-разрядный машинный код и кросс-средства, создающие 32-разрядный машинный код. Если вы решили установить дополнительные инструменты C++ универсальной платформы Windows, 32-разрядных и 64-разрядных собственных средств, создающие ARM кода также будут установлены. Другие рабочие нагрузки, может потребоваться установить дополнительные инструменты.

<a name="developer_command_prompt_shortcuts"></a>
## <a name="developer-command-prompt-shortcuts"></a>Ярлыки командной строки разработчика

Ярлыки командной строки устанавливаются в определенной версии [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] папку, в меню «Пуск». Ниже приведен список базовых ярлыки командной строки и архитектуру сборки, они поддерживают:

- **Командная строка разработчика** задает среду для использования 32-разрядные, x86 собственного средства для построения 32-разрядные, x86 и машинного кода.  
- **x86 собственного средства командной строки** задает среду для использования 32-разрядные, x86 собственного средства для построения 32-разрядные, x86 и машинного кода.  
- **x64 собственного средства командной строки** задает среду для использования 64-разрядной, x64 собственного средства для создания 64-разрядной, x64 и машинного кода.  
- **x86_x64 Командная строка Cross Tools** задает среду для использования 32-разрядные, x86 собственного средства для создания 64-разрядной, x64 и машинного кода.  
- **x64_x86 Командная строка Cross Tools** задает среду для использования 64-разрядной, x64 собственного средства для построения 32-разрядные, x86 и машинного кода.  

Фактическое начало меню папки и в контекстном может различаться в зависимости от версии [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] после установки и установка понятное имя, если задать один. Например, при наличии Visual Studio 2017 г. установлен, и вы предоставили установки псевдоним 15,3, ярлык командной строки разработчика называется **Командная строка разработчика для VS 2017 г. (15,3)**, в папку с именем  **Visual Studio 2017 г**. 

Если вы уже установили [Build Tools для Visual Studio 2017 г](https://go.microsoft.com/fwlink/p/?linkid=840931) или [построения набор средств Visual C++ 2015](http://landinghub.visualstudio.com/visual-cpp-build-tools) edition, может быть только определенные машинный код или между Сервис, параметры командной строки разработчика. 

<a name="developer_command_prompt"></a>
## <a name="to-open-a-developer-command-prompt-window"></a>Чтобы открыть окно командной строки разработчика  
  
1.  Откройте на рабочем столе Windows **запустить** меню, а затем выберите, чтобы найти и открыть папку для вашей версии Visual Studio, например, **2017 г. Visual Studio**. В некоторых предыдущих версиях Visual Studio, сочетания клавиш, во вложенной папке **набора средств Visual Studio**.  
  
2.  В папке, выберите **Командная строка разработчика** для вашей версии Visual Studio. Это сочетание клавиш запускает окно командной строки разработчика, в которой используется архитектура сборки по умолчанию 32-разрядные, собственный x86 средств для построения 32-разрядные, x86 и машинного кода. При желании архитектура сборки не по умолчанию, выберите один из собственных или между средств командные строки, чтобы указать узел и целевая архитектура. 

Еще более быстрый способ открыть окно командной строки разработчика — введите *Командная строка разработчика* в поле поиска на рабочем столе, выберите нужный результат.

<a name="developer_command_files"></a>
## <a name="developer-command-files-and-locations"></a>Файлы команд разработчиков и расположения

При желании установить среду архитектура сборки в окне командной строки с существующие, можно использовать один из командные файлы, созданные с помощью установщика. Расположение этих файлов зависит от версии [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] установки, и на папки и имена параметров, заданные во время установки. Для Visual Studio 2017 г обычной установки на 64-разрядном компьютере находятся в \Program файлы (x86) \Microsoft Visual Studio\2017\\*edition*, где *выпуск* может быть сообщества, Вы задали Профессиональная, Корпоративная, BuildTools или другое имя. Для Visual Studio 2015 обычной установки находится в \Program Files (x86) \Microsoft Visual Studio 14.0. 

Основной разработчика командной строки командный файл, VsDevCmd.bat, находится в подкаталоге "Common7\Tools" каталог установки. Если параметры не указаны, это задает архитектуру среде и сборке использовать 32-разрядные средства x86-машинный код для создания 32-разрядный x86 кода.

Дополнительные командные файлы доступны для настройки определенного построения архитектур, в зависимости от архитектуры процессора и [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] рабочих нагрузок и установки параметров. В Visual Studio 2017 г., они расположены в подкаталоге VC\Auxiliary\Build [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] каталог установки. В Visual Studio 2015 они находятся в папке VC, VC\bin или VC\bin\\*архитектуры* подкаталогов каталога установки, где *архитектуры* является одним из собственных или перекрестный параметры компилятора. Эти файлы команд задайте параметры, а вызов VsDevCmd.bat для настройки среды архитектура указанной сборки. Обычная установка может включать эти командные файлы:

- **файл vcvars32.bat** производить построение 32-разрядный x86 32-разрядные средства x86 и машинного кода.  
- **vcvars64.bat** производить построение x64 64-разрядных 64-разрядные средства x64 и машинного кода.  
- **vcvarsx86_amd64.bat** использовать для построения x64 64-разрядных инструменты перекрестного x86 в собственном коде 32-разрядного кода.  
- **vcvarsamd64_x86.bat** использовать для построения 32-разрядный x86 инструменты перекрестного x64 собственный 64-разрядных кода.  
- **vcvarsx86_arm.bat** сборки ARM кода с помощью средств перекрестного x86 собственного 32-разрядных.  
- **vcvarsamd64_arm.bat** сборки ARM кода с помощью средств перекрестного x64 собственный 64-разрядной.  
- **файл Vcvarsall.bat** использовать параметры для задания узла и целевых архитектур, а также настроить параметры пакета SDK и платформы. Вызывается с помощью `/help` параметра для списка параметров.  

> [!CAUTION]
>  Файл vcvarsall.bat и других командных файлов, могут различаться на разных компьютерах. Не заменяйте отсутствующий или поврежденный файл vcvarsall.bat файлом с другого компьютера. Запустите [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] установщик, чтобы заменить отсутствующий файл.  
>   
> Файл vcvarsall.bat также может иметь отличия в разных версиях. Если текущая версия Visual C++ установлен на компьютере с более ранней версии Visual C++, не запускайте файл vcvarsall.bat или другой командный файл из разных версий в том же окне командной строки.  
 
Указание архитектуры конкретной сборке в существующее окно команд проще всего использовать файл vcvarsall.bat. Можно использовать файл vcvarsall.bat для установки переменных среды для настройки командной строки для собственной компиляции 32-разрядная или 64-разрядной или перекрестной компиляции x86 x64 и процессорами ARM. для Microsoft Store, универсальной платформы Windows то платформы Windows Desktop; для указания текущего ПАКЕТА для использования; и укажите версию набора инструментов платформы. Если аргументы не предоставлены, файл vcvarsall.bat настраивает переменные среды для использования текущей 32-разрядных собственного компилятора для x86 целевых объектов рабочего стола Windows. Однако его можно использовать для настройки любого собственного или кросс-компилятор средства. Если указать конфигурацию компилятора, которая не установлена или недоступна в архитектуре компьютера сборки, отображается сообщение об ошибке. В этой таблице показаны аргументы поддерживаемой архитектуры:  
  
|Аргумент Vcvarsall.bat архитектуры|Компилятор|Архитектура компьютера узла|Архитектура выходных данных сборки|  
|----------------------------|--------------|----------------------------------|-------------------------------|  
|x86|собственный 32-разрядный x86|x86, x64|x86|  
|x86\_amd64 или x86\_x64|x64 на x86 cross|x86, x64|X64|  
|x86_arm|ARM для x86 (кросс-компилятор)|x86, x64|ARM|  
|AMD64 или x64|x64 собственный 64-разрядный|X64|X64|  
|AMD64\_x86 или x64\_x86|кросс-x86 на x64|X64|x86|  
|AMD64\_arm или x64\_arm|ARM для x64 кросс-|X64|ARM|  
  
Можно использовать **хранения** или **uwp** параметры, чтобы указать тип платформы или ни одно указание классического приложения. Чтобы указать версию пакета SDK для Windows, можно использовать полный номер пакета SDK Windows 10, например 10.0.10240.0 или укажите 8.1, чтобы использовать пакет SDK Windows 8.1. Позволяет указать набор инструментов компилятора Visual Studio 2015; 14.0 по умолчанию среды назначается набор инструментов компилятора Visual Studio 2017 г.

<a name="vcvarsall"></a>
## <a name="to-set-up-the-build-environment-in-an-existing-command-prompt-window"></a>Чтобы настроить среду сборки в окне командной строки с существующие  
  
1.  В командной строке используйте команду CD перейдите в каталог установки Visual Studio. Затем с помощью компакт-диска еще раз для изменения во вложенную папку с файлами команды зависящие от конфигурации. Это подкаталог VC\Auxiliary\Build Visual Studio 2017 г. Для Visual Studio 2015 используйте подкаталог VC.  
  
1.  Чтобы настроить это окно командной строки, чтобы использовать 32-разрядные средства для создания кода для x86 платформ, в командной строке введите:  
  
     `vcvarsall`  

1.  Чтобы настроить это окно командной строки, чтобы использовать 32-разрядные средства для создания кода для x64 платформ, в командной строке введите:  
  
     `vcvarsall x86_amd64`  
  
1.  Чтобы настроить это окно командной строки, чтобы использовать 32-разрядные средства для создания кода для платформы ARM, в командной строке введите:  
  
     `vcvarsall x86_arm`  
  
1.  Чтобы настроить окно командной строки для использования 64-разрядные средства для создания кода для x64 платформ, в командной строке введите:  
  
     `vcvarsall amd64`  
  
1.  Чтобы настроить окно командной строки для использования 64-разрядные средства для создания кода для x86 платформ, в командной строке введите:  
  
     `vcvarsall amd64_x86`  
  
1.  Чтобы настроить окно командной строки для использования 64-разрядные средства для создания кода для платформы ARM, в командной строке введите:  
  
     `vcvarsall amd64_arm`  

Командный файл устанавливает необходимые переменные среды для путей для средств построения, библиотеки и заголовки. Теперь можно использовать это окно командной строки для запуска командной строки компилятора и инструментов.  
  
Если вы используете [DEVENV](/visualstudio/ide/reference/devenv-command-line-switches) для построения из командной строки среды, заданные файл vcvarsall.bat или другие командные файлы не влияет на ваши сборки, если также указан **/useenv** параметр.  

## <a name="command-line-tools"></a>Средства командной строки
  
Сборка проекта C/C++ в командной строке, можно использовать следующие средства командной строки Visual C++:  
  
[CL](../build/reference/compiling-a-c-cpp-program.md)  
Используйте компилятор (cl.exe) для компиляции и компоновки файлов исходного кода в приложения, библиотеки и DLL.  
  
[Link](../build/reference/linking.md)  
Используйте компоновщик (link.exe) для компоновки скомпилированных объектных файлов и библиотек в приложения и DLL.  
  
[MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)  
Используйте MSBuild (msbuild.exe) для сборки проектов Visual C++ и [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] решения. Это эквивалентно выполняется **построения** проекта или **построить решение** в [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] интегрированной среды разработки.  
  
[DEVENV](/visualstudio/ide/reference/devenv-command-line-switches)  
Используйте DEVENV (devenv.exe) в сочетании с параметром командной строки, например, **/Build** или **/Clean**— для выполнения определенных команд сборки без отображения [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] интегрированной среды разработки.  
  
[NMAKE](../build/nmake-reference.md)  
Используйте NMAKE (nmake.exe) для автоматизации задач сборки проектов Visual C++ с помощью традиционного файла makefile.  
  
При построении из командной строки, можно получить сведения о предупреждениях, ошибок и сообщений. Запуск [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)] и в строке меню выберите **справки**, **поиска**.  
  
## <a name="in-this-section"></a>В этом разделе  

В этом разделе документа приводятся статьи, в которых показано, как выполнять сборку приложений из командной строки, описывается, как настроить среду сборки из командной строки для использования 64-разрядного набора программ и платформ x86, x64 и ARM, а также демонстрируется использование программ сборки из командной строки MSBuild и NMAKE.  
  
[Пошаговое руководство. Компиляция машинной программы на языке C++ из командной строки](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md)  
Содержит пример создания и компиляции простой программы на языке C++ из командной строки.  
  
[Пошаговое руководство: Компиляция программы C в командной строке](../build/walkthrough-compile-a-c-program-on-the-command-line.md)  
Описывается компиляция программы, написанной на языке программирования C.  
  
[Пошаговое руководство. Компиляция программы на языке C++/CLI из командной строки](../build/walkthrough-compiling-a-cpp-cli-program-on-the-command-line.md)  
Описывается создание и компиляция программы C++/CLI, в которой используется платформа .NET Framework.  
  
[Пошаговое руководство. Компиляция программы на языке C++/CX из командной строки](../build/walkthrough-compiling-a-cpp-cx-program-on-the-command-line.md)  
Описывается создание и компиляция программы C++/CX, в которой используется среда выполнения Windows.  
  
[Установка переменных пути и среды при построении из командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md)  
Описывает, как запустить окно командной строки, которая имеет необходимые переменные среды для построения из командной строки, ориентированных на x86, x64 и ARM с помощью 32-разрядная или 64-разрядного набора инструментов платформы.  
  
[Справочник по программе NMAKE](../build/nmake-reference.md)  
Содержит ссылки на статьи, в которых описывается служебная программа обслуживания программ Майкрософт (NMAKE.EXE).  
  
[MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)  
Содержит ссылки на статьи, в которых рассматривается использование программы MSBuild.EXE.  
  
## <a name="related-sections"></a>Связанные разделы  

[/MD, /MT, /LD (использование библиотеки времени выполнения)](../build/reference/md-mt-ld-use-run-time-library.md)  
Описывается использование этих параметров компилятора для работы с библиотекой времени выполнения отладки или выпуска.  
  
[Параметры компилятора C/C++](../build/reference/compiler-options.md)  
Содержит ссылки на статьи, посвященные параметрам компилятора C и C++, а также программе CL.exe.  
  
[Параметры компоновщика](../build/reference/linker-options.md)  
Содержит ссылки на статьи, посвященные параметрам компоновщика и программе LINK.exe.  
  
[Средства сборки С/C++](../build/reference/c-cpp-build-tools.md)  
Содержит ссылки на средства построения C/C++, включенные в состав [!INCLUDE[vsprvs](../assembler/masm/includes/vsprvs_md.md)].  
  
## <a name="see-also"></a>См. также  

[Сборка программ C/C++](../build/building-c-cpp-programs.md)