---
title: Построение в командной строке кода C/C++ | Документы Microsoft
ms.custom: conceptual
ms.date: 06/21/2018
ms.technology:
- cpp-tools
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- command-line builds [C++]
- compiling source code [C++], command line
- builds [C++], command-line
- command line [C++], building from
- command line [C++], compilers
ms.assetid: 7ca9daed-a003-4162-842d-908f79058365
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: 241a7ae0d7f6c1adf269370301b39a3267440995
ms.sourcegitcommit: e013acba70aa29fed60ae7945162adee23e19c3b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/22/2018
ms.locfileid: "36322320"
---
# <a name="build-cc-code-on-the-command-line"></a>Построение кода C/C++ в командной строке

Приложениям C и C++ в командной строке можно создавать с помощью средств, включенных в Visual Studio.

## <a name="how-to-get-the-command-line-tools"></a>Как получить средства командной строки

Когда в установщик Visual Studio, выберите один из рабочих нагрузок C++, Visual Studio устанавливается *набор инструментов платформы*. Набор инструментов платформы имеет средства C и C++ для определенной версии Visual Studio, включая компиляторы C/C++, компоновщики, сборщиках и другие средства сборки, а также соответствующие библиотеки. Все эти средства можно использовать в командной строке, и они также используется в интегрированной среде разработки Visual Studio. Существуют отдельные компиляторы размещенных x86 и размещенных x64 и средства для создания кода для x86 x 64, ARM и ARM64 целевых объектов. Каждый набор средств для определенного узла и целевая архитектура сборки хранятся в собственном каталоге.

Для правильной работы средств требуется несколько переменных конкретной среды требуется задать. Они используются, чтобы добавить их к пути и задать файл, файл библиотеки и расположения пакета SDK. Чтобы упростить процесс для задания этих переменных среды, программа установки создает настраиваемые *командные файлы*, или пакетные файлы, во время установки. Один из этих файлов команды запускаются в окне командной строки для задания определенного узла и целевую архитектуру сборки, версию пакета SDK Windows, целевая платформа и набор инструментов платформы. Для удобства, программа установки создает ярлыки в меню «Пуск» (или начальной странице в Windows 8.x), откройте окно командной строки разработчика с помощью эти командные файлы, поэтому все необходимые переменные среды, задайте и готова к использованию.

Необходимые переменные среды специфичны для установки и архитектуру сборки следует выбрать и могут изменяться при обновлении продукта. Таким образом настоятельно рекомендуется использовать один из ярлыков установленных командной строке или командных файлов вместо настройки переменных окружения в Windows самостоятельно. Дополнительные сведения см. в разделе [набор переменных пути и среды для сборок командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md).

Наборы инструментов командной строки, командные файлы и ярлыки командной строки, которые установлены зависят от процессора компьютера и параметров, выбранных во время установки. Как минимум будут установлены 32-разрядные размещенные x86 средства, создающие 32-разрядный x86 машинный код и кросс-средства, создающие x64 собственный 64-разрядного кода. Если у вас есть 64-разрядной версии Windows, также будут установлены 64-разрядные размещенные x64 средства, создающие 64-разрядный машинный код и кросс-средства, создающие 32-разрядный машинный код. Если вы решили установить дополнительные инструменты C++ универсальной платформы Windows, 32-разрядных и 64-разрядных собственных средств, создающие ARM кода также будут установлены. Другие рабочие нагрузки, может потребоваться установить дополнительные инструменты.

## <a name="developer-command-prompt-shortcuts"></a>Ярлыки командной строки разработчика

Ярлыки командной строки устанавливаются в папке от версии Visual Studio в меню «Пуск». Ниже приведен список базовых ярлыки командной строки и архитектуру сборки, они поддерживают:

- **Командная строка разработчика** -задает среду для использования 32-разрядные, x86 собственного средства для построения 32-разрядные, x86 и машинного кода.
- **x86 собственного средства командной строки** -задает среду для использования 32-разрядные, x86 собственного средства для построения 32-разрядные, x86 и машинного кода.
- **x64 собственного средства командной строки** -задает среду для использования 64-разрядной, x64 собственного средства для создания 64-разрядной, x64 и машинного кода.
- **x86_x64 Командная строка Cross Tools** -задает среду для использования 32-разрядные, x86 собственного средства для создания 64-разрядной, x64 и машинного кода.
- **x64_x86 Командная строка Cross Tools** -задает среду для использования 64-разрядной, x64 собственного средства для построения 32-разрядные, x86 и машинного кода.

Фактическое начало меню папки и в контекстном различаться в зависимости от версии Visual Studio, установки и установки псевдоним Если задается один. Например, при наличии Visual Studio 2017 г. установлен, и вы уже данный его установка псевдонимом для *предварительного просмотра*, называется ярлык командной строки разработчика **Командная строка разработчика для VS 2017 г. (Предварительная версия)**, в папку с именем **2017 г. Visual Studio**.

Если вы уже установили [Build Tools для Visual Studio 2017 г](https://go.microsoft.com/fwlink/p/?linkid=875721) (который также включает набор инструментов компилятора Visual Studio 2015 с обновлением 3), только машинный код в зависимости от конкретной архитектуры или между tools устанавливаются параметры командной строки разработчика , а не Общие **Командная строка разработчика** ярлык.

<a name="developer_command_prompt"></a>
### <a name="to-open-a-developer-command-prompt-window"></a>Чтобы открыть окно командной строки разработчика

1. Откройте на рабочем столе Windows **запустить** меню, а затем выберите, чтобы найти и открыть папку для вашей версии Visual Studio, например, **2017 г. Visual Studio**. В некоторых предыдущих версиях Visual Studio, сочетания клавиш, во вложенной папке **набора средств Visual Studio**.

1. В папке, выберите **Командная строка разработчика** для вашей версии Visual Studio. Это сочетание клавиш запускает окно командной строки разработчика, в которой используется архитектура сборки по умолчанию 32-разрядные, собственный x86 средств для построения 32-разрядные, x86 и машинного кода. При желании архитектура сборки не по умолчанию, выберите один из собственных или между средств командные строки, чтобы указать узел и целевая архитектура.

Еще более быстрый способ открыть окно командной строки разработчика — введите *Командная строка разработчика* в поле поиска на рабочем столе, выберите нужный результат.

## <a name="developer-command-files-and-locations"></a>Файлы команд разработчиков и расположения

При необходимости задать среду архитектура сборки в окне командной строки с существующие можно использовать один из файлов команда (пакетные файлы) создана программой установки Чтобы установить необходимые среды. Только рекомендуется сделать это в новом окне командной строки, и мы не рекомендуем вам более поздних версий коммутатора в том же окне команд. Расположение этих файлов зависит от версии Visual Studio, установки и расположение и имен значений, выбранных во время установки. Для Visual Studio 2017 г обычной установки на 64-разрядном компьютере находятся в \Program файлы (x86) \Microsoft Visual Studio\2017\\*edition*, где *выпуск* может быть сообщества, Вы задали Профессиональная, Корпоративная, BuildTools или другое имя. Для Visual Studio 2015 обычной установки находится в \Program Files (x86) \Microsoft Visual Studio 14.0.

Основной разработчика командной строки командный файл, VsDevCmd.bat, находится в подкаталоге "Common7\Tools" каталог установки. Если параметры не указаны, это задает среду и узел и целевая архитектура для использования 32-разрядные средства x86 в собственном коде для сборки 32-разрядный x86 сборки кода.

Дополнительные командные файлы доступны для настройки определенного построения архитектур, в зависимости от архитектуры процессора и рабочих нагрузок в Visual Studio и параметры установки. В Visual Studio 2017 г. они расположены в подкаталоге VC\Auxiliary\Build каталога установки Visual Studio. В Visual Studio 2015 они находятся в папке VC, VC\bin или VC\bin\\*архитектуры* подкаталогов каталога установки, где *архитектуры* является одним из собственных или Параметры кросс компилятор. Эти файлы команд установить параметры по умолчанию и вызовите VsDevCmd.bat для настройки среды архитектура указанной сборки. Обычная установка может включать эти командные файлы:

|Командный файл|Узел и целевой архитектуры|
|---|---|
|**файл vcvars32.bat**| Использовать 32-разрядные средства x86-машинный код для создания 32-разрядный x86 кода.|
|**vcvars64.bat**| Производить построение x64 64-разрядных 64-разрядные средства x64 и машинного кода.|
|**vcvarsx86_amd64.bat**| Использовать для построения x64 64-разрядных инструменты перекрестного x86 в собственном коде 32-разрядного кода.|
|**vcvarsamd64_x86.bat**| Использовать для построения 32-разрядный x86 инструменты перекрестного x64 собственный 64-разрядных кода.|
|**vcvarsx86_arm.bat**| Используете средства перекрестного x86 собственного 32-разрядных для сборки кода ARM.|
|**vcvarsamd64_arm.bat**| Используете для построения кода ARM инструменты перекрестного x64 собственный 64-разрядной.|
|**файл Vcvarsall.bat**| Используйте параметры для задания узла и целевых архитектур, а также настроить параметры пакета SDK и платформы. Список поддерживаемых параметров, вызовите с помощью **/help** параметра.|

> [!CAUTION]
> Файл vcvarsall.bat и других командных файлов Visual Studio могут различаться на разных компьютерах. Не заменяйте отсутствующий или поврежденный файл vcvarsall.bat файлом с другого компьютера. Перезапустите установщик Visual Studio, чтобы заменить отсутствующий файл.
>
> Файл vcvarsall.bat также может иметь отличия в разных версиях. Если текущая версия Visual Studio установлена на компьютере с более ранней версии Visual Studio, не запускайте файл vcvarsall.bat или другого файла команд Visual Studio из разных версий в том же окне командной строки.

## <a name="use-the-developer-tools-in-an-existing-command-window"></a>Использовать инструменты разработчика в существующее окно команд

Указание архитектуры конкретной сборке в существующее окно команд проще всего использовать файл vcvarsall.bat. Можно использовать файл vcvarsall.bat для установки переменных среды для настройки командной строки для собственной компиляции 32-разрядная или 64-разрядной или перекрестной компиляции x86 x64 и процессорами ARM. для Microsoft Store, универсальной платформы Windows то платформы Windows Desktop; для указания текущего ПАКЕТА для использования; и укажите версию набора инструментов платформы. Если аргументы не предоставлены, файл vcvarsall.bat настраивает переменные среды для использования текущей 32-разрядных собственного компилятора для x86 целевых объектов рабочего стола Windows. Однако его можно использовать для настройки любого собственного или кросс-компилятор средства. Если указать конфигурацию компилятора, которая не установлена или недоступна в архитектуре компьютера сборки, отображается сообщение об ошибке.

### <a name="vcvarsall-syntax"></a>синтаксис Vcvarsall

> **файл Vcvarsall.bat** [*архитектура*] [*platform_type*] [*winsdk_version*] [**-vcvars_ver =** _vcversion_]

*Архитектура*<br/>
Этот необязательный аргумент указывает узел и целевая архитектура для использования. Если *архитектура* не указан, используется среда разработки по умолчанию. Поддерживаются следующие аргументы:

|*Архитектура*|Компилятор|Архитектура компьютера узла|Архитектура выходных данных (целевой) сборки|
|----------------------------|--------------|----------------------------------|-------------------------------|
|**x86**|собственный 32-разрядный x86|x86, x64|x86|
|**x86\_amd64** или **x86\_x64**|x64 на x86 cross|x86, x64|X64|
|**x86_arm**|ARM для x86 (кросс-компилятор)|x86, x64|ARM|
|**x86_arm64**|ARM64 на x86 кросс-|x86, x64|ARM64|
|**AMD64** или **x64**|x64 собственный 64-разрядный|X64|X64|
|**AMD64\_x86** или **x64\_x86**|кросс-x86 на x64|X64|x86|
|**AMD64\_arm** или **x64\_arm**|ARM для x64 кросс-|X64|ARM|
|**AMD64\_arm64** или **x64\_arm64**|ARM64 на x64 кросс-|X64|ARM64|

*platform_type*<br/>
Этот необязательный аргумент позволяет указать **хранения** или **uwp** платформ. По умолчанию имеет значение среды создания приложений рабочего стола или консоли.

*winsdk_version*<br/>
При необходимости указывает версию пакета SDK Windows для использования. По умолчанию используется последняя версия установленного пакета Windows SDK. Чтобы указать версию пакета SDK для Windows, можно использовать полный номер пакета SDK Windows 10 например **10.0.10240.0**, или укажите **8.1** использование пакета SDK Windows 8.1.

*vcversion*<br/>
При необходимости указывает набор инструментов компилятора Visual Studio для использования. По умолчанию среды назначается текущий набор инструментов компилятора Visual Studio 2017 г. Используйте **-vcvars_ver = 14.0** для указания набора инструментов компилятора Visual Studio 2015.

<a name="vcvarsall"></a>
#### <a name="to-set-up-the-build-environment-in-an-existing-command-prompt-window"></a>Чтобы настроить среду сборки в окне командной строки с существующие

1. В командной строке используйте команду CD перейдите в каталог установки Visual Studio. Затем с помощью компакт-диска еще раз для изменения во вложенную папку с файлами команды зависящие от конфигурации. Это подкаталог VC\Auxiliary\Build Visual Studio 2017 г. Для Visual Studio 2015 используйте подкаталог VC.

1. Введите команду для вашей среды предпочтительный разработчика. Например чтобы создать код ARM для UWP на 64-разрядной платформе, используя последняя версия Windows SDK и набор инструментов компилятора Visual Studio RTM 2017 г., используйте эта командная строка:

   `vcvarsall.bat amd64_arm uwp -vcvars_ver=14.10`

## <a name="create-your-own-command-prompt-shortcut"></a>Создайте ярлык командной строки

Если открыть окно свойств для одного из существующих ярлыки командной строки разработчика, вы увидите, что используется целевой объект команды. Например, целевой объект для **x64 собственного средства командной строки для VS 2017 г** ярлык — примерно:

`%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvars64.bat"`

Набор файлов пакета для конкретной архитектуры *архитектура* vcvarsall.bat параметров и вызова. Вы можете передать дополнительные параметры этих пакетных файлов, как вы будете передавать файл vcvarsall.bat или файл vcvarsall.bat может просто вызвать напрямую. Для указания параметров для команды ярлыка, их необходимо добавьте в конец команды в двойные кавычки. Например чтобы настроить ярлык для построения ARM кода для UWP на платформе x 64 с помощью последнего выпуска пакета Windows SDK и набор инструментов компилятора Visual Studio RTM 2017 г., воспользоваться следующим примером данный целевой объект команды в ярлык.

`%comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvarsall.bat amd64_arm uwp -vcvars_ver=14.10"`

Необходимо изменить путь для отражения вашего каталога установки Visual Studio.

## <a name="command-line-tools"></a>Средства командной строки

В командной строке, сборка проекта C/C++, Visual Studio предоставляет эти средства командной строки:

[CL](../build/reference/compiling-a-c-cpp-program.md)<br/>
Используйте компилятор (cl.exe) для компиляции и компоновки файлов исходного кода в приложения, библиотеки и DLL.

[Ссылка](../build/reference/linking.md)<br/>
Используйте компоновщик (link.exe) для компоновки скомпилированных объектных файлов и библиотек в приложения и DLL.

[MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)<br/>
Используйте MSBuild (msbuild.exe) для сборки проектов Visual C++ и решения Visual Studio. Это эквивалентно выполняется **построения** проекта или **построить решение** в Интегрированной среде разработки Visual Studio.

[DEVENV](/visualstudio/ide/reference/devenv-command-line-switches)<br/>
Используйте DEVENV (devenv.exe) в сочетании с параметром командной строки, например, **/Build** или **/Clean**— для выполнения определенных команд сборки без отображения Интегрированной среды разработки Visual Studio.

[(NMAKE)](../build/nmake-reference.md)<br/>
Используйте NMAKE (nmake.exe) для автоматизации задач сборки проектов Visual C++ с помощью традиционного файла makefile.

При построении в командной строке команда F1 для мгновенного Справка недоступна. Вместо этого можно использовать механизм поиска для получения сведений о предупреждениях, ошибки и сообщения, или файлы автономной справки можно использовать. Чтобы использовать поиск в [docs.microsoft.com](https://docs.microsoft.com/cpp/), введите строку поиска в поле поиска в верхней части страницы.

## <a name="in-this-section"></a>В этом разделе

В этом разделе документа приводятся статьи, в которых показано, как выполнять сборку приложений из командной строки, описывается, как настроить среду сборки из командной строки для использования 64-разрядного набора программ и платформ x86, x64 и ARM, а также демонстрируется использование программ сборки из командной строки MSBuild и NMAKE.

[Пошаговое руководство. Компиляция машинной программы на языке C++ из командной строки](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md)<br/>
Содержит пример создания и компиляции простой программы на языке C++ из командной строки.

[Пошаговое руководство: Компиляция программы C в командной строке](../build/walkthrough-compile-a-c-program-on-the-command-line.md)<br/>
Описывается компиляция программы, написанной на языке программирования C.

[Пошаговое руководство. Компиляция программы на языке C++/CLI из командной строки](../build/walkthrough-compiling-a-cpp-cli-program-on-the-command-line.md)<br/>
Описывается создание и компиляция программы C++/CLI, в которой используется платформа .NET Framework.

[Пошаговое руководство. Компиляция программы на языке C++/CX из командной строки](../build/walkthrough-compiling-a-cpp-cx-program-on-the-command-line.md)<br/>
Описывается создание и компиляция программы C++/CX, в которой используется среда выполнения Windows.

[Установка переменных пути и среды при построении из командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md)<br/>
Описывает, как запустить окно командной строки, которая имеет необходимые переменные среды для построения из командной строки, ориентированных на x86, x64 и ARM с помощью 32-разрядная или 64-разрядного набора инструментов платформы.

[Справочник по программе NMAKE](../build/nmake-reference.md)<br/>
Содержит ссылки на статьи, в которых описывается служебная программа обслуживания программ Майкрософт (NMAKE.EXE).

[MSBuild (Visual C++)](../build/msbuild-visual-cpp.md)<br/>
Содержит ссылки на статьи, в которых рассматривается использование программы MSBuild.EXE.

## <a name="related-sections"></a>Связанные разделы

[/MD, /MT, /LD (использование библиотеки времени выполнения)](../build/reference/md-mt-ld-use-run-time-library.md)<br/>
Описывается использование этих параметров компилятора для работы с библиотекой времени выполнения отладки или выпуска.

[Параметры компилятора C/C++](../build/reference/compiler-options.md)<br/>
Содержит ссылки на статьи, посвященные параметрам компилятора C и C++, а также программе CL.exe.

[Параметры компоновщика](../build/reference/linker-options.md)<br/>
Содержит ссылки на статьи, посвященные параметрам компоновщика и программе LINK.exe.

[Средства сборки С/C++](../build/reference/c-cpp-build-tools.md)<br/>
Предоставляет ссылки на C/C++ средства построения, которые включены в Visual Studio.

## <a name="see-also"></a>См. также

[Сборка программ C/C++](../build/building-c-cpp-programs.md)