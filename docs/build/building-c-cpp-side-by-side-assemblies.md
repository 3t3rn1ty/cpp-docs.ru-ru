---
title: "Построение C/C++ Side-by-side сборки | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-tools
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
helpviewer_keywords:
- side-by-side applications [C++]
ms.assetid: 7fa20b16-3737-4f76-a0b5-1dacea19a1e8
caps.latest.revision: 
author: corob-msft
ms.author: corob
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 4c54f0e3b8bceff3daa92ecb3e0ee46d7fbeb666
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="building-cc-side-by-side-assemblies"></a>Построение параллельных сборок C/C++
Объект [side-by-side сборки](http://msdn.microsoft.com/library/windows/desktop/ff951640) — это совокупность ресурсов — группы библиотек DLL, классов окон, серверов COM, библиотек типов или интерфейсов — доступны для приложения для использования во время выполнения. Основное преимущество упаковки библиотек DLL в сборках, — что несколько версий сборки может использоваться приложениями, в то же время, и существует возможность обслуживания установленных сборок при выпуске обновлений.  
  
 Приложения Visual C++ может использовать один или несколько библиотек DLL в различных частях приложения. Во время выполнения библиотеки DLL загружаются в основной процесс и выполняется требуемый код. Приложение зависит от операционной системы, чтобы поиск запрашиваемых, понять, какие другие зависимые библиотеки DLL должны загружаться и затем загружать их вместе с запрошенной библиотеки DLL. В версиях операционных систем Windows более ранних, чем Windows XP, Windows Server 2003 и Windows Vista, загрузчик операционной системы выполняет поиск зависимых библиотек DLL в локальной папке приложения или другой указанной папке в системном пути. В Windows XP, Windows Server 2003 и Windows Vista, загрузчик операционной системы может выполняться поиск зависимых библиотек DLL с помощью [манифеста](http://msdn.microsoft.com/library/windows/desktop/aa375365) файл и выполните поиск side-by-side сборок, содержащих эти библиотеки DLL.  
  
 По умолчанию при построении библиотеки DLL в Visual Studio имеет [манифест приложения](http://msdn.microsoft.com/library/windows/desktop/aa374191) внедрены в качестве ресурса RT_MANIFEST с Идентификатором 2. Как и в случае исполняемый файл этот манифест описывает зависимости этой DLL от других сборок. Предполагается, что библиотеки DLL не является частью сборки side-by-side и приложения, использующие эту библиотеку DLL не планируется использовать манифест приложения для его загрузки, но вместо этого полагаться на загрузчик операционной системы, чтобы найти эту библиотеку DLL в системном пути.  
  
> [!NOTE]
>  Очень важно для библиотеки DLL, которая использует манифест приложения для должен внедряться в качестве ресурса с Идентификатором 2. Если библиотека DLL загружается динамически во время выполнения (например, с помощью [LoadLibrary](http://msdn.microsoft.com/library/windows/desktop/ms684175) функции), загрузчик операционной системы загружает зависимые сборки, указанные в ее манифесте. Внешние манифесты библиотеки DLL не проверяется во время `LoadLibrary` вызова. Если манифест не внедрен, загрузчик может попытаться загрузить неправильные версии сборок или вызвать сбой в поиске зависимых сборок.  
  
 Одну или несколько связанных библиотек DLL можно упаковать в сборку side-by-side с соответствующими [манифест сборки](http://msdn.microsoft.com/library/windows/desktop/aa374219), которое описывает, какие файлы формирования сборки, а также зависимость от сборки в других side-by-side сборки.  
  
> [!NOTE]
>  Если сборка содержит одну библиотеку DLL, рекомендуется внедрить манифест в эту Библиотеку в качестве ресурса с Идентификатором, равным 1, а также присвоить закрытой сборке имя, совпадающее с именем библиотеки DLL. Например, если имя библиотеки DLL, mylibrary.dll, значение атрибута имени используется при \<assemblyIdentity > манифеста может также быть mylibrary. В некоторых случаях, если расширением, отличным от DLL-файл библиотеки (например, в проект элементы управления ActiveX в MFC создает библиотек OCX) можно создать внешний манифест. В этом случае имя сборки и его манифест должен отличаться от имени библиотеки DLL (например, MyAssembly, MyAssembly.manifest и mylibrary.ocx). Однако по-прежнему рекомендуется присваивать таким библиотекам расширение DLL и внедрить манифест в качестве ресурса для уменьшения стоимости обслуживания будущих этой сборки. Дополнительные сведения о том, как операционная система выполняет поиск закрытых сборок см. в разделе [поиска сборок](http://msdn.microsoft.com/library/windows/desktop/aa374224).  
  
 Такое изменение позволит развертывать соответствующие библиотеки DLL, как [закрытая сборка](http://msdn.microsoft.com/library/windows/desktop/aa370850) в локальной папке приложения или в качестве [общую сборку](http://msdn.microsoft.com/library/windows/desktop/aa371839) в кэше сборок WinSxS. О действиях, которые необходимо выполнить, чтобы добиться правильной средой выполнения поведение новой сборки; они описаны в [рекомендации по созданию Side-by-side сборок](http://msdn.microsoft.com/library/windows/desktop/aa375155). После сборки правильности его можно развернуть как либо совместно используемой или закрытой сборки вместе с приложением, зависит от него. При установке side-by-side сборок в качестве общей сборки, вы можете либо выполните рекомендации появлялся [Установка сборок Win32 для общего использования Side-by-Side в Windows XP](http://msdn.microsoft.com/library/windows/desktop/aa369532) или использовать [модулислияния](http://msdn.microsoft.com/library/windows/desktop/aa369820). При установке сборки side-by-side как закрытая сборка, вы можете просто скопировать соответствующие библиотеки DLL, ресурсы и манифест в процессе установки в локальную папку приложения на целевом компьютере, гарантирует, что эта сборка может иметь найти загрузчик во время выполнения (в разделе [поиска сборок](http://msdn.microsoft.com/library/windows/desktop/aa374224)). Другим способом является использование [установщика Windows](http://msdn.microsoft.com/library/windows/desktop/cc185688) и следуйте инструкциям, описанным в [Установка сборок Win32 для закрытого использования в приложении в Windows XP](http://msdn.microsoft.com/library/windows/desktop/aa369534).  
  
## <a name="see-also"></a>См. также  
 [Примеры развертывания](../ide/deployment-examples.md)   
 [Построение C/C++ изолированных приложений](../build/building-c-cpp-isolated-applications.md)   
 [Создание изолированных приложений и параллельных сборок C/C++](../build/building-c-cpp-isolated-applications-and-side-by-side-assemblies.md)