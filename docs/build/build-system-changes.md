---
title: "Изменения системы построения | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vc.msbuild.changes"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "изменения системы построения, $(Inherit)"
  - "изменения системы построения, $(NoInherit)"
  - "изменения системы построения, .vsprops"
  - "изменения системы построения, настраиваемые правила построения"
  - "изменения системы построения, MSBuild"
  - "изменения системы построения, файл проекта (.vcxprog)"
  - "MSBuild, изменения системы построения"
ms.assetid: e564d95f-a6cc-4d97-b57e-1a71daf66f4a
caps.latest.revision: 13
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 13
---
# Изменения системы построения
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Система MSBuild используется для построения проектов Visual C\+\+.  Однако в Visual Studio 2008 и более ранних выпусков, использовалась системы VCBuild.  Некоторые типы файлов и понятия, зависели от VCBuild или не существуют или представлены иначе в текущей системе.  В данном документе рассматриваются отличия текущей системы построения от предыдущей версии.  
  
## Замена расширения VCPROJ на VCXPROJ  
 Для файлов проектов больше не используется расширение VCPROJ.  Visual Studio автоматически преобразует файлы проектов, созданные в более раннем выпуске Visual C\+\+, в формат, используемый текущей системой.  Дополнительные сведения о ручном обновлении проекта см. в разделе [\/Upgrade](../Topic/-Upgrade%20\(devenv.exe\).md).  
  
 В текущем выпуске файл проекта имеет расширение VCXPROJ.  
  
## Замена расширения VSPROPS на PROPS  
 В более ранних выпусках *страница свойств проекта* представляет собой XML\-файл с расширением VSPROPS.  Страница свойств проекта позволяет задавать ключи командной строки для средств построения, например компилятора или компоновщика, а также создавать пользовательские макросы.  
  
 В текущем выпуске страница свойств проекта имеет расширение PROPS.  
  
## Настраиваемые правила построения и RULES\-файлы  
 В более ранних выпусках *файл правил* представляет собой XML\-файл с расширением RULES.  Файл правил позволяет определять пользовательские правила построения и внедрять их в процесс построения проекта Visual C\+\+.  Пользовательские правила построения, которые можно связать с одним или несколькими расширениями файлов, позволяют передавать входные файлы средству, создающему один или несколько выходных файлов.  
  
 В данном выпуске настраиваемые правила построения представлены тремя типами файлов: XML, PROPS и TARGETS, а не RULES\-файлом.  При миграции RULES\-файл, созданного предыдущим выпуском Visual C\+\+, в формат текущего выпуска, создаются эквивалентные ему XML\-, PROPS\- и TARGETS\-файлы и сохраняются в папке проекта вместе с исходным RULES\-файлом.  
  
> [!IMPORTANT]
>  В текущем выпуске [!INCLUDE[TLA2#tla_ide](../build/includes/tla2sharptla_ide_md.md)] не поддерживает создание новых правил.  По этой причине рекомендуется использовать файл правил из проекта, созданного с помощью более раннего выпуска Visual C\+\+ перенос проекта в текущий выпуск.  
  
## Макросы наследования  
 В более ранних выпусках макрос **$\(Inherit\)** задает порядок, в котором наследуемые свойства отображаются в командной строке, сгенерированной системой построения проекта.  Макрос **$\(NoInherit\)** позволяет игнорировать любые вхождения $\(Inherit\), в результате чего все свойства, которые в ином случае должны наследоваться, не наследуются.  Например, по умолчанию макрос $\(Inherit\) вызывает добавление файлов, заданных с помощью параметра компилятора [\/I \(дополнительные каталоги включения\)](../build/reference/i-additional-include-directories.md), в командную строку.  
  
 В текущем выпуске наследование осуществляется с помощью задания значения свойства в виде объединения одного или нескольких значений литералов и макросов свойств.  Макросы **$\(Inherit\)** и **$\(NoInherit\)** не поддерживаются.  
  
 В следующем примере свойству на странице свойств назначается список, разделенный точкой с запятой.  Список состоит из объединения литерала *\<value\>* и значение свойства `MyProperty`, к которому осуществляется с помощью нотации макроса, **$\(***MyProperty***\)**.  
  
```  
Property=<value>;$(MyProperty)  
```  
  
## Файлы VCXPROJ.USER  
 В пользовательском файле \(с расширением VCXPROJ.USER\) хранятся связанные с пользователем свойства, например, параметры отладки и развертывания.  Файл VCXPROJ.USER применяется ко всем проектам для отдельного пользователя.  
  
## Файл VCXPROJ.FILTERS  
 Когда **обозреватель решений** используется для добавления файла в проект, файл фильтров \(с расширением VCXPROJ.FILTERS\) определяет, куда в представлении **обозревателя решений** в виде дерева добавляется файл в зависимости от его расширения.  
  
## Параметры каталогов VC\+\+  
 Параметры каталогов Visual C\+\+ рассматриваются в разделе [Страница свойств каталогов VC\+\+](../ide/vcpp-directories-property-page.md).  В предыдущих выпусках Visual Studio параметры каталогов применяются отдельно для каждого пользователя, и список исключаемых каталогов указывается в файле sysincl.dat.  
  
 Параметры каталогов VC\+\+ нельзя изменять, если выполнена команда [devenv \/resetsettings](../Topic/-ResetSettings%20\(devenv.exe\).md) в командной строке.  Параметры также нельзя изменять, если в меню **Сервис** выбран пункт **Импорт и экспорт параметров**, а затем **Сбросить все параметры**.  
  
 Перенесите параметры каталогов VC\+\+ из VSSETTINGS\-файла, созданного предыдущим выпуском Visual C\+\+.  В меню **Сервис** выберите **Импорт и экспорт параметров**, затем **Импортировать выбранные параметры среды** и следуйте инструкциям мастера.  Или при первом запуске Visual Studio в диалоговом окне **Выбор параметров среды, используемых по умолчанию** укажите **Перенести подходящие настройки из предыдущей версии и применить их вместе с настройками по умолчанию, указанными ниже**.  
  
## См. также  
 [MSBuild \(Visual C\+\+\)](../Topic/MSBuild%20\(Visual%20C++\).md)