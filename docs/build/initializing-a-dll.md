---
title: "Инициализация библиотеки DLL | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "DLL-библиотеки [C++], инициализация"
  - "инициализация библиотек DLL"
  - "код завершения [C++]"
ms.assetid: f655c5ff-ab5b-493a-a1da-4d1074e60c5b
caps.latest.revision: 8
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 8
---
# Инициализация библиотеки DLL
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Обычно библиотека DLL имеет код инициализации \(например, выделение памяти\), который должен выполняться при загрузке библиотеки DLL.  При использовании Visual C\+\+ место добавления кода для инициализации библиотеки DLL зависит от типа библиотеки DLL, построение которой выполняется.  При отсутствии необходимости добавления кода инициализации или завершения при построении библиотеки DLL не требуется никаких дополнительных действий.  Чтобы определить место добавления кода при инициализации библиотеки DLL, см. нижеследующую таблицу.  
  
|Тип библиотеки DLL|Место добавления кода инициализации и завершения|  
|------------------------|------------------------------------------------------|  
|Обычная библиотека DLL|В код `InitInstance` и `ExitInstance` объекта `CWinApp` библиотеки DLL.|  
|Библиотека DLL расширения|В функцию `DllMain`, созданную с помощью мастера MFC DLL.|  
|Библиотека DLL \(не MFC\)|В предоставляемую пользователем функцию с именем `DllMain`.|  
  
 В Win32 все библиотеки DLL могут содержать дополнительную функцию точки входа \(называемую обычно `DllMain`\), которая вызывается для инициализации и завершения.  Это позволяет при необходимости выделить или освободить дополнительные ресурсы.  Функция точки входа вызывается Windows в четырех случаях: присоединение процесса, отсоединение процесса, присоединение потока и отсоединение потока.  
  
 Библиотека времени выполнения языка C предоставляет функцию точки входа с именем **\_DllMainCRTStartup** и вызывает функцию `DllMain`.  В зависимости от типа библиотеки DLL пользователю необходимо иметь функцию с именем `DllMain` в исходном коде или использовать функцию `DllMain`, предоставленную в библиотеке MFC.  
  
## Выберите действие.  
  
-   [Инициализация обычных библиотек DLL](../Topic/Initializing%20Regular%20DLLs.md)  
  
-   [Инициализация библиотек \(DLL\) расширений](../build/initializing-extension-dlls.md)  
  
-   [Инициализация библиотек DLL, не относящихся к MFC](../Topic/Initializing%20Non-MFC%20DLLs.md)  
  
## Дополнительные сведения  
  
-   [Поведение библиотеки времени выполнения языка C и функция \_DllMainCRTStartup](../build/run-time-library-behavior.md)  
  
-   [\<caps:sentence id\="tgt24" sentenceid\="58bb7328659bda9ffb73a1dcd39da06b" class\="tgtSentence"\>Спецификация функции DllMain \(Windows SDK\)\<\/caps:sentence\>](http://msdn.microsoft.com/library/windows/desktop/ms682583)  
  
-   [\<caps:sentence id\="tgt25" sentenceid\="f29344705c59343b34b642944921cbdf" class\="tgtSentence"\>Функция точки входа библиотеки динамической компоновки \(Windows SDK\)\<\/caps:sentence\>](http://msdn.microsoft.com/library/windows/desktop/ms682596)  
  
## См. также  
 [DLL в Visual C\+\+](../build/dlls-in-visual-cpp.md)