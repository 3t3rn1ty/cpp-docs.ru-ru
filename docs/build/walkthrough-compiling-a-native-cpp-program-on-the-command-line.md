---
title: "Пошаговое руководство: Компиляция программы на машинном коде C++ в командной строке | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: cpp-tools
ms.tgt_pltfrm: 
ms.topic: get-started-article
dev_langs: C++
helpviewer_keywords:
- native code [C++]
- Visual C++, native code
- compiling programs [C++]
- command-line applications [C++], native
ms.assetid: b200cfd1-0440-498f-90ee-7ecf92492dc0
caps.latest.revision: "63"
author: corob-msft
ms.author: corob
manager: ghogen
ms.openlocfilehash: 723410eb8b634e3e01c26b505e619eed7fc371d6
ms.sourcegitcommit: ebec1d449f2bd98aa851667c2bfeb7e27ce657b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2017
---
# <a name="walkthrough-compiling-a-native-c-program-on-the-command-line"></a>Пошаговое руководство. Компиляция машинной программы на языке C++ из командной строки
В состав Visual C++ включен компилятор языка C++ для командной строки, позволяющий создавать все, от простых консольных приложений, до универсальных приложений Windows, приложений Магазина Windows и компонентов .NET.  
  
 В этом пошаговом руководстве создается basic, «Hello, World»-стиля программы C++ с помощью текстового редактора, а затем скомпилировать его в командной строке. Если вы хотите попробовать IDE Visual Studio, а не с помощью командной строки см. в разделе [Пошаговое руководство: работа с проектами и решениями (C++)](../ide/walkthrough-working-with-projects-and-solutions-cpp.md) или [с помощью интегрированной среды разработки Visual Studio для разработки классических приложений C++](../ide/using-the-visual-studio-ide-for-cpp-desktop-development.md).  
  
 В этом пошаговом руководстве вместо примера программы, приведенного далее, можно использовать собственную программу на Visual C++. Кроме того, можно использовать образец кода на языке Visual C++ из другого раздела справки.  
  
## <a name="prerequisites"></a>Предварительные требования  
 Для выполнения данного пошагового руководства, необходимо установить Visual Studio и дополнительных компонентов Visual C++ или средств Microsoft Visual C++ сборка.  
  
 Visual Studio — мощная интегрированная среда разработки, поддерживающий полнофункциональный редактор, диспетчеры ресурсов, отладчиками и компиляторы для многих языках и платформах. Сведения об этих возможностях и загрузка и установка Visual Studio, включая бесплатный выпуск Visual Studio Community, в разделе [VisualStudio.com](https://www.visualstudio.com/).  
  
 Построение набора средств Visual Studio устанавливает компиляторы командной строки, средства и библиотеки, необходимые для построения программ C и C++. Идеально подходит для построения labs или аудитории проверяет и устанавливает относительно быстро. Чтобы установить только средства командной строки, загрузите [средства построения Visual Studio](https://go.microsoft.com/fwlink/?linkid=840931) и запустите программу установки. Дополнительные сведения см. в разделе [средства построения Visual C++](http://landinghub.visualstudio.com/visual-cpp-build-tools).  
  
 Перед построением программы C или C++ в командной строке, убедитесь, что установлены средства и что они будут доступны из командной строки. Visual C++ имеет сложные требования к среде командной строки для средства, заголовки и библиотеки, используемые в нем. **Нельзя использовать Visual C++ в окно командной строки, обычный**. К счастью Visual C++ устанавливает клавиш запускать командную строку разработчика с среды для сборок командной строки. К сожалению имена ярлыки командной строки разработчика и где находятся отличаются в практически в каждой версии Visual C++ и в разных версиях Windows. Первая задача Пошаговое руководство находит нужную для использования.  
  
> [!NOTE]
>  Ярлык командной строки разработчика автоматически задает правильный пути для компилятора и инструментов, а также за любые необходимые заголовки и библиотеки. Необходимо задать значения этих среды самостоятельно при использовании обычных окно командной строки. Дополнительные сведения см. в разделе [набор переменных пути и среды для сборок командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md). Мы рекомендуем использовать ярлык командной строки разработчика вместо создания собственного.  
  
### <a name="open-a-developer-command-prompt"></a>Откройте командную строку разработчика  
  
1.  Если вы установили Visual Studio 2017 г. в Windows 10, откройте меню «Пуск» и выберите **все приложения**. Прокрутите список вниз и открыть **2017 г. Visual Studio** папку (не приложение Visual Studio 2017 г.). Выберите **Командная строка разработчика для VS 2017 г** чтобы открыть окно командной строки.  
  
     После установки Microsoft Visual C++ сборка средства 2015 для Windows 10 откройте **запустить** меню и выберите **все приложения**. Прокрутите список вниз и открыть **средства построения Visual C++** папки. Выберите **Visual C++ 2015 x86 собственного средства командной строки** , чтобы открыть окно командной строки.  
  
     Если вы используете другую версию Visual Studio или управлением другой версии Windows, см. в меню «Пуск» или начальной страницы в папку средств Visual Studio, содержащего ярлык командной строки разработчика. Можно также использовать функцию поиска Windows для поиска «Командная строка разработчика» и выберите один, который соответствует установленной версии Visual Studio. Используйте сочетание клавиш для открытия окна командной строки.  
  
2.  Затем проверьте правильность настройки командной строке разработчика Visual C++. В окне командной строки введите `cl` и убедитесь, что выходные данные выглядят примерно следующим образом:  
  
    ```Output  
    C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise>cl  
    Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86  
    Copyright (C) Microsoft Corporation.  All rights reserved.  
    
    usage: cl [ option... ] filename... [ /link linkoption... ]  
    ```  
  
     Возможны различия в текущем каталоге или номера версий, в зависимости от версии Visual C++, а также все обновления установлены. Если это похоже на то, что вы видите, вы будете готовы построение программы C или C++ из командной строки.  
  
    > [!NOTE]
    >  Если возникает ошибка, такие как ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл» ошибка C1034 или LNK1104 при запуске **cl** команды, а затем либо вы не используете командную строку разработчика или дает сбой установки Visual C++. Прежде чем продолжить, необходимо устранить эту проблему.  
  
     Если разработчик не удается найти ярлык командной строки или сообщение об ошибке при вводе `cl`, а затем установки Visual C++ может вызвать проблемы. Попробуйте переустановить компонент Visual C++ в Visual Studio или переустановите средств Microsoft Visual C++ сборка. Не переходите к следующему разделу пока это работает. Дополнительные сведения об установке и устранение неполадок-Visual C++ см. в разделе [установите Visual Studio](/visualstudio/install/install-visual-studio).  
  
    > [!NOTE]
    >  В зависимости от версии Windows на компьютере и конфигурации системы безопасности, возможно, потребуется щелкните правой кнопкой мыши, чтобы открыть контекстное меню для ярлык командной строки разработчика, а затем выберите **Запуск от имени администратора** для успешно построить и запустить программу, создаваемом с помощью этого пошагового руководства.  
  
### <a name="create-a-visual-c-source-file-and-compile-it-on-the-command-line"></a>Создать исходный файл Visual C++ и его компиляция из командной строки  
  
1.  Введите в окне командной строки разработчика **md c:\hello** для создания каталога, а затем введите **cd c:\hello** изменение к этому каталогу. Это каталог, созданной в исходном файле и скомпилированная программа.  
  
2.  Введите **notepad hello.cpp** в окне командной строки.  
  
     Выберите **Да** когда Блокнот предложит создать файл. Откроется пустое окно блокнота, можно ввести код в файле с именем hello.cpp.  
  
3.  В Блокноте введите следующие строки кода:  
  
    ```cpp  
    #include <iostream>  
    using namespace std;  
    void main()  
    {  
        cout << "Hello, world, from Visual C++!" << endl;  
    }  
    ```  
  
     Это очень простая программа, которая выведет одну строку текста на экран, а затем завершит работу. Для сведения числа ошибок к минимуму скопируйте этот код и вставьте его в Блокнот.  
  
4.  Сохраните файл. В Блокноте, в меню **Файл** выберите **Сохранить**.  
  
     Поздравляем, вы создали файл исходного кода Visual C++ hello.cpp, которая готова для компиляции.  
  
5.  Переключитесь в окно командной строки разработчика. Введите **dir** в командной строке, чтобы вывести содержимое каталога c:\hello. Вы увидите hello.cpp файл источника в каталоге, который выглядит примерно следующим образом:  
  
    ```Output  
    c:\hello>dir  
     Volume in drive C has no label.  
     Volume Serial Number is CC62-6545  
  
     Directory of c:\hello  
  
    05/24/2016  05:36 PM    <DIR>          .  
    05/24/2016  05:36 PM    <DIR>          ..  
    05/24/2016  05:37 PM               115 hello.cpp  
                   1 File(s)            115 bytes  
                   2 Dir(s)  571,343,446,016 bytes free  
  
    ```  
  
     Даты и другие сведения будут отличаться на вашем компьютере. Если вы не видите файла исходного кода, убедитесь, что вы открыли созданный каталог c:\hello hello.cpp и в блокноте, убедитесь, что сохраненные файла исходного кода, в этом каталоге. Убедитесь, что исходный код сохранен с расширением имени файла .cpp, не с расширением txt.  
  
6.  В командной строке разработчика введите `cl /EHsc hello.cpp` для компиляции программы.  
  
     Компилятор cl.exe создаст OBJ-файл, содержащий скомпилированный код, а затем запустит компоновщик для создания исполняемой программы с именем hello.exe. Это имя отображается в строках информации, выводимой компилятором. Выходные данные компилятора должны выглядеть следующим образом:  
  
    ```Output  
    c:\hello>cl /EHsc hello.cpp  
    Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86  
    Copyright (C) Microsoft Corporation.  All rights reserved.  
  
    hello.cpp  
    Microsoft (R) Incremental Linker Version 14.10.25017.0  
    Copyright (C) Microsoft Corporation.  All rights reserved.  
  
    /out:hello.exe  
    hello.obj  
    ```  
  
    > [!NOTE]
    >  Если возникает ошибка, такие как ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл» ошибка C1034 или LNK1104, приглашение командной строки разработчика не настроен правильно. Сведения о том, как устранить эту проблему, вернитесь к **откройте командную строку разработчика** раздела.  
  
    > [!NOTE]
    >  При получении компилятора или компоновщика ошибки или предупреждения, проверьте исходный код, чтобы исправить ошибки, а затем сохраните его и снова запустите компилятор. Дополнительные сведения о конкретных ошибках используйте поле поиска на этой странице MSDN следует искать номер ошибки.  
  
7.  Чтобы запустить программу hello.exe, в командной строке введите `hello`.  
  
     Программа выводит следующий текст и закрывается:  
  
    ```Output  
    Hello, world, from Visual C++!  
    ```  
  
     Поздравляем, вы просто компиляции и запуска программы на языке C++ с помощью средства командной строки.  
  
## <a name="next-steps"></a>Дальнейшие действия  
 В этом примере «Hello, World» около простым, как можно получить программы на языке C++. Реальные программы имеют заголовочные файлы и другие исходные файлы, ссылки в библиотеках и выполнять полезные действия.  
  
 Для создания кода C++ вместо ввода в образце кода показано, можно использовать шаги в этом пошаговом руководстве. Также можно создавать много C++ примеры программ, обнаруженные в другом месте. Можно поместить исходный код и создавать приложения в любом каталоге для записи. По умолчанию в Интегрированной среде разработки Visual Studio создает проекты в папке "документы" во вложенной проектов Visual Studio папку с именем вашей версии Visual Studio.  
  
 Для компиляции программы, содержащей несколько файлов исходного кода, введите их в командной строке следующим образом:  
  
 `cl /EHsc file1.cpp file2.cpp file3.cpp`  
  
 Параметр командной строки **/EHsc** указывает компилятору на необходимость обработки исключений C++. Дополнительные сведения см. в статье [/EH (модель обработки исключений)](../build/reference/eh-exception-handling-model.md).  
  
 При указании нескольких исходных файлов следующим образом, компилятор использует первого входного файла для создания имени программы. В этом случае он выводит программу, которая называется file1.exe. Чтобы изменить имя для program1.exe, добавьте [/out](../build/reference/out-output-file-name.md) компоновщика:  
  
 `cl /EHsc file1.cpp file2.cpp file3.cpp /link /out:program1.exe`  
  
 И автоматически перехватить больше ошибок программирования, рекомендуется компилировать с помощью [/W3](../build/reference/compiler-option-warning-level.md) или [/W4](../build/reference/compiler-option-warning-level.md) предупреждение уровня параметр:  
  
 `cl /W4 /EHsc file1.cpp file2.cpp file3.cpp /link /out:program1.exe`  
  
 Компилятор, cl.exe, существует множество вариантов можно применить для построения, оптимизация, отладки и анализа кода. Краткий список, введите **cl /?** в командной строке разработчика. Также можно скомпилировать и связывание отдельно и применить параметры компоновщика, в более сложных сценариев построения. Дополнительные сведения о параметров компоновщика и компилятора и об использовании см. в разделе [ссылка на построение C/C++](../build/reference/c-cpp-building-reference.md).  
  
 NMAKE и makefile-файлы или файлы проекта MSBuild можно использовать для настройки и создания более сложных проектов в командной строке. Дополнительные сведения об использовании этих средств см. в разделе [справочнике NMAKE](../build/nmake-reference.md) и [MSBuild](../build/msbuild-visual-cpp.md).  
  
 В языках C и C++ похожи, но не совпадает. Компилятор Visual C++ использует простое правило, чтобы определить, какой язык, используемый при компиляции кода. По умолчанию компилятор Visual C++ рассматривает все файлы с расширением .c как исходные файлы на языке С, а файлы с расширением .cpp как исходные файлы на языке С++. Чтобы принудительно, то компилятор будет рассматривать все файлы как C++ независимо от того, расширение имени файла, используйте [/TC](../build/reference/tc-tp-tc-tp-specify-source-file-type.md) параметр компилятора.  
  
 Компилятор Visual C++ включает C библиотеку времени выполнения (CRT), обычно совместима со стандартом ISO C99, но не является строго совместимой. В большинстве случаев переносимого кода будет выполняться компиляция и работают ожидаемым образом. Visual C++ не поддерживает некоторые изменения CRT ISO C11. Некоторые функции библиотеки и имена функции POSIX устарели компилятором Visual C++. Функции поддерживаются, но предпочтительные имена были изменены. Дополнительные сведения см. в разделе [средства безопасности в CRT](../c-runtime-library/security-features-in-the-crt.md) и [Предупреждение компилятора (уровень 3) C4996](../error-messages/compiler-warnings/compiler-warning-level-3-c4996.md).  
  
## <a name="see-also"></a>См. также  
 [Справочник по языку C++](../cpp/cpp-language-reference.md)   
 [Сборка программ C/C++](../build/building-c-cpp-programs.md)   
 [Параметры компилятора](../build/reference/compiler-options.md)