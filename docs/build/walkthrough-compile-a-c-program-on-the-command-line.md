---
title: "Пошаговое руководство: Компиляция программы C в командной строке | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: cpp-tools
ms.tgt_pltfrm: 
ms.topic: get-started-article
helpviewer_keywords:
- command-line applications [C++], C programs
- Visual C, compiling
- compiling programs [C++]
- C program compiling [C++]
ms.assetid: 7e74cc2d-54b1-49de-b7ad-d3ae6b39ab8d
caps.latest.revision: "46"
author: corob-msft
ms.author: corob
manager: ghogen
ms.openlocfilehash: dfd16b0c3393b6b0a27e88a971042cf772fbd9b1
ms.sourcegitcommit: ebec1d449f2bd98aa851667c2bfeb7e27ce657b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2017
---
# <a name="walkthrough-compile-a-c-program-on-the-command-line"></a>Пошаговое руководство: Компиляция программы C в командной строке
Visual C++ включен компилятор C, позволяет создавать как простые консольные программы для полного приложения для настольных компьютеров Windows, мобильные приложения и многое другое.  
  
 В этом пошаговом руководстве показано, как создать простую «Hello, World»-стиля программы на языке C с помощью текстового редактора, а затем скомпилировать его в командной строке. Если работать и в C++ в командной строке, см. раздел [Пошаговое руководство: компиляция программы на машинном коде C++ в командной строке](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md). Если вы хотите попробовать IDE Visual Studio, а не с помощью командной строки см. в разделе [Пошаговое руководство: работа с проектами и решениями (C++)](../ide/walkthrough-working-with-projects-and-solutions-cpp.md) или [с помощью интегрированной среды разработки Visual Studio для разработки классических приложений C++](../ide/using-the-visual-studio-ide-for-cpp-desktop-development.md).  
  
## <a name="prerequisites"></a>Предварительные требования  
 Для выполнения данного пошагового руководства, необходимо установить Visual Studio и дополнительных компонентов Visual C++ или средств Microsoft Visual C++ сборка.  
  
 Visual Studio — мощная интегрированная среда разработки, поддерживающий полнофункциональный редактор, диспетчеры ресурсов, отладчиками и компиляторы для многих языках и платформах. Сведения об этих возможностях и загрузка и установка Visual Studio, включая бесплатный выпуск Visual Studio Community, в разделе [VisualStudio.com](https://www.visualstudio.com/).  
  
 Построение набора средств Visual Studio устанавливает компиляторы командной строки, средства и библиотеки, необходимые для построения программ C и C++. Идеально подходит для построения labs или аудитории проверяет и устанавливает относительно быстро. Чтобы установить только средства командной строки, загрузите [средства построения Visual Studio](https://go.microsoft.com/fwlink/?linkid=840931) и запустите программу установки. Дополнительные сведения см. в разделе [средства построения Visual C++](http://landinghub.visualstudio.com/visual-cpp-build-tools).  
  
 Перед построением программы C или C++ в командной строке, убедитесь, что установлены средства и что они будут доступны из командной строки. Visual C++ имеет сложные требования к среде командной строки для средства, заголовки и библиотеки, используемые в нем. **Нельзя использовать Visual C++ в окно командной строки, обычный**. Требуется *Командная строка разработчика* окна, то есть регулярного окно командной строки, имеет все необходимые переменные среды значение. К счастью Visual C++ устанавливает клавиш запускать разработчика командные строки, имеющие среды для сборок командной строки. К сожалению имена ярлыки командной строки разработчика и где находятся отличаются в практически в каждой версии Visual C++ и в разных версиях Windows. Первая задача пошаговом руководстве является поиск вправо ярлык для использования.  
  
> [!NOTE]
>  Ярлык командной строки разработчика автоматически задает правильный пути для компилятора и инструментов, а также за любые необходимые заголовки и библиотеки. Некоторые из этих значений отличаются для каждой конфигурации сборки. Необходимо задать значения этих среды самостоятельно, если вы не используете один из сочетания клавиш. Дополнительные сведения см. в разделе [набор переменных пути и среды для сборок командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md). Так как среда разработки является сложным, настоятельно рекомендуется использовать ярлык командной строки разработчика вместо создания собственного.  
  
## <a name="open-a-developer-command-prompt"></a>Откройте командную строку разработчика  
  
1.  После установки Visual Studio 2017 г. в Windows 10 откройте меню «Пуск», а затем прокрутите экран вниз и откройте **2017 г. Visual Studio** папку (не приложение Visual Studio 2017 г.). Выберите **Командная строка разработчика для VS 2017 г** чтобы открыть окно командной строки.  
  
     После установки Microsoft Visual C++ сборка средства 2015 для Windows 10 откройте **запустить** меню и затем прокрутите вниз и откройте **средства построения Visual C++** папки. Выберите **Visual C++ 2015 x86 собственного средства командной строки** , чтобы открыть окно командной строки.  
  
     Если вы используете другую версию Visual Studio или управлением другой версии Windows, см. в меню «Пуск» или начальной страницы в папку средств Visual Studio, содержащего ярлык командной строки разработчика. Можно также использовать функцию поиска Windows для поиска «Командная строка разработчика» и выберите один, который соответствует установленной версии Visual Studio. Используйте сочетание клавиш для открытия окна командной строки.  
  
2.  Затем проверьте правильность настройки командной строке разработчика Visual C++. В окне командной строки введите `cl` и убедитесь, что выходные данные выглядят примерно следующим образом:  
  
    ```Output  
    C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise>cl  
    Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86  
    Copyright (C) Microsoft Corporation.  All rights reserved.  
    
    usage: cl [ option... ] filename... [ /link linkoption... ]  
    
    C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise>  
    ```  
  
     Возможны различия в текущем каталоге или номера версий, в зависимости от версии Visual C++, а также все обновления установлены. Если это похоже на то, что вы видите, вы будете готовы построение программы C или C++ из командной строки.  
  
    > [!NOTE]
    >  Если возникает ошибка, такие как ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл» ошибка C1034 или LNK1104 при запуске **cl** команды, а затем либо вы не используете командную строку разработчика или дает сбой установки Visual C++. Прежде чем продолжить, необходимо устранить эту проблему.  
  
     Если разработчик не удается найти ярлык командной строки или сообщение об ошибке при вводе `cl`, а затем установки Visual C++ может вызвать проблемы. Попробуйте переустановить компонент Visual C++ в Visual Studio или переустановите построения набора средств Visual Studio. Не переходите к следующему разделу пока это работает. Дополнительные сведения об установке и устранение неполадок-Visual C++ см. в разделе [установите Visual Studio](/visualstudio/install/install-visual-studio).  
  
    > [!NOTE]
    >  В зависимости от версии Windows на компьютере и конфигурации системы безопасности, возможно, потребуется щелкните правой кнопкой мыши, чтобы открыть контекстное меню для ярлык командной строки разработчика, а затем выберите **Запуск от имени администратора** для успешно построить и запустить программу, создаваемом с помощью этого пошагового руководства.  
  
## <a name="create-a-c-source-file-and-compile-it-on-the-command-line"></a>Создать исходный файл C и скомпилировать его в командной строке  
  
1.  Введите в окне командной строки разработчика **компакт-диска c:\\**  для изменения текущего рабочего каталога в корень диска C:. Затем введите **md c:\simple** для создания каталога, а затем введите **c:\simple компакт-диска** изменение к этому каталогу. Это каталог, который будет содержать файла исходного кода и скомпилированная программа.  
  
2.  Введите **simple.c Блокнот** в командной строке разработчика. В окне предупреждения «Блокнот», будет отображена, выберите **Да** для создания нового файла simple.c в рабочий каталог.  
  
3.  В Блокноте введите следующие строки кода:  
  
    ```C  
    #include <stdio.h>  
  
    int main()  
    {  
        printf("Hello, World! This is a native C program compiled on the command line.\n");  
        return 0;  
    }   
    ```  
  
4.  В строке меню Блокнота выберите **файл**, **Сохранить** сохранить simple.c в рабочий каталог.  
  
5.  Переключитесь в окно командной строки разработчика. Введите **dir** в командной строке, чтобы вывести содержимое папки c:\simple. Вы увидите simple.c исходного файла в каталоге, который выглядит примерно следующим образом:  
  
    ```Output  
    C:\simple>dir  
     Volume in drive C has no label.  
     Volume Serial Number is CC62-6545  
  
     Directory of C:\simple  
  
    10/02/2017  03:46 PM    <DIR>          .  
    10/02/2017  03:46 PM    <DIR>          ..  
    10/02/2017  03:36 PM               143 simple.c  
                   1 File(s)            143 bytes  
                   2 Dir(s)  514,900,566,016 bytes free  
  
    ```  
  
     Даты и другие сведения будут отличаться на вашем компьютере. Если вы не видите файла исходного кода, simple.c, убедитесь, что вы открыли созданный каталог c:\simple и в блокноте, убедитесь, что сохраненные файла исходного кода, в этом каталоге. Убедитесь также, в которой исходный код сохранен с расширением имени файла .c, не с расширением txt.  
  
6.  Для компиляции программы, введите **cl simple.c** в командной строке разработчика.  
  
     Вы увидите имя исполняемого файла, simple.exe в строках информации, выводимой компилятором:  
  
    ```Output  
    c:\simple>cl simple.c  
    Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86  
    Copyright (C) Microsoft Corporation.  All rights reserved.  
  
    simple.c  
    Microsoft (R) Incremental Linker Version 14.10.25017.0  
    Copyright (C) Microsoft Corporation.  All rights reserved.  
  
    /out:simple.exe  
    simple.obj  
    ```  
  
    > [!NOTE]
    >  Если возникает ошибка, такие как ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл» ошибка C1034 или LNK1104, приглашение командной строки разработчика не настроен правильно. Сведения о том, как устранить эту проблему, вернитесь к **откройте командную строку разработчика** раздела.  
  
    > [!NOTE]
    >  При получении компилятора или компоновщика ошибки или предупреждения, проверьте исходный код, чтобы исправить ошибки, а затем сохраните его и снова запустите компилятор. Дополнительные сведения о конкретных ошибках используйте поле поиска на этой странице MSDN следует искать номер ошибки.  
  
7.  Для запуска программы введите **простой** в командной строке.  
  
     Программа выводит следующий текст и затем закрывается:  
  
    ```Output  
    Hello, World! This is a native C program compiled on the command line.  
    ```  
  
     Поздравляем, вы просто компиляции и запуска программы на языке C с помощью командной строки.  
  
## <a name="next-steps"></a>Следующие шаги  
 В этом примере «Hello, World» около простым, как можно получить в программе на языке C. Реальные программы имеют заголовочные файлы и другие исходные файлы, ссылки в библиотеках и выполнять полезные действия.  
  
 Для создания кода C вместо ввода в образце кода показано, можно использовать шаги в этом пошаговом руководстве. Также можно создавать много C примеры программ, обнаруженные в другом месте. Для компиляции программы, содержащей несколько файлов исходного кода, введите их в командной строке следующим образом:  
  
 `cl file1.c file2.c file3.c`  
  
 Компилятор выводит программу, которая называется file1.exe. Чтобы изменить имя для program1.exe, добавьте [/out](../build/reference/out-output-file-name.md) компоновщика:  
  
 `cl file1.c file2.c file3.c /link /out:program1.exe`  
  
 И автоматически перехватить больше ошибок программирования, рекомендуется компилировать с помощью [/W3](../build/reference/compiler-option-warning-level.md) или [/W4](../build/reference/compiler-option-warning-level.md) предупреждение уровня параметр:  
  
 `cl /W4 file1.c file2.c file3.c /link /out:program1.exe`  
  
 Компилятор, cl.exe, существует множество вариантов можно применить для построения, оптимизация, отладки и анализа кода. Краткий список, введите **cl /?** в командной строке разработчика. Также можно скомпилировать и связывание отдельно и применить параметры компоновщика, в более сложных сценариев построения. Дополнительные сведения о параметров компоновщика и компилятора и об использовании см. в разделе [ссылка на построение C/C++](../build/reference/c-cpp-building-reference.md).  
  
 NMAKE и makefile-файлы или файлы проекта MSBuild можно использовать для настройки и создания более сложных проектов в командной строке. Дополнительные сведения об использовании этих средств см. в разделе [справочнике NMAKE](../build/nmake-reference.md) и [MSBuild](../build/msbuild-visual-cpp.md).  
  
 В языках C и C++ похожи, но не совпадает. Компилятор Visual C++ использует простое правило, чтобы определить, какой язык, используемый при компиляции кода. По умолчанию компилятор Visual C++ рассматривает все файлы с расширением .c как исходные файлы на языке С, а файлы с расширением .cpp как исходные файлы на языке С++. Чтобы принудительно, то компилятор будет рассматривать все файлы как C, независимо от того, расширение имени файла, используйте [/Tc](../build/reference/tc-tp-tc-tp-specify-source-file-type.md) параметр компилятора.  
  
 Компилятор Visual C++ C обычно совместима со стандартом ISO C99, но не является строго совместимой. В большинстве случаев переносимого кода C компиляции и работают ожидаемым образом. Visual C++ не поддерживает большинство изменений в ISO C11. Некоторые функции библиотеки и имена функции POSIX устарели компилятором Visual C++. Функции поддерживаются, но предпочтительные имена были изменены. Дополнительные сведения см. в разделе [средства безопасности в CRT](../c-runtime-library/security-features-in-the-crt.md) и [Предупреждение компилятора (уровень 3) C4996](../error-messages/compiler-warnings/compiler-warning-level-3-c4996.md).  
  
## <a name="see-also"></a>См. также  
 [Пошаговое руководство: Создание стандартной программы C++ (C++)](../windows/walkthrough-creating-a-standard-cpp-program-cpp.md)   
 [Справочник по языку C](../c-language/c-language-reference.md)   
 [Сборка программ C/C++](../build/building-c-cpp-programs.md)   
 [Совместимость](../c-runtime-library/compatibility.md)