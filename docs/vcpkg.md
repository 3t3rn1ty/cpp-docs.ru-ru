---
title: "vcpkg: диспетчер пакетов C++ для Windows | Microsoft Docs"
description: "vcpkg — это диспетчер пакетов на базе командной строки, который существенно упрощает получение и установку библиотек C++ с открытым исходным кодом в Windows."
keywords: vcpkg
author: mikeblome
ms.author: mblome
ms.date: 05/30/2017
ms.technology: cpp-ide
ms.tgt_pltfrm: windows
ms.assetid: f50d459a-e18f-4b4e-814b-913e444cedd6
ms.topic: article
dev_langs: C++
manager: ghogen
ms.openlocfilehash: de5825e64abac210561cb8cbe0dc3320a740cbee
ms.sourcegitcommit: ebec1d449f2bd98aa851667c2bfeb7e27ce657b2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2017
---
# <a name="vcpkg-c-package-manager-for-windows"></a>vcpkg: диспетчер пакетов C++ для Windows 
vcpkg — это диспетчер пакетов на базе командной строки, который существенно упрощает получение и установку сторонних библиотек в Windows. Если в вашем проекте используются сторонние библиотеки, рекомендуем использовать vcpkg для их установки. Диспетчер vcpkg поддерживает как библиотеки с открытым исходным кодом, так и закрытые библиотеки. Все библиотеки в общедоступном каталоге vcpkg были протестированы на совместимость с Visual Studio 2015 и Visual Studio 2017. По состоянию на май 2017 г. в каталоге имеется более 238 библиотек, и сообщество C++ постоянно добавляет новые.

## <a name="simple-yet-flexible"></a>Простота и гибкость
Вы можете загрузить источники и собрать библиотеку всего одной командой. vcpkg является проектом с открытым исходным кодом, доступным на сайте GitHub. Вы можете создавать на его основе любые закрытые клоны, например, выбирая для них другие библиотеки или версии библиотек, отличные от тех, которые находятся в общедоступном каталоге. На одном компьютере можно использовать несколько клонов vcpkg, каждый из которых будет работать с разными наборами библиотек, параметрами компиляции и т. д. Каждый клон является полностью автономной средой, которую можно целиком копировать командой xcopy и в которой имеется свой собственный файл vcpkg.exe, работающий только с собственной иерархией. Диспетчер пакетов vcpkg не добавляется ни к каким переменным среды и не имеет зависимостей от Visual Studio или реестра Windows.

## <a name="sources-not-binaries"></a>Исходные, но не двоичные файлы
Для библиотек в общедоступном каталоге vcpkg загружает исходные, а не двоичные файлы[1]. Он компилирует эти исходные файлы с помощью Visual Studio 2017 или Visual Studio 2015 (если версия 2017 не установлена). В C++ очень важно, чтобы все используемые библиотеки компилировались с помощью того же компилятора той же версии, которым компилируется ссылающийся на них код. Использование vcpkg позволяет устранить или как минимум сильно уменьшить риск появления несовместимых двоичных файлов, способных привести к проблемам. В командах разработчиков, специализирующихся на определенной версии компилятора Visual C++, один член команды может с помощью vcpkg загрузить исходные файлы, скомпилировать набор двоичных файлов, а затем воспользоваться командой экспорта, заархивировать двоичные файлы и файлы заголовков и отправить их другим членам команды. Дополнительные сведения см. ниже в разделе «Экспорт скомпилированных двоичных файлов и файлов заголовков». 

При создании клона vcpkg с закрытыми библиотеками в коллекции портов вы можете добавить порт, который загружает готовые двоичные файлы и файлы заголовков, и написать файл portfile.cmake, который просто копирует эти файлы в нужное расположение.

[1] *Примечание. Для некоторых частных библиотек исходные файлы недоступны. В этих случаях vcpkg загрузит готовые совместимые двоичные файлы.*

## <a name="installation"></a>Установка
Клонируйте репозиторий vcpkg из GitHub: https://github.com/Microsoft/vcpkg. Его можно загрузить в любую папку.

Запустите начальный загрузчик bootstrap-vcpkg.bat в корневой папке.

## <a name="basic-tasks"></a>Основные задачи
  
### <a name="search-the-list-of-available-libraries"></a>Поиск в списке доступных библиотек
Чтобы узнать, какие доступны пакеты, в командной строке введите: `vcpkg search`.

Эта команда перечисляет файлы управления во вложенных папках vcpkg/ports. Вы увидите примерно такой список.

```cmd
ace       6.4.3   The ADAPTIVE Communication Environment
anax      2.1.0-1 An open source C++ entity system. <https://github...
antlr4    4.6-1   ANother Tool for Language Recognition
apr       1.5.2   The Apache Portable Runtime (APR) is a C library ...
asio      1.10.8  Asio is a cross-platform C++ library for network ...
assimp    3.3.1   The Open Asset import library
atk       2.24.0  GNOME Accessibility Toolkit
...
```

  Вы можете выполнить фильтрацию на основе шаблона, например `vcpkg search ta`:

```cmd
botan       2.0.1      A cryptography library written in C++11
portaudio   19.0.6.00  PortAudio Portable Cross-platform Audio I/O API P...
taglib      1.11.1-2   TagLib Audio Meta-Data Library

```

### <a name="install-a-library-on-your-local-machine"></a>Установка библиотеки на локальном компьютере
Получив название библиотеки с помощью `vcpkg search`, воспользуйтесь `vcpkg install`, чтобы загрузить библиотеку и скомпилировать ее. vcpkg использует файл портов (portfile) библиотеки в каталоге ports. Если нужная триада значений не указана, vcpkg выполнит установку и компиляцию для Windows семейства x86. Если portfile указывает зависимости, vcpkg загрузит и установит и их тоже. После загрузки vcpkg выполнит сборку библиотеки с помощью любой используемой библиотекой системы сборки. Предпочтительными являются файлы проектов CMake и MSBuild, но поддерживается также MAKE и любые другие системы сборки. Если vcpkg не удается найти указанную систему сборки на локальном компьютере, диспетчер загрузит и установит ее.

```cmd
> vcpkg install boost:x86-windows

The following packages will be built and installed:
    boost:x86-windows
  * bzip2:x86-windows
  * zlib:x86-windows
Additional packages (*) will be installed to complete this operation.
```

### <a name="list-the-libraries-already-installed"></a>Вывод списка уже установленных библиотек
После установки некоторых библиотек вы можете воспользоваться `vcpkg list`, чтобы увидеть, что у вас есть.

```cmd
> vcpkg list

boost:x86-windows       1.64-3   Peer-reviewed portable C++ source libraries
bzip2:x86-windows       1.0.6-1  High-quality data compressor.
cpprestsdk:x86-windows  2.9.0-2  C++11 JSON, REST, and OAuth library The C++ REST ...
openssl:x86-windows     1.0.2k-2 OpenSSL is an open source project that provides a...
websocketpp:x86-windows 0.7.0    Library that implements RFC6455 The WebSocket Pro...
zlib:x86-windows        1.2.11   A compression library
```

### <a name="integrate-with-visual-studio"></a>Интеграция с Visual Studio
#### <a name="per-user"></a>Для каждого пользователя
Выполните `vcpkg integrate install`, чтобы настроить Visual Studio на поиск всех файлов заголовков и двоичных файлов vcpkg для каждого пользователя без необходимости редактирования путей к каталогам VC++ вручную. При наличии нескольких клонов клон, из которого выполняется эта команда, становится новым расположением по умолчанию.

Теперь вы можете добавлять файлы заголовков в #include, используя автозавершение, — достаточно ввести только название файла заголовка или папки, где он лежит. Для связывания с библиотеками или добавления ссылок на проект выполнять какие-либо другие действия не требуется. На рисунке ниже показано, как Visual Studio находит файлы заголовков azure-storage-cpp. Заголовки помещаются vcpkg во вложенную папку \installed и разделяются по целевым платформам. На следующей схеме показан список файлов #include для библиотеки во вложенной папке `/was`:

 ![Интеграция vcpkg и Intellisense](media/vcpkg-intellisense.png "vcpkg и Intellisense")  

#### <a name="per-project"></a>Для каждого проекта
Если вам нужно использовать определенную версию библиотеки, которая отличается от версии в вашем активном экземпляре vcpkg, вы можете создать новый клон vcpkg, изменить portfile для библиотеки для получения нужной версии, а затем выполнить `vcpkg install <library>`. После этого используйте `vcpkg integrate project` для создания пакета NuGet, который будет ссылаться на эту библиотеку для каждого конкретного проекта.

### <a name="export-compiled-binaries-and-headers"></a>Экспорт скомпилированных двоичных файлов и файлов заголовков
Требовать от каждого члена команды загружать и компилировать библиотеки может быть неэффективно. Эту задачу может выполнить один человек, который затем может использовать `vcpkg export`, чтобы собрать двоичные файлы и файлы заголовков в один ZIP-архив и легко отправить их другим членам команды. 

### <a name="update-installed-libraries"></a>Обновление установленных библиотек
Общедоступный каталог регулярно пополняется новейшими версиями библиотек. Используйте `vcpkg update`, чтобы определить, какие из ваших локальных библиотек устарели. Когда вы будете готовы обновить свою коллекцию портов до последней версии из общедоступного каталога, просто выполните операцию извлечения git pull в репозитории GitHub или создайте новый клон и сохраните старый, если он по-прежнему необходим.

### <a name="contribute-new-libraries"></a>Публикация новых библиотек
Вы можете включать в свою коллекцию частных портов какие угодно библиотеки. Чтобы предложить новую библиотеку для общедоступного каталога, 


### <a name="remove-a-library"></a>Удаление библиотеки
Введите `vcpkg remove`, чтобы удалить установленную библиотеку. Если от нее зависят какие-то другие библиотеки, вам будет предложено повторно выполнить команду с `--recurse`, что приведет к удалению всех подчиненных библиотек.

### <a name="customize-vcpkg"></a>Настройка vcpkg
Вы можете изменять свой клон vcpkg как угодно. Вы можете создать множество клонов vcpkg и указать в portfile каждого из них определенные версии библиотек или параметры командной строки. Например, одна группа разработчиков в компании может заниматься программным обеспечением с одним набором зависимостей, а другая — с другим. Вы можете создать два клона vcpkg и сделать так, чтобы каждый из них загружал разные версии библиотек, параметров компиляции и пр. в соответствии с вашими потребностями. 

## <a name="the-vcpkg-folder-hierarchy"></a>Иерархия папок vcpkg
Абсолютно все функции и данные vcpkg содержатся в одной иерархии каталогов, и такой набор называется экземпляром. Никаких параметров реестра и переменных среды не используется. На вашем компьютере может быть сколько угодно экземпляров vcpkg, и они не будут конфликтовать друг с другом. 

Содержимое экземпляра vcpkg 
- buildtrees — содержит вложенные папки с исходными файлами, из которых строится каждая библиотека.
- docs — документация и примеры.
- downloads — кэшированные копии всех загруженных инструментов и исходных файлов. При выполнении команды установки vcpkg сначала выполняет поиск здесь.
- installed — содержит файлы заголовков и двоичные файлы для каждой установленной библиотеки. При интеграции с Visual Studio вы, по сути, указываете программе добавить эту папку в пути поиска.
- packages — внутренняя папка для промежуточного хранения между установками.
- ports — файлы, которые описывают каждую библиотеку в каталоге, ее версию и где ее можно скачать. При необходимости вы можете добавлять собственные порты.
- scripts — скрипты (cmake, powershell), используемые vcpkg.
- toolsrc — исходный код C++ для vcpkg и связанных компонентов.
- triplets — содержит параметры для каждой поддерживаемой целевой платформы (например, x86-windows или x64-uwp).

## <a name="command-line-reference"></a>Справка по командной строке
- vcpkg search [путь]        Поиск пакетов, доступных для сборки
- vcpkg install <pkg>...    Установка пакета
- vcpkg remove <pkg>...  Удаление пакета
- vcpkg remove --outdated   Удаление всех устаревших пакетов
- vcpkg list            Вывод списка установленных пакетов
- vcpkg update          Отображение списка пакетов для обновления
- vcpkg hash <file> [алгоритм]      Хэширование файла с помощью конкретного алгоритма (по умолчанию SHA512)
- vcpkg integrate install       Делает установленные пакеты доступными для всех пользователей. При первом использовании требуются права администратора.
- vcpkg integrate remove        Отмена интеграции для всех пользователей
- vcpkg integrate project        Создание пакета NuGet со ссылками для использования с конкретным проектом VS
- vcpkg export <pkg>... [параметры]...    Экспорт пакета
- vcpkg edit <pkg>      Открытие порта для редактирования (использует %EDITOR%, по умолчанию «code»)
- vcpkg import <pkg>        Импорт готовой библиотеки
- vcpkg create <pkg> <url>   [название_архива]        Создание пакета
- vcpkg owns <pat>      Поиск файлов в установленных пакетах
- vcpkg cache           Вывод списка кэшированных скомпилированных пакетов
- vcpkg version         Отображение сведений о версии
- vcpkg contact         Отображение контактных данных для отправки отзывов

### <a name="options"></a>Параметры:
  **`--triplet <t>`** Укажите триаду значений для целевой архитектуры (по умолчанию: `%VCPKG_DEFAULT_TRIPLET%`, см. также `vcpkg help triplet`).

  **`--vcpkg-root <path>`** Укажите корневой каталог vcpkg (по умолчанию: `%VCPKG_ROOT%`).
