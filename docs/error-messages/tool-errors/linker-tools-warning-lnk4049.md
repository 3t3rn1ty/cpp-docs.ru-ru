---
title: "Предупреждение средств компоновщика LNK4049 | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "error-reference"
f1_keywords: 
  - "LNK4049"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "LNK4049"
ms.assetid: 5fd5fb24-c860-4149-a557-0ac26a65d97c
caps.latest.revision: 19
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 19
---
# Предупреждение средств компоновщика LNK4049
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

импортирован локально определенный символ "символ"  
  
 Символ был экспортирован и импортирован в программу.  
  
 Данное предупреждение выводится компоновщиком при объявлении символа с помощью атрибута класса хранения `__declspec(dllexport)` в одном объектном файле и ссылки на него посредством атрибута `__declspec(dllimport)` в другом.  
  
 Предупреждение LNK4049 является обобщенным вариантом предупреждения [Предупреждение средств компоновщика LNK4217](../../error-messages/tool-errors/linker-tools-warning-lnk4217.md).  Компоновщик выводит предупреждение LNK4049 в тех случаях, когда не удается определить, из какой функции была ссылка на импортированный символ.  
  
 Как правило, предупреждение LNK4049 выводится вместо предупреждения LNK4217 в следующих случаях:  
  
-   Выполнение последовательной компоновки с использованием параметра [\/INCREMENTAL](../../build/reference/incremental-link-incrementally.md).  
  
-   Выполнение общей оптимизации программы с использованием параметра [\/LTCG](../../build/reference/ltcg-link-time-code-generation.md).  
  
 Для разрешения предупреждения LNK4049 необходимо выполнить следующие действия:  
  
-   Удалить объявление имени `__declspec(dllimport)` из упреждающего объявления символа, вызвавшего предупреждение LNK4049.  Можно выполнить поиск символов в двоичном образе с помощью служебной программы **DUMPBIN**.  Переключатель **DUMPBIN \/SYMBOLS** отобразит таблицу COFF\-символов образа.  Дополнительные сведения о служебной программе **DUMPBIN** см. в разделе [Справочник DUMPBIN](../../build/reference/dumpbin-reference.md).  
  
-   Временно отключить последовательную компоновку и общую оптимизацию программы.  При повторной компиляции приложения будет выведено предупреждение LNK4217, содержащее имя функции, из которой была ссылка на импортированный символ.  Удалить объявление `__declspec(dllimport)` из импортированного символа и включить функцию последовательной компоновки или общей оптимизации программы по требованию.  
  
 Хотя конечный созданный код будет функционировать правильно, код, созданный для вызова импортированной функции, будет менее эффективен, чем непосредственный вызов функции.  Данное предупреждение не будет выводиться при компиляции с использованием параметра [\/clr](../../build/reference/clr-common-language-runtime-compilation.md).  
  
 Дополнительные сведения об импорте и экспорте объявлений данных см. в разделе [dllexport, dllimport](../../cpp/dllexport-dllimport.md).  
  
## Пример  
 Компоновка следующих двух модулей вызовет предупреждение LNK4049.  Первый модуль создает объектный файл, содержащий одну экспортированную функцию.  
  
```  
// LNK4049a.cpp  
// compile with: /c  
  
__declspec(dllexport) int func()   
{  
   return 3;  
}  
```  
  
## Пример  
 Второй модуль создает файл объекта, содержащий упреждающее объявление для функции, экспортированной в первый модуль, а также вызов данной функции в функции `main`.  Компоновка этого модуля с первым модулем вызывает предупреждение LNK4049.  Чтобы разрешить предупреждение, следует удалить объявление `__declspec(dllimport)`.  
  
```  
// LNK4049b.cpp  
// compile with: /link /WX /LTCG LNK4049a.obj  
// LNK4049 expected  
  
__declspec(dllimport) int func();  
// try the following line instead  
// int func();  
  
int main()  
{  
   return func();  
}  
```  
  
## См. также  
 [Предупреждение средств компоновщика LNK4217](../../error-messages/tool-errors/linker-tools-warning-lnk4217.md)   
 [dllexport, dllimport](../../cpp/dllexport-dllimport.md)