---
title: Ошибка средств компоновщика LNK1104 | Документы Microsoft
ms.custom: ''
ms.date: 05/17/2017
ms.technology:
- cpp-diagnostics
ms.topic: error-reference
f1_keywords:
- LNK1104
dev_langs:
- C++
helpviewer_keywords:
- LNK1104
ms.assetid: 9ca6f929-0efc-4055-8354-3cf5b4e636dc
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: d2b832d4bceab88fbf3fbe8325a414669d11073c
ms.sourcegitcommit: 76b7653ae443a2b8eb1186b789f8503609d6453e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33302816"
---
# <a name="linker-tools-error-lnk1104"></a>Ошибка средств компоновщика LNK1104

> не удается открыть файл "*filename*"

Компоновщику не удалось открыть указанный файл. Наиболее распространенные причины этой ошибки, что файл используется или заблокирован другим процессом, не существует, не удается найти в одном из каталогов, компоновщик ищет или не может иметь разрешение на доступ к файлу. Реже вы может быть вызвано нехваткой места на диске, возможно, файл слишком велик или может быть слишком длинный путь к файлу.

## <a name="possible-causes-and-solutions"></a>Возможные причины и решения

Эта ошибка может возникать, когда компоновщик пытается открыть файл для чтения или для записи. Для сужения возможные причины, сначала проверьте тип файла он находится и используйте следующие разделы для поиска и устранения конкретной проблемы.

### <a name="cannot-open-your-app-or-its-pdb-file"></a>Не удается открыть приложение или его PDB-файл

Если имя файла исполняемого файла выполняется сборка проекта или связанный файл PDB, наиболее распространенной причиной является приложение уже запущено при попытке перестроить его или ее загрузки в отладчике. Чтобы устранить эту проблему, остановите программу и выгрузить его из отладчика до его создания. Если приложение будет открыт в другой программе, например в редакторе ресурсов, закройте его. В некоторых случаях может потребоваться завершить процесс, или остановите и перезапустите Visual Studio с помощью диспетчера задач.

Антивирусные программы часто временно блокировать доступ к только что созданными файлами, особенно .exe и .dll исполняемые файлы. Чтобы устранить эту проблему, попробуйте исключение каталоги сборки проекта из антивирусной программы.

### <a name="cannot-open-a-microsoft-library-file"></a>Не удается открыть файл библиотеки Microsoft

Если файл, который не удалось открыть один из файлов стандартной библиотеки, предоставляемые корпорацией Майкрософт, таких как kernel32.lib, возможно, ошибка конфигурации проекта "или" Ошибка установки. Убедитесь, что был установлен пакет Windows SDK и если проект требует других библиотек Microsoft, такими как MFC, убедитесь, что компонентов MFC также были установлены с помощью установщика Visual Studio. Можно запустить установщик еще раз, чтобы добавить дополнительные компоненты в любое время. Дополнительные сведения см. в разделе [изменения Visual Studio](/visualstudio/install/modify-visual-studio). На вкладке отдельные компоненты в установщик для выбора определенных библиотек и пакеты SDK.

Вы создаете проект, который был создан с помощью более старой версии Visual Studio, набор инструментов платформы и библиотеки для этой версии могут быть не установлены. Если появляется сообщение об ошибке касается имени библиотеки с версиями, например msvcr100.lib, возможно, это причину. Чтобы устранить эту проблему, можно использовать два варианта: можно обновить проект для использования текущего набора инструментов платформы, установки, или можно установить старую набор инструментов и постройте проект без изменений. Дополнительные сведения см. в разделе [обновление проектов из предыдущих версий Visual C++](../../porting/upgrading-projects-from-earlier-versions-of-visual-cpp.md) и [использовать собственное многоплатформенное нацеливание в Visual Studio для построения старые проекты](../../porting/use-native-multi-targeting.md).

При появлении этой ошибки при построении для новой целевой платформе или конфигурации с библиотеками для этого набора инструментов проекта конфигурации и платформы не могут быть установлены. Убедитесь, что **набор инструментов платформы** и **версию пакета SDK Windows** указано в [странице свойств Общие](../../ide/general-property-page-project.md) устанавливаются для проекта и убедитесь, что требуемая библиотеки доступны в **каталоги библиотек** указано в [страница свойств каталогов VC ++](../../ide/vcpp-directories-property-page.md) набора параметров. Существуют отдельные параметры для отладки и розничной торговли конфигураций, а также 32-разрядных и 64-разрядные конфигурации, поэтому если один сборка работает, но другой приведет к ошибке, убедитесь, настройки указаны верно и для установлены необходимые средства и библиотеки каждые конфигурации построения.

Если вы используете интегрированную среду разработки Visual Studio для построения проекта, который был скопирован из другого компьютера, место установки для библиотеки могут отличаться. Проверьте **каталоги библиотек** свойство [страница свойств каталогов VC ++](../../ide/vcpp-directories-property-page.md) для проекта и обновите его при необходимости. Чтобы просмотреть и изменить текущий путей к библиотеке, заданными в среде разработки, выберите элемент управления "раскрывающийся список" для **каталоги библиотек** свойство и выберите **изменить**. **Вычисляется значение** раздел **каталоги библиотек** диалоговом окне отображается список текущих путей, для поиска файлов библиотеки.

Эта ошибка также может возникнуть при путь к пакету SDK для Windows устарела. Если после установки версии пакета SDK Windows более поздняя, чем версия Visual Studio, убедитесь, что в расположениях, указанных в [страница свойств каталогов VC ++](../../ide/vcpp-directories-property-page.md) обновляются новый пакет SDK. При использовании командной строки разработчика, убедитесь, что пакетный файл, который инициализирует переменные среды для нового пути пакета SDK. Этой проблемы можно избежать с помощью установщика Visual Studio, чтобы установить обновленные пакеты SDK.

### <a name="cannot-open-a-third-party-library-file"></a>Не удается открыть файл библиотеки сторонних разработчиков

Существует несколько распространенных причин этой проблемы:

- Путь к файлу библиотеки может быть неправильным, или не указано его в компоновщик.

- Установлена 32-разрядная версия библиотеки, но при построении для 64-разрядной архитектурой, или наоборот.

- Библиотеки могут иметь зависимости от других библиотек, которые не установлены.

Чтобы устранить проблему с пути, убедитесь, что LIB-переменная среды имеет значение и содержит все каталоги библиотек, используемого для каждой конфигурации построения. В Интегрированной среде разработки, задается переменная LIB **каталоги библиотек** свойство [страница свойств каталогов VC ++](../../ide/vcpp-directories-property-page.md). Убедитесь, что здесь отображаются все каталоги, содержащие библиотеки, необходимые для каждой конфигурации построения.

Если необходимо ввести каталог библиотеки, переопределяет каталог стандартной библиотеки, можно использовать [/LIBPATH](../../build/reference/libpath-additional-libpath.md) параметр в командной строке или в Интегрированной среде разработки, можно использовать **Дополнительные каталоги библиотек** свойство в **свойства конфигурации > компоновщика > Общие** страницу свойств проекта.

Убедитесь, что у вас установлены все версии библиотеки, необходимые для настройки, построении. Рассмотрите возможность использования [vcpkg](../../vcpkg.md) пакета управления средство автоматизации установки и настройки для многих стандартных библиотек. По возможности рекомендуется построить собственные копии сторонних библиотек, поэтому убедитесь в наличии локальные зависимости, требующих библиотек, и они создаются для тех же настроек, что и проект.

### <a name="cannot-open-a-file-built-by-your-project"></a>Не удается открыть файл, созданный вашим проектом

Эта ошибка может возникнуть, если файл *filename* созданных в вашем решении, но еще не существует когда компоновщик пытается получить доступ к нему. Это может произойти, если один проект зависит от другого проекта, но не проекты строятся в правильном порядке. Чтобы устранить эту проблему, убедитесь, что ссылки проекта задаются в проект, использующий файл, отсутствующий файл строится прежде, чем это требуется. Дополнительные сведения см. в разделе [добавления ссылок в проектах Visual C++](../../ide/adding-references-in-visual-cpp-projects.md) и [управление ссылками в проекте](/visualstudio/ide/managing-references-in-a-project).

### <a name="cannot-open-file-cprogramobj"></a>Не удается открыть файл "C:\\Program.obj"

Если вы видите эту ошибку или аналогичное сообщение об ошибке с неожиданным OBJ-файл в корневой каталог диска, проблема заключается в почти наверняка путь к библиотеке, не заключенное в двойные кавычки.

Чтобы устранить эту проблему, для построения из командной строки, проверьте [/LIBPATH](../../build/reference/libpath-additional-libpath.md) параметров, указанных в переменной среды LIB путей и пути, указанные в командной строке и используйте двойные кавычки вокруг все пути которые содержат пробелы.

Чтобы устранить эту проблему в Интегрированной среде разработки, проверьте **каталоги библиотек** свойство [свойства конфигурации > каталоги VC ++](../../ide/vcpp-directories-property-page.md) страницу свойств **Дополнительные каталоги библиотек** свойство в **свойства конфигурации > компоновщика > Общие** страницу свойств и **Дополнительные зависимости** свойство в **конфигурации Свойства > компоновщика > ввода** страницу свойств проекта. Убедитесь, что все пути к каталогам, содержащие необходимые библиотеки заключены в двойные кавычки, при необходимости.

### <a name="other-common-issues"></a>Другие распространенные проблемы

Эта ошибка может возникать, если библиотека имя файла или путь указан в компоновщик, в командной строке или в [#pragma comment (lib, «library_name»)](../../preprocessor/comment-c-cpp.md) директиву неверный или путь имеет спецификацию недопустимый диск. Проверьте правильность написания и расширение файла и убедитесь, что файл существует в указанном месте.

Файл мог быть открыт в другой программе, и компоновщик не может вести запись в него. Антивирусные программы часто временно заблокировать новые файлы. Чтобы устранить эту проблему, попробуйте исключение каталоги сборки проекта из антивирусной программы.

При использовании параметра параллельной сборки, возможно, что Visual Studio заблокировал файл в другом потоке. Чтобы устранить эту проблему, проверьте выполнение сборки тот же объект кода или библиотеки в нескольких проектах и использовать зависимости сборки или ссылки на проект для выбора двоичных файлов сборки в проекте.

При указании отдельных библиотек в **Дополнительные зависимости** свойство напрямую, используйте пробелы для разделения имена библиотек, не запятые и точки с запятой. Если вы используете **изменить** пункт меню, чтобы открыть **Дополнительные зависимости** диалоговое окно, используйте символы новой строки в отдельные имена, не запятые, точки с запятой или пробелы. Также используйте символы новой строки, при указании пути к библиотекам в **каталоги библиотек** и **Дополнительные каталоги библиотек** диалоговым окнам.

Эта ошибка может возникнуть при путь для *filename* длину более 260 символов. Измените имена или изменить структуру каталогов, при необходимости, чтобы сократить путь к необходимым файлам.

Эта ошибка может возникать из-за слишком большого файла. Библиотеки или объектов файлов больше, чем один гигабайт размер может вызвать проблемы для 32-разрядному компоновщику. Возможные варианты исправления этой проблемы заключается в использовании 64-разрядного набора инструментов. Дополнительные сведения о том, как сделать это из командной строки см. в разделе [как: включить 64-разрядных инструментов Visual C++ в командной строке](../../build/how-to-enable-a-64-bit-visual-cpp-toolset-on-the-command-line.md). Сведения о том, как это сделать в Интегрированной среде разработки см. в разделе [с помощью MSBuild с 64-разрядного компилятора и инструментов](../../build/walkthrough-using-msbuild-to-create-a-visual-cpp-project.md#using-msbuild-to-build-your-project) и эту запись переполнения стека: [внесение использовать собственный amd64 инструментов Visual Studio](http://stackoverflow.com/questions/19820718/how-to-make-visual-studio-use-the-native-amd64-toolchain/23793055).

Эта ошибка может возникнуть при наличии файла недостаточно разрешений для доступа к *filename*. Это может произойти при использовании учетной записи обычного пользователя и попытки доступа к файлам библиотеки в защищенные системные каталоги, или использовать файлы, скопированные из других пользователей, имеющих свои первоначальные разрешения набор. Чтобы устранить эту проблему, переместите файл в каталог для записи проекта. Если файл находится в каталоге для записи, но имеет разрешения недоступны, можно использовать командную строку администратора и выполните команду takeown.exe, чтобы стать владельцем файла.

Эта ошибка может возникнуть при отсутствии места на диске. Компоновщик использует временные файлы в нескольких ситуациях. Даже если имеется достаточно места на диске, очень больших ссылку можно мог использовать или фрагмент доступное место на диске. Рассмотрите возможность использования [/OPT (оптимизации)](../../build/reference/opt-optimizations.md) параметр; это транзитивное исключения COMDAT операций чтения всех объектных файлах несколько раз.

Если *filename* называется LNK*nnn*, которое представляет имя файла компоновщиком для временного файла, каталог, указанный в переменной среды TMP не существует, или может быть задано несколько каталогов указанное для переменной среды TMP. Только один путь к каталогу должен быть указан для переменной среды TMP.
