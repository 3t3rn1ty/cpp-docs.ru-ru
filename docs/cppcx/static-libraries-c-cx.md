---
title: "Статические библиотеки (C++/CX) | Microsoft Docs"
ms.custom: ""
ms.date: "02/03/2017"
ms.prod: "windows-client-threshold"
ms.technology: ""
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 7faf53c8-fa21-42cc-8246-d32533ef9dfa
caps.latest.revision: 10
author: "ghogen"
ms.author: "ghogen"
manager: "ghogen"
caps.handback.revision: 10
---
# Статические библиотеки (C++/CX)
Статическая библиотека, используемая в приложении [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)], может содержать код C\+\+, соответствующий стандарту ISO, включая типы STL, а также вызовы API\-интерфейсов Win32, которые не исключены из платформы приложений [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)]. Статическая библиотека использует компоненты [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)] и может создавать компоненты [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)] с некоторыми ограничениями.  
  
## Создание статических библиотек  
  
#### Создание статической библиотеки для использования в приложении [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)]  
  
1.  В строке меню выберите **Файл** \> **Создать** \> **Проект** \> **Пустая статическая библиотека** для приложений [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)].  
  
2.  В области **Обозреватель решений** откройте контекстное меню для проекта и выберите пункт **Свойства**. В диалоговом окне **Свойства** на странице **Свойства конфигурации** \> **Общие** задайте для параметра поддержки приложений [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)] значение **Да**.  
  
3.  На странице **Свойства конфигурации** \> **C\/C\+\+** задайте для параметра **Использовать**[!INCLUDE[wrt](../cppcx/includes/wrt-md.md)] **расширение** значение **Да \(\/ZW\)**.  
  
 Если при компиляции новой статической библиотеки вы выполняете вызов API\-интерфейса Win32, исключенного для приложений [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)], возникает ошибка компилятора C3861 "Идентификатор не найден". Альтернативный метод, который поддерживается для [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)], см. в разделе [Alternatives to Windows APIs in Windows Store apps](http://msdn.microsoft.com/ru-ru/75568012-61e0-41cc-a4df-c698f54f21ec).  
  
 При добавлении проекта статической библиотеки C\+\+ в решение приложения [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)] может потребоваться изменить свойства проекта библиотеки, установив для свойства поддержки приложений [!INCLUDE[win8_appname_long](../cppcx/includes/win8-appname-long-md.md)] значение **Да**. Без этого параметра построение и компоновка кода выполняются, но при попытке проверить приложение для [!INCLUDE[win8_appstore_long](../cppcx/includes/win8-appstore-long-md.md)] возникает ошибка. Статическая библиотека должна компилироваться с теми же параметрами компилятора, что и проект, в котором она используется.  
  
 При использовании статической библиотеки, которая создает открытые классы `ref`, открытые классы интерфейсов или открытые классы значений, компоновщик выдает следующее предупреждение:  
  
> **warning LNK4264:** архивирует объектный файл, скомпилированный с параметром \/ZW, в статическую библиотеку; обратите внимание, что при создании типов [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)] не рекомендуется привязка к статической библиотеке, содержащей метаданные [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)].  
  
 Можно игнорировать это предупреждение, только если статическая библиотека не создает компоненты [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)], используемые вне этой библиотеки. Если библиотека не использует компонент, который она определяет, то компоновщик может оптимизировать реализацию, даже если открытые метаданные содержат сведения о типе. Это означает, что открытые компоненты в статической библиотеке будут скомпилированы, но не активируются во время выполнения. Поэтому любой компонент [!INCLUDE[wrt](../cppcx/includes/wrt-md.md)], предназначенный для использования другими компонентами или приложениями, должен быть реализован в библиотеке динамической компоновки \(DLL\).  
  
## См. также  
 [Работа с потоками и маршалинг](../cppcx/threading-and-marshaling-c-cx.md)