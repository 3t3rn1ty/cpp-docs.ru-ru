---
title: Компиляция программы на языке C++, предназначенной для среды CLR | Документы Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-ide
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- command-line applications [C++], managed code
- compiling programs [C++]
- Visual C++, managed code
- managed code [C++]
ms.assetid: 339f89df-a5d2-4040-831a-ddbe25b5dce4
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: d2a7bcb0eead62730f0b70b0b1df64e5ed08f1f0
ms.sourcegitcommit: a4454b91d556a3dc43d8755cdcdeabcc9285a20e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2018
ms.locfileid: "33336099"
---
# <a name="walkthrough-compiling-a-c-program-that-targets-the-clr-in-visual-studio"></a>Пошаговое руководство. Компиляция программы на языке C++, предназначенной для среды CLR, в Visual Studio
Вы можете создавать программы Visual C++, использующие классы .NET и компилирующие их с помощью среды разработки Visual Studio.  
  
 Для выполнения этой процедуры вы можете указать собственную программу на Visual C++ или использовать один из примеров. Пример программы, используемый в этой процедуре, создает текстовый файл textfile.txt и сохраняет его в каталог проекта.  
  
## <a name="prerequisites"></a>Предварительные требования  
 Эти разделы предполагают знание основ языка C++.  
  
### <a name="to-create-a-new-project-in-visual-studio-and-add-a-new-source-file"></a>Создание проекта в Visual Studio и добавление нового исходного файла  
  
1.  Создайте новый проект. В меню **Файл** выберите пункт **Создать**, а затем команду **Проект**.  
  
2.  В списке типов проектов Visual C++ щелкните **CLR**, а затем — **Пустой проект CLR**.  
  
3.  Введите имя проекта.  
  
     По умолчанию содержащее проект решение имеет то же имя, что и новый проект, но можно ввести другое имя. При необходимости можно ввести другое расположение для проекта.  
  
     Нажмите кнопку **ОК** для создания проекта.  
  
4.  Если обозреватель решений не отображается, в меню **Вид** выберите команду **Обозреватель решений**.  
  
5.  Добавьте новый исходный файл в проект:  
  
    -   Щелкните правой кнопкой мыши папку **Исходные файлы** в обозревателе решений, укажите пункт **Добавить** и выберите пункт **Новый элемент**.  
  
    -   Щелкните элемент **Файл C++ (.cpp)**, введите имя файла и нажмите кнопу **Добавить**.  
  
     Файл **.cpp** отображается в папке **Исходные файлы** в обозревателе решений, а окно с вкладками отображается в месте ввода кода в этом файле.  
  
6.  Щелкните только что созданную вкладку в Visual Studio и введите допустимую программу Visual C++ или скопируйте и вставьте один из примеров.  
  
     Например, можно использовать пример [Практическое руководство. Запись данных в текстовый файл (C++/CLI)](../dotnet/how-to-write-a-text-file-cpp-cli.md) (в узле **File Handling and I/O** (Работа с файлами и операции ввода-вывода) руководства по программированию).  
  
     При использовании примера обратите внимание, что при создании объекта .NET используется ключевое слово `gcnew`, а не `new`, и что `gcnew` возвращает дескриптор (`^`) вместо указателя (`*`).  
  
     `StreamWriter^ sw = gcnew StreamWriter(fileName);`  
  
     Дополнительные сведения о новом синтаксисе Visual C++ см. в разделе [Расширения компонентов для платформ среды выполнения](../windows/component-extensions-for-runtime-platforms.md).  
  
7.  В меню **Сборка** выберите **Собрать решение**.  
  
     Окно **Вывод** отображает сведения о ходе компиляции, такие как расположение журнала сборки и сообщение о состоянии сборки.  
  
     Если внести изменения и запустить программу, не выполняя сборку, диалоговое окно может сообщить, что проект устарел. Установите флажок в этом диалоговом окне, прежде чем нажимать кнопку **ОК**, если вы хотите, чтобы Visual Studio всегда использовала актуальные версии файлов вместо того, чтобы выводить запрос при каждой сборке приложения.  
  
8.  В меню **Отладка** выберите команду **Запуск без отладки**.  
  
9. Если использовался пример программы, при выполнении программы отображается командное окно, указывающее, что текстовый файл был создан. Для закрытия командного окна нажмите любую клавишу.  
  
     Теперь текстовый файл **textfile.txt** находится в каталоге проекта. Этот файл можно открыть с помощью Блокнота.  
  
    > [!NOTE]
    >  При выборе пустого шаблона проекта CLR автоматически задается параметр компилятора **/clr**. Чтобы проверить это, щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **Свойства**, а затем установите флажок **Поддержка общеязыковой среды выполнения (CLR)** в узле  **Общие** окна **Свойства конфигурации**.  
  
## <a name="whats-next"></a>Что дальше?  
 **Предыдущий:** [Пошаговое руководство. Компиляция машинной программы на языке C++ из командной строки](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md) &#124; **Следующий:**[Пошаговое руководство. Компиляция программы на C из командной строки](../build/walkthrough-compile-a-c-program-on-the-command-line.md)  
  
## <a name="see-also"></a>См. также  
 [Справочник по языку C++](../cpp/cpp-language-reference.md)   
 [Сборка программ C/C++](../build/building-c-cpp-programs.md)