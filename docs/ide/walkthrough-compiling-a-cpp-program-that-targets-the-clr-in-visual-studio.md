---
title: "Пошаговое руководство. Компиляция программы на языке C++, предназначенной для среды CLR, в Visual Studio | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "приложения командной строки [C++], управляемый код"
  - "компиляция программ [C++]"
  - "управляемого кода [C++]"
  - "Visual C++, управляемый код"
ms.assetid: 339f89df-a5d2-4040-831a-ddbe25b5dce4
caps.latest.revision: 40
caps.handback.revision: 40
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# Пошаговое руководство. Компиляция программы на языке C++, предназначенной для среды CLR, в Visual Studio
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

С помощью среды разработки можно создавать программы на языке Visual C\+\+, в которых используются классы .NET, и производить их компиляцию.  
  
 Для выполнения данной процедуры можно ввести собственную программу на языке Visual C\+\+ или использовать один из примеров программ.  Демонстрационная программа, используемая в данной процедуре, создает текстовый файл с именем textfile.txt и сохраняет его в каталог проекта.  
  
## Обязательные компоненты  
 Эти разделы предполагают знание основ языка C\+\+.  
  
### Создание проекта в Visual Studio и добавление нового файла исходного кода  
  
1.  Создайте новый проект.  В меню **Файл** выберите пункт **Создать** и щелкните **Проект...**.  
  
2.  В списке типов проектов Visual C\+\+ выберите **CLR** и щелкните пункт **Пустой проект CLR**.  
  
3.  Введите имя проекта.  
  
     По умолчанию имя решения, содержащего данный проект, совпадает с именем проекта, однако можно задать другое имя.  При необходимости для проекта можно указать иное место размещения.  
  
     Нажмите **ОК**, чтобы создать проект.  
  
4.  Если обозреватель решений не отображается, в меню **Вид** выберите команду **Обозреватель решений**.  
  
5.  Добавьте в проект новый файл исходного кода.  
  
    -   В обозревателе решений щелкните правой кнопкой мыши папку **Файлы исходного кода**, выберите пункт **Добавить** и щелкните **Создать элемент...**.  
  
    -   Щелкните пункт **Файл C\+\+ \(.cpp\)**, введите имя файла и нажмите кнопку **Добавить**.  
  
     В папке **Файлы исходного кода** в обозревателе решений отобразится файл **.cpp**, и появится окно со вкладками, в котором вводится код для файла.  
  
6.  Щелкните мышью в созданной вкладке в Visual Studio и введите корректный код программы на Visual C\+\+ или скопируйте и вставьте один из примеров программ.  
  
     Например, можно использовать демонстрационную программу из раздела [Практическое руководство. Запись данных в текстовый файл](../Topic/How%20to:%20Write%20a%20Text%20File%20\(C++-CLI\).md) \(в узле **Работа с файлами и операции ввода\-вывода** руководства по программированию\).  
  
     Если используется пример программы, обратите внимание, что для создания объекта .NET вместо ключевого слова `new` ``  используется ключевое слово `gcnew`, а `gcnew` возвращает дескриптор \(`^`\), а не указатель \(`*`\):  
  
     `StreamWriter^ sw = gcnew StreamWriter(fileName);`  
  
     Дополнительные сведения о новом синтаксисе Visual C\+\+ см. в разделе [Расширения компонентов для платформ среды выполнения](../windows/component-extensions-for-runtime-platforms.md).  
  
7.  В меню **Построение** выберите **Построить решение**.  
  
     Окно **Выходные данные** отображает информацию о ходе выполнения компиляции, такую как размещение журнала построения и сообщение о статусе построения.  
  
     При внесении изменений и запуске программы без выполнения построения диалоговое окно может сообщать о том, что проект устарел.  Установите флажок в этом диалоговом окне перед нажатием кнопки **ОК**, если необходимо чтобы Visual Studio всегда использовал текущие версии файлов, а не выводил запрос при каждом выполнении построения приложения.  
  
8.  В меню **Отладка** выберите команду **Запуск без отладки**.  
  
9. Если использовалась демонстрационная программа, при ее запуске будет выведено командное окно с указанием на то, что текстовый файл был создан.  Чтобы закрыть командное окно, нажмите любую клавишу.  
  
     Теперь в каталоге проекта должен находиться текстовый файл **textfile.txt**.  Этот файл можно открыть с помощью "Блокнота".  
  
    > [!NOTE]
    >  При выборе шаблона пустого проекта CLR автоматически устанавливается параметр компилятора **\/clr**.  Чтобы проверить это, щелкните правой кнопкой мыши проект в **обозревателе решений**, выберите пункт **Свойства**, а затем в узле **Общие** окна **Свойства конфигурации** проверьте параметр **Поддержка Common Language Runtime**.  
  
## Что дальше?  
 **Назад:** [Пошаговое руководство. Компиляция машинной программы на языке C\+\+ из командной строки](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md) &#124; **Далее:** [Пошаговое руководство. Компиляция программы на языке C из командной строки](../Topic/Walkthrough:%20Compiling%20a%20C%20Program%20on%20the%20Command%20Line.md)  
  
## См. также  
 [Visual C\+\+ Guided Tour](http://msdn.microsoft.com/ru-ru/499cb66f-7df1-45d6-8b6b-33d94fd1f17c)   
 [Справочник по языку C\+\+](../cpp/cpp-language-reference.md)   
 [Сборка программ C\/C\+\+](../build/building-c-cpp-programs.md)