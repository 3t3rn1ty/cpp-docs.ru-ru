---
title: "Файлы правил XML страницы свойств | Документы Microsoft"
ms.custom: 
ms.date: 04/27/2017
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-ide
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
helpviewer_keywords:
- property page XML files
ms.assetid: dd9d9734-4387-4098-8ba6-85b93507731d
caps.latest.revision: 
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: b81e8965773c64144059fa433b54484c786159a5
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="property-page-xml-rule-files"></a>Файлы правил XML страницы свойств
По XML-файлы в папке VCTargets настроены на страницах свойств проекта в Интегрированной среде разработки. Точный путь зависит от того, какие edition(s) Visual Studio устанавливаются и язык продукта. Visual Studio 2017 г. выпуск Enterprise Edition на английском языке путь является `%ProgramFiles%\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\VC\VCTargets\1033`. XML-файлы описаны имена правил, категории и отдельные свойства, тип данных, значения по умолчанию и как они должны отображаться. При установке свойства в Интегрированной среде разработки, новое значение сохраняется в файле проекта.

Необходимо создать пользовательскую страницу свойств только сценарии, в которых необходимо понимать, что механизмах эти файлы и Интегрированной среде разработки Visual Studio () или (б) необходимо настроить свойства проекта с помощью некоторых средств, отличных от через интегрированную среду разработки Visual Studio. 

Во-первых давайте откройте страницы свойств для проекта (щелкните правой кнопкой мыши узел проекта в **обозревателе решений** и выберите Свойства):
   
![Свойства проекта Visual C++](media/cpp-property-page-2017.png)

Каждый узел в разделе **свойства конфигурации** вызывается правило. Правило иногда соответствует одной таких средств, как компилятор, но в целом термин ссылается на то, что имеет свойства, которое выполняется и который может выдать некоторые выходные данные. Каждое правило заполняется из XML-файла в папке VCTargets. Например правило C/C++, показанное выше заполняется «cl.xml».

Как показано выше, каждое правило имеет набор свойств, которые упорядочены по категориям. Каждый вложенный узел, в соответствии с правилом представляет категорию. Например узел оптимизации в C/C++ содержит все свойства связанных оптимизации средства компиляции. Свойства и их значения самостоятельно подготавливаются к просмотру в формате сетки в правой области.

Можно открыть cl.xml в блокноте или редакторе XML (см. снимок ниже). Вы увидите корневой узел с именем правила, которое имеет такой же список свойств, определенных в нем, как отображается в пользовательском Интерфейсе, а также дополнительные метаданные.

```xml  
<?xml version="1.0" encoding="utf-8"?>
<!--Copyright, Microsoft Corporation, All rights reserved.-->
<Rule Name="CL" PageTemplate="tool" DisplayName="C/C++" SwitchPrefix="/" Order="10" xmlns="http://schemas.microsoft.com/build/2009/properties" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sys="clr-namespace:System;assembly=mscorlib">
  <Rule.Categories>
    <Category Name="General" DisplayName="General" />
    <Category Name="Optimization" DisplayName="Optimization" />
    <Category Name="Preprocessor" DisplayName="Preprocessor" />
    <Category Name="Code Generation" DisplayName="Code Generation" />
    <Category Name="Language" DisplayName="Language" />
    <Category Name="Precompiled Headers" DisplayName="Precompiled Headers" />
    <Category Name="Output Files" DisplayName="Output Files" />
    <Category Name="Browse Information" DisplayName="Browse Information" />
    <Category Name="Advanced" DisplayName="Advanced" />
    <Category Name="All Options" DisplayName="All Options" Subtype="Search" />
    <Category Name="Command Line" DisplayName="Command Line" Subtype="CommandLine" />
  </Rule.Categories>
...
``` 

Имеется один XML-файл, соответствующий каждый узел в списке свойств конфигурации на страницах свойств пользовательского интерфейса. Можно добавить или удалить правила в пользовательском Интерфейсе путем добавления или удаления расположений в соответствующие XML-файлы в проекте. Например это как Microsoft.CppBuild.targets (на один уровень вверх в папке 1033) включает cl.xml:

```xml  
<PropertyPageSchema Condition="'$(ConfigurationType)' != 'Utility'" Include="$(VCTargetsPath)$(LangID)\cl.xml"/>

``` 
При удалении cl.xml всех данных, вы получите следующие схемы:
```xml  
<?xml version="1.0" encoding="utf-8"?>
<Rule>
  <Rule.DataSource />
  <Rule.Categories>
    <Category />
        ...
  </Rule.Categories>
  <BoolProperty />
  <EnumProperty />
  <IntProperty />
  <StringProperty />
  <StringListProperty />
</Rule>
``` 

В следующем разделе описаны каждого основных элементов, а также некоторые метаданные, которые можно подключить к ним.

1. **Правило:** правила обычно является корневой узел в XML-файл, он может иметь много атрибутов:

```xml    
<Rule Name="CL" PageTemplate="tool" SwitchPrefix="/" Order="10"
          xmlns="http://schemas.microsoft.com/build/2009/properties"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:sys="clr-namespace:System;assembly=mscorlib">
  <Rule.DisplayName>
    <sys:String>C/C++</sys:String>
  </Rule.DisplayName>
```  

   1. **Имя:** атрибут Name — это идентификатор для правила. Он должен быть уникальным среди всех свойств страницы XML-файлы проекта.

   2. **PageTemplate:** значение этого атрибута используется пользовательский Интерфейс для выбора из коллекции шаблонов пользовательского интерфейса. Шаблон «средство» отображает свойства в виде стандартных сетки. Другие встроенные значения для этого атрибута: «debugger» и «универсальный». См. Отладка и узел Общие, соответственно, для просмотра в формате пользовательского интерфейса, возникающие в результате указания этих значений. Пользовательский Интерфейс для шаблона страницы «отладчик» использует раскрывающегося списка для переключения между свойств различных отладчика, в то время как шаблон «универсальный» отображаются категории другое свойство все на одной странице, сравните это с нескольких категорий дочерние узлы правила узел. Этот атрибут является просто подсказки пользовательского интерфейса; XML-файл предназначен для независимых пользовательского интерфейса. Этот атрибут может использовать другой пользовательский Интерфейс для различных целей.

  В. **SwitchPrefix:** это префикс, используемый в командной строке для параметров. Значение «/» приведет к появлению коммутаторы, которые выглядят как/Zi, / nologo, /W3 и т. д.

  Г. **Порядок:** это предложение для потенциального клиента пользовательского интерфейса на относительное расположение этого правила, по сравнению с другими правилами в системе.

  Д. **xmlns:** это стандартный элемент XAML. Вы увидите три перечисленных пространств имен. Эти методы соответствуют пространства имен для десериализации XAML классы пространства имен схемы и системных XAML, соответственно.

  f. **Отображаемое имя:** имя, которое отображается на странице свойств пользовательского интерфейса для узел правила. Это значение является локализуемым. Мы создали DisplayName как дочерний элемент элемента правила, а не как атрибут (например, имя или SwitchPrefix) из-за внутренней локализации требований. С точки зрения языка XAML и являются эквивалентными. Таким образом его можно просто сделать атрибут загромождать или оставить его состоянии.

  ж. **Источник данных:** это очень важное свойство, которое указывает системе проектов расположение, из которого следует значение свойства считываются и записываются в и его группирования (описано ниже). Для cl.xml эти значения таковы:

```xml  
       <DataSource Persistence="ProjectFile" ItemType="ClCompile" Label="" HasConfigurationCondition="true" />
```  
   - `Persistence="ProjectFile`Предписывает системе проектов, все свойства для правила должен быть записан в файл проекта или файл вкладки свойств (в зависимости от того, что узел был использован для создания страниц свойств). Возможное значение — «UserFile», который ведет запись объекта в User-файл.

   - `ItemType="ClCompile"`сообщает, что свойства будут храниться в виде ItemDefinition метаданные или метаданные элемента (последний только в том случае, если страницы свойств были порожден от узла файла в обозревателе решений) этого типа элемента. Если это поле не задано, свойство будет записан как общие свойства в элемент PropertyGroup.

   - `Label=""`Указывает, что при свойства записываются в виде `ItemDefinition` метаданных, метка ItemDefinitionGroup родительского объекта будет пустым (каждый элемент MSBuild может иметь метку). Visual Studio 2017 г. с меткой группы используется для перехода VCXPROJ-файл проекта. Обратите внимание, что группы, которые содержат большинство свойств правила пустую строку в качестве метки.

   - `HasConfigurationCondition="true"`система проекта прикреплять условия значение конфигурации, чтобы она вступает в силу только для текущей конфигурации проекта (условие может быть прикрепленной родительской группы или само значение). Например, откройте страницу свойств узла проекта и установите значение свойства **обрабатывать предупреждения как ошибки** под **свойства конфигурации > C/C++ Общие** значение «Да». Следующее значение записывается в файл проекта. Обратите внимание, условия конфигурации прикреплена к родительской ItemDefinitionGroup.

```xml  
     <ItemDefinitionGroup Condition="‘$(Configuration)|$(Platform)’==’Debug|Win32’">
        <ClCompile>
           <TreatWarningAsError>true</TreatWarningAsError>
        </ClCompile>
     </ItemDefinitionGroup>
 ```
   Если это значение было задано в страницу свойств для конкретного файла, например stdafx.cpp, значение свойства будет записан в элементе stdafx.cpp в файле проекта, как показано ниже. Обратите внимание на то, как условие конфигурации непосредственно подключен к метаданных.

 ```xml  
<ItemGroup>
   <ClCompile Include="stdafx.cpp">
      <TreatWarningAsError Condition="‘$(Configuration)|$(Platform)’==’Debug|Win32’">true</TreatWarningAsError>
   </ClCompile>
</ItemGroup>
 ```
   Еще одним атрибутом **DataSource** не перечисленные выше является **PersistedName**. Этот атрибут можно использовать для представления свойства в файле проекта под другим именем. По умолчанию этот атрибут имеет значение свойства **имя**. 

   Отдельное свойство можно переопределить родительского правила элемента источника данных. В этом случае расположение для значения этого свойства будет отличаться от других свойств в правиле.

   з. Существуют другие атрибуты правила, например описание, SupportsFileBatching и т.д, которые здесь не показаны. Полный набор атрибуты, применимые к правилу или любом другом элементе можно получить, перейдя к документации для этих типов. Кроме того, можно проверить открытых свойств на типах `Microsoft.Build.Framework.XamlTypes` пространства имен в `Microsoft.Build.Framework .dll` сборки.

   i. **Отображаемое имя**, **PageTemplate**, и **порядок** , в противном случае значение свойства, связанные с Пользовательским интерфейсом, имеющихся в этой модели данных зависящий от пользовательского интерфейса. Эти свойства являются почти наверняка будет использоваться пользовательского интерфейса, который используется для отображения страницы свойств. **Отображаемое имя** и **описание** — это два свойства, которые присутствуют в почти все элементы в XML-файле. И это только два свойства, которые локализуются (локализации этих строк объясняются в более поздней версии post).

2.  **Категория:** правило может иметь несколько категорий. Порядок, в котором перечислены категории в XML-файл — это предложение пользовательский Интерфейс для отображения категорий в том же порядке. Например, порядок категорий в узле C/C++, как показано в пользовательском Интерфейсе — Общие, оптимизации, препроцессор,...  — совпадает со значением, в cl.xml. Категории примера выглядит следующим образом:

```xml  
 <Category Name="Optimization">
    <Category.DisplayName>
        <sys:String>Optimization</sys:String>
    </Category.DisplayName>
 </Category>
```
Показано в приведенном выше фрагменте кода **имя** и **DisplayName** атрибутов, которые нашли до. Опять же, существуют другие атрибуты **категории** может иметь, не используются выше. Вы узнаете о них из документации или с помощью проверки сборки, с помощью ildasm.exe.

3. **Свойства:** это часть XML-файл, содержит список всех свойств в этом правиле. Каждое свойство может принимать одно из пяти возможных типов, показано в приведенном выше каркасе XAML. Конечно можно иметь только некоторые из этих типов в файле. Свойство имеет несколько атрибутов, позволяющих описать сложное. Я объясню только **StringProperty** здесь. Остальные очень похожи.

```xml  
<StringProperty Subtype="file" Name="ObjectFileName" Category="Output Files" Switch="Fo">
  <StringProperty.DisplayName>
    <sys:String>Object File Name</sys:String>
  </StringProperty.DisplayName>
  <StringProperty.Description>
    <sys:String>Specifies a name to override the default object file name; can be file or directory name.(/Fo[name])</sys:String>
  </StringProperty.Description>
</StringProperty>
```
Прежде чем описал большинство атрибутов в фрагменте. Новые шаблоны являются подтип, категории и коммутатора.

   1. **Подтип** доступна только для атрибута **StringProperty** и **StringListProperty**; он предоставляет контекстные сведения. Например значение «file» указывает, что свойство представляет путь к файлу. Контекстная информация используется для расширения возможностей редактирования, предоставляя как редактор свойств, позволяющий пользователю выбрать файл визуально проводника Windows.

   2. **Категория:** этот код объявляет категории, в которой принадлежит это свойство. Попробуйте найти это свойство в списке **выходные файлы** категории в пользовательском Интерфейсе.

   В. **Ключ:** при правило представляет инструмент — средство с компилятора в данном случае — большинство свойств правила передаются как коммутаторы средству исполняемый файл во время построения. Значение этого атрибута указывает параметр литерала для использования. Свойство выше указывает, что его параметр должен быть **Fo**. В сочетании с **SwitchPrefix** атрибут на основе родителя, правило, это свойство передается исполняемый файл как **/Fo "Отладка\"**  (отображается в командной строке для C/C++ на странице свойств пользовательского интерфейса).

   Другие атрибуты свойства включают:

   Г. **Видимый:** Если по некоторым причинам не требуется свойство должно отображаться на страницах свойств (но, возможно, по-прежнему доступно во время сборки), присвойте этому атрибуту значение false.

   Д. **Только для чтения:** Если вы хотите предоставить только для чтения представление значения этого свойства на страницах свойств, необходимо присвоить этому атрибуту значение true.

   f. **IncludeInCommandLine:** некоторые свойства не требуется передать инструменту во время построения. Задав этому атрибуту значение false сделает невозможным его передачей.


