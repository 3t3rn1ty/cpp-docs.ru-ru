---
title: Развертывание в Visual C++ | Документы Microsoft
ms.custom: ''
ms.date: 05/11/2018
ms.technology:
- cpp-ide
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- deploying applications [C++]
- application deployment [C++]
ms.assetid: d4b4ffc0-d2bd-4e4a-84a6-62f1c26f6a09
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: 5b9dfdcdce618df3f2bfec64892f62aec20b6db9
ms.sourcegitcommit: 19a108b4b30e93a9ad5394844c798490cb3e2945
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2018
---
# <a name="deployment-in-visual-c"></a>Развертывание в Visual C++

Установку приложения на компьютере, отличном от компьютера разработки, называется *развертывания*. При развертывании приложения Visual C++ на другом компьютере, необходимо установить приложение и файлы всех необходимых библиотек, от которых он зависит. Visual Studio предоставляет три способа развертывания библиотек Visual C++ вместе с приложением: *центральное развертывание*, *локальное развертывание*, и *статическое связывание*. Централизованное развертывание помещает файлы библиотеки Windows в каталоге, где службы Центра обновления Windows может обновить их автоматически. Локальное развертывание помещает файлы библиотек, в том же каталоге, что и приложение. Необходимо повторно развернуть все локально разворачиваемых библиотек вручную обновлять их. Статическое связывание привязывает кода библиотеки в приложение. Необходимо перекомпилировать и повторно развернуть приложение, чтобы воспользоваться преимуществами все обновления в библиотеки, при использовании статического связывания.

В Visual Studio 2015 библиотеку времени выполнения Microsoft C были подвергнуты рефакторингу в локальной библиотеке конкретной версии компонентов и новую библиотеку универсальная среда выполнения C, теперь является частью Windows. Сведения о развертывании универсальная CRT см. в разделе [универсальная CRT развертывания](universal-crt-deployment.md).

## <a name="central-deployment"></a>Центральное развертывание

В центральное развертывание библиотеки DLL-файлы устанавливаются в папке Windows\System32 или на x64 файлы библиотеки 32-разрядных систем, в каталоге Windows\SysWow64. Microsoft автоматически обновляет свои библиотеки, развернутые централизованно. Для библиотек Visual C++, которые локально развернутых или статически привязаны необходимо предоставить обновления.

Для централизованного развертывания библиотек Visual C++, можно использовать один из этих двух источников для файлов для установки:

- *Распространяемый пакет* файлы, которые являются автономного исполняемые файлы командной строки, содержащие все библиотеки Visual C++ распространяемого пакета в сжатом виде, или

- *Распространяемые модули слияния* (MSM-файлы), который можно использовать для развертывания определенных библиотек и которые включены в файл установщика Windows (.msi) вашего приложения.

Файл распространяемого пакета устанавливает все библиотеки Visual C++ для конкретной системной архитектуры. Например если ваше приложение построено для x64, vcredist_x64.exe распространяемого пакета можно использовать для установки библиотек Visual C++, которые использует приложение. Вы можете программировать установщик приложения для запуска пакета в качестве необходимого компонента перед установкой приложения.

Модуль слияния обеспечивает включение логики установки для определенную библиотеку Visual C++ в файле настройки приложения установщика Windows. Можно включить столько или столько модулей слияния требуется для приложения. Модули слияния можно используйте, когда необходимо минимизировать размер развертывания двоичных файлов.

Поскольку централизованное развертывание с помощью распространяемого пакета или модули слияния позволяет использовать Центр обновления Windows для автоматического обновления библиотек Visual C++, мы рекомендуем использовать библиотеку DLL в приложении вместо статических библиотек и использовать центра Развертывание вместо локального развертывания.

## <a name="local-deployment"></a>Локальное развертывание

В локальном развертывании файлы библиотек устанавливаются в папку приложения вместе с исполняемым файлом. Можно установить разные версии библиотек распространяемый пакет Visual C++ в той же папке, так как имя файла для каждой версии включает номер версии. Например версия 12 библиотеки времени выполнения C++ является msvcp120.dll и версии 14 — msvcp140.dll.

Библиотеки могут быть распределены между несколькими дополнительные библиотеки DLL, известный как *точка библиотеки*. Например некоторые функциональные возможности в стандартной библиотеке выпущена в Visual Studio 2017 г. версия 15,6 добавлен в msvcp140_1.dll, preverve msvcp140.dll совместимость ABI. Если вы используете версию Visual Studio 2017 г 15,6 (набор инструментов 14.13) или более поздних версиях из Visual Studio 2017 г., может потребоваться локально развернуть эти библиотеки точки, а также основной библиотеки. Эти библиотеки отдельные точки затем объединяются в следующей основной версии базовой библиотеки при изменении интерфейс ABI.

Поскольку корпорация Майкрософт не может автоматически обновления локально развернуты библиотеки Visual C++, мы не рекомендуем локального развертывания этих библиотек. Если вы решите использовать локальное развертывание распространяемых библиотек, мы рекомендуем реализовать собственный метод автоматического обновления локально разворачиваемых библиотек.

## <a name="static-linking"></a>Статическое связывание

Наряду с динамически связанных библиотек Visual Studio предоставляет большую часть своих библиотек как статические библиотеки. Можно статически связать статической библиотеки для приложения, то есть, связывания библиотеки объектного кода непосредственно в приложение. Это создает один двоичный без зависимость DLL, не нужно развертывать файлы библиотек Visual C++ отдельно. Однако не рекомендуется этот подход, поскольку статически связанные библиотеки не могут обновляться на месте. Если используется статическое связывание и необходимо обновить связанную библиотеку, потребуется выполнить повторную компиляцию и повторное развертывание приложения.

## <a name="troubleshooting-deployment-issues"></a>Устранение неполадок развертывания

Порядок загрузки библиотек Visual C++, зависит от системы. Чтобы выявить причины неполадок загрузчика, используйте средство depends.exe или where.exe. Дополнительные сведения см. в разделе [порядок поиска библиотек динамической компоновки (Windows)](http://msdn.microsoft.com/library/windows/desktop/ms682586.aspx).

## <a name="see-also"></a>См. также

- [Развертывание приложений для настольных систем](../ide/deploying-native-desktop-applications-visual-cpp.md)
- [Универсальный CRT развертывания](universal-crt-deployment.md)
