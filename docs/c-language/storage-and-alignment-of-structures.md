---
title: "Хранение и выравнивание структур | Документация Майкрософт"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-language
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
helpviewer_keywords:
- alignment of structures
- structure storage
- storing structures
- packing structures
ms.assetid: 60ff292f-2595-4f37-ae00-4c4b4f047196
caps.latest.revision: 8
author: mikeblome
ms.author: mblome
manager: ghogen
ms.translationtype: HT
ms.sourcegitcommit: 16d1bf59dfd4b3ef5f037aed9c0f6febfdf1a2e8
ms.openlocfilehash: d9c09137da32c7ef9d42f0302087379af922652f
ms.contentlocale: ru-ru
ms.lasthandoff: 10/09/2017

---
# <a name="storage-and-alignment-of-structures"></a>Хранение и выравнивание структур
**Блок, относящийся только к системам Майкрософт**  
  
 Структурные элементы сохраняются последовательно, в порядке объявления: первый элемент имеет самый низкий адрес памяти, а последний — наивысший.  
  
 У каждого объекта есть элемент *alignment-requirement*. Для структур таким требованием является крупнейший из элементов таких структур. Каждому объекту задается элемент *offset*, чтобы было верно следующее выражение:  
  
 *offset* `%` *alignment-requirement* `==` 0  
  
 Смежные битовые поля упакованы в тот же одно-, двух- или четырехбайтовый модуль распределения, если целочисленные типы имеют тот же размер и если следующее битовое поле помещается в текущий блок распределения, не пересекая границ, установленных общими требованиями выравнивания битовых полей.  
  
 Для экономии места или соответствия существующим структурам данных может потребоваться сохранить структуры более или менее компактно. [/Zp](../build/reference/zp-struct-member-alignment.md)[*n*] параметр компилятора и [#pragma pack](../preprocessor/pack.md) управления как структуру данных «упакована» в памяти. При использовании параметра /Zp [*n*] параметр, где  *n*  — 1, 2, 4, 8 или 16, каждый элемент структуры после первого хранится в байтовом диапазоне, — это требование к выравниванию поля или размер пакета (*n*), какое значение меньше. В виде формулы байтовые границы можно выразить следующим образом:  
  
```  
min( n, sizeof( item ) )  
```  
  
 где  *n*  является размер пакета, выраженный с параметром/Zp [*n*] параметр и *элемент* — это элемент структуры. Размер пакета по умолчанию — /Zp8.  
  
 Чтобы использовать директиву pragma `pack` для указания упаковки, отличной от заданной в командной строке для определенной структуры, разместите директиву pragma `pack`, где размер пакета — 1, 2, 4, 8 или 16, перед структурой. Для возобновления компоновки в соответствии с инструкциями с командной строки задайте директиву pragma `pack` без аргументов.  
  
 Битовые поля по умолчанию имеют размер **long** для компилятора Microsoft C. Элементы структуры выравниваются по размеру типа или параметра /Zp [*n*] размер, какое значение меньше. Размер по умолчанию — 4.  
  
 **Завершение блока, относящегося только к системам Майкрософт**  
  
## <a name="see-also"></a>См. также  
 [Объявления структур](../c-language/structure-declarations.md)
