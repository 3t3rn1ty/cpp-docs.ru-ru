---
title: "Использование wmain | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
  - "C"
helpviewer_keywords: 
  - "wmain - функция"
ms.assetid: d0300812-adc4-40c6-bba3-b2da25468c80
caps.latest.revision: 11
caps.handback.revision: 11
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Использование wmain
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

**Блок, относящийся только к системам Microsoft**  
  
 В модели программирования Юникода можно определить широкосимвольную версию функции **main**.  Используйте **wmain** вместо **main**, если требуется создать переносимый код, который соответствует модели программирования Юникода.  
  
## Синтаксис  
  
```  
wmain( int argc, wchar_t *argv[ ], wchar_t *envp[ ] )  
```  
  
## Заметки  
 Формальные параметры для функции **wmain** определяются в том же формате, что и для функции **main**.  Затем можно передать в качестве аргументов "широкие" символы и указатель среды кодировки Юникод \(необязательно\) в программу.  Параметры `argv` и `envp` функции **wmain** относятся к типу `wchar_t*`.  Например:  
  
 Если программа использует функцию **main**, среда многобайтовой кодировки создается библиотекой времени выполнения при запуске программы.  Копия среды для Юникода создается только при необходимости \(например, для вызова функции `_wgetenv` или `_wputenv`\).  При первом вызове `_wputenv` или `_wgetenv`, если среда многобайтовой кодировки \(MBCS\) уже существует, создается соответствующая среда широкосимвольной строки, на которую затем указывает глобальная переменная `_wenviron`, представляющая собой широкосимвольную версию глобальной переменной `_environ`.  В этот момент две копии среды \(для многобайтовой кодировки и Юникода\) существуют одновременно и поддерживаются операционной системой в течение всего срока жизни программы.  
  
 Аналогичным образом, если программа использует функцию **wmain**, при запуске программы создается среда Юникода и на нее указывает глобальная переменная `_wenviron`.  Среда многобайтовой кодировки MBCS \(ASCII\) создается при первом вызове функции `_putenv` или `getenv`, и на нее указывает глобальная переменная `_environ`.  
  
 Дополнительные сведения о среде многобайтовой кодировки MBCS см. в разделе [Интернационализация](../c-runtime-library/internationalization.md) в *Справочнике по библиотеке времени выполнения.*  
  
 **Завершение блока, относящегося только к системам Microsoft**  
  
## См. также  
 [Функция main и выполнение программ](../c-language/main-function-and-program-execution.md)