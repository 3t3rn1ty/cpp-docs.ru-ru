---
title: "Поддержка Юникода и многобайтовой кодировки | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "reference"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "MFC [C++], поддержка набор символов"
  - "MBCS [C++], строки и поддержка MFC"
  - "строки [C++], поддержка MBCS в MFC"
  - "наборы символов [C++], многобайтовые"
  - "Юникод [C++], строки MFC"
  - "Юникод [C++], строковые объекты"
  - "строки [C++], Юникод"
  - "строки [C++], поддержка набор символов"
ms.assetid: 44b3193b-c92d-40c5-9fa8-5774da303cce
caps.latest.revision: 17
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 13
---
# Поддержка Юникода и многобайтовой кодировки
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

В некоторых языках, например, китайский, японский и имеют объемные кодировки.  Для поддержки программирование для этих рынков библиотеки Microsoft Foundation Class \(MFC\) включено для 2 различных подходов к обработке объемные кодировки:  
  
-   [Unicode](#_core_mfc_support_for_unicode_strings)  
  
-   [Многобайтовые кодировки \(многобайтовая кодировка\)](#_core_mfc_support_for_mbcs_strings)  
  
 Необходимо использовать Юникода для всех новых проектов.  
  
##  <a name="_core_mfc_support_for_unicode_strings"></a> Поддержка MFC для строк юникода  
 Все библиотеки классов в включена для символов юникода и строк.  В частности, класс [CString](../atl-mfc-shared/reference/cstringt-class.md) поддерживает юникод.  
  
|||||  
|-|-|-|-|  
|UAFXCW.LIB|UAFXCW.PDB|UAFXCWD.LIB|UAFXCWD.PDB|  
|*xx* U.LIB MFC|*xx* U.PDB MFC|*xx* U.DLL MFC|*xx* UD.LIB MFC|  
|*xx* UD.PDB MFC|*xx* UD.DLL MFC|MFCS *xx* U.LIB|MFCS *xx* U.PDB|  
|MFCS *xx* UD.LIB|MFCS *xx* UD.PDB|MFCM *xx* U.LIB|MFCM *xx* U.PDB|  
|MFCM *xx* U.DLL|MFCM *xx* UD.LIB|MFCM *xx* UD.PDB|MFCM *xx* UD.DLL|  
  
 \(*xx* — номер версии файла; например, «80» означает версию 8.0\).  
  
 `CString` зависит от типа данных `TCHAR`.  Если символ `_UNICODE` указан для построения программы, `TCHAR` определяется как тип `wchar_t`, 16 — тип кодирования символов.  В противном случае — значение `TCHAR` задано как `char`, существует 8 бит кодирование символов.  Поэтому в юникод разрядных `CString`, состоящее из 16 символов.  Без, он состоит из символов юникода типа `char`.  
  
 Щелкните программирование юникода приложения, также:  
  
-   Использовать макрос `_T` должна добавляться к строковым литералам кода, чтобы быть будет в юникод.  
  
-   При передаче строки, внимание оплаты в требуют ли аргументы функции длина в символах или длину в байтах.  Различие очень важно при использовании строк юникода.  
  
-   Использовать переносимые версии функций среды выполнения C строкового обработки.  
  
-   Используйте следующие типы данных для указателей символов и символов:  
  
    -   `TCHAR`, где можно использовать `char`.  
  
    -   `LPTSTR`, где можно использовать `char*`.  
  
    -   `LPCTSTR`, где можно использовать `const char*`.  `CString` предоставляет оператор `LPCTSTR` преобразование между `CString` и `LPCTSTR`.  
  
 конструкторы `CString`, операторы присваивания и операторы сравнения, также юникод языковых и региональных параметров.  
  
 Дополнительные сведения о юникоде программировании см. в разделе [Разделы юникода](../mfc/unicode-in-mfc.md).  [Ссылка библиотеки времени выполнения](../c-runtime-library/c-run-time-library-reference.md) определяет переносимые версии всех своих функций обработки строк.  Категория см. в разделе [Интернационализация](../c-runtime-library/internationalization.md).  
  
##  <a name="_core_mfc_support_for_mbcs_strings"></a> Поддержка MFC для строк многобайтовой кодировки  
  
> [!WARNING]
>  Строки многобайтовой кодировки традиционная технология и не должны использоваться в новых проектах.  Следующие сведения предоставляются для сценариев, в которых необходимо сохранить существующий код, использующих многобайтовые кодировки, и она не подходит для обновления кода для использования юникода.  
  
 Библиотека классов также включена для многобайтовых кодировок, но только для двухбайтовых кодировках \(DBCS\) \(DBCS\).  
  
> [!IMPORTANT]
>  В [!INCLUDE[vs_dev12](../atl-mfc-shared/includes/vs_dev12_md.md)] и более поздних версиях, версии многобайтовой кодировки MFC DLL доступны как свободные надстройки в Visual Studio с сайта загрузки MSDN.  Дополнительные сведения см. в разделе [Надстройка многобайтовой кодировки библиотеки DLL MFC](../mfc/mfc-mbcs-dll-add-on.md).  
  
 В многобайтовой кодировке, символ может быть один или два байта ширину.  Если занимает 2 байта, его первый байт специальный «старшего», будет из указанного диапазона, в зависимости от того, кодовая страница в использовании.  Принято вместе, и «младшие байты» определяют уникальные кодирование символов.  
  
 Если символ `_MBCS` указан для построения программы, типа `TCHAR`, в котором `CString` сопоставляет, основанных на `char`.  Этот метод к событию, чтобы определить, какие байты в `CString` старших байтов и что младшие байты.  Предоставляет функции библиотеки времени выполнения C, помогающие определить это.  
  
 В DBCS, указанная строка может содержать однобайтовые символы ANSI, все двухбайтовые символы, или сочетание 2.  Эти возможности требуют специального ухода при анализе строки.  Это включает объекты `CString`.  
  
> [!NOTE]
>  Сериализация строки юникода в MFC может считывать Юникода и строки многобайтовой кодировки вне зависимости от того, версия приложения, которая выполняется.  Файлы данных переносимые между версиями многобайтовой кодировки юникод и программы.  
  
 версии универсального текста» использования функции\-члены `CString` «специальные функции времени выполнения C — сделать вызов, или они используют юникод языковых функций.  Поэтому, например, если функция `CString` обычно вызыватьTfа будет `strcmp`, она вызывает соответствующие функции `_tcscmp` универсальный команды вместо текста.  В зависимости от того как символы `_MBCS` и `_UNICODE` определены, сопоставления `_tcscmp` следующим образом:  
  
|||  
|-|-|  
|`_MBCS` указана|`_mbscmp`|  
|`_UNICODE` указана|`wcscmp`|  
|Нулевой символ не определен|`strcmp`|  
  
> [!NOTE]
>  Символы `_MBCS` и `_UNICODE` являются взаимоисключающими.  
  
 Сопоставления функции Универсальный текста команды для всех этих процедур выполнения обработки рассматриваются в разделе [Справочник по библиотеке времени выполнения C](../c-runtime-library/c-run-time-library-reference.md).  В частности, см. в разделе [Интернационализация](../c-runtime-library/internationalization.md).  
  
 Аналогично, методы `CString` реализованы с помощью «универсальных» сопоставлений типов данных.  Для включения и многобайтовые кодировки и юникод MFC использует `TCHAR` для `char`, `LPTSTR`, `char*` и `LPCTSTR` для `const char*`.  Они предоставляют правильные сопоставления для или многобайтовой кодировки или юникода.  
  
## См. также  
 [Строки](../atl-mfc-shared/strings-atl-mfc.md)   
 [Управление строками](../c-runtime-library/string-manipulation-crt.md)