---
title: "Юникода и многобайтовой кодировки (MBCS) поддержка набора | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: cpp-windows
ms.tgt_pltfrm: 
ms.topic: reference
dev_langs: C++
helpviewer_keywords:
- MFC [C++], character set support
- MBCS [C++], strings and MFC support
- strings [C++], MBCS support in MFC
- character sets [C++], multibyte
- Unicode [C++], MFC strings
- Unicode [C++], string objects
- strings [C++], Unicode
- strings [C++], character set support
ms.assetid: 44b3193b-c92d-40c5-9fa8-5774da303cce
caps.latest.revision: "17"
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload: cplusplus
ms.openlocfilehash: ea35f36012eb893d8784c626c533690e97b517e5
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="unicode-and-multibyte-character-set-mbcs-support"></a>Поддержка Юникода и многобайтовой кодировки
Некоторые языки, например, японский и китайский имеют объемные кодировки. Для поддержки программирования для этих рынков, библиотеки классов Microsoft Foundation (MFC) включено для два разных подхода к обработке объемные кодировки:  
  
-   [Юникод](#_core_mfc_support_for_unicode_strings)  
  
-   [В многобайтовой кодировке (MBCS)](#_core_mfc_support_for_mbcs_strings)  
  
 Следует использовать Юникод для всех новых разработках.  
  
##  <a name="_core_mfc_support_for_unicode_strings"></a>Поддержка MFC для строки в Юникоде  
 Полную библиотеку классов условно включена для символов Юникода или строки. В частности, класс [CString](../atl-mfc-shared/reference/cstringt-class.md) поддержкой Юникода.  
  
|||||  
|-|-|-|-|  
|UAFXCW. LIB|UAFXCW. PDB-ФАЙЛ|UAFXCWD. LIB|UAFXCWD. PDB-ФАЙЛ|  
|MFC*xx*U.LIB|MFC*xx*U.PDB|MFC*xx*U.DLL|MFC*xx*UD. LIB|  
|MFC*xx*UD. PDB-ФАЙЛ|MFC*xx*UD. БИБЛИОТЕКИ DLL|MFCS*xx*U.LIB|MFCS*xx*U.PDB|  
|MFCS*xx*UD. LIB|MFCS*xx*UD. PDB-ФАЙЛ|MFCM*xx*U.LIB|MFCM*xx*U.PDB|  
|MFCM*xx*U.DLL|MFCM*xx*UD. LIB|MFCM*xx*UD. PDB-ФАЙЛ|MFCM*xx*UD. БИБЛИОТЕКИ DLL|  
  
 (*xx* представляет номер версии файла, например, "80" означает версии 8.0.)  
  
 `CString`на основе `TCHAR` тип данных. Если символ `_UNICODE` определен для построения программы, `TCHAR` определен как тип `wchar_t`, 16-разрядный символ, тип кодировки. В противном случае `TCHAR` определяется как `char`, обычный 8-разрядное кодировку. Таким образом, в Юникод `CString` состоит из 16-битовых символов. Без Юникода, он состоит из символов типа `char`.  
  
 Для завершения Юникод программирование приложения, необходимо также:  
  
-   Используйте `_T` макрос условно код строковых литералов переносить в Юникод.  
  
-   При передаче строки, обратите внимание на ли аргументов функции требуется длина в символах или длина в байтах. Различие очень важно, если вы используете строки в Юникоде.  
  
-   Использование переносимой версии функций C во время выполнения обработки строк.  
  
-   Используйте следующие типы данных для символов и указатели на расширенные символы:  
  
    -   `TCHAR`Когда используется `char`.  
  
    -   `LPTSTR`Когда используется `char*`.  
  
    -   `LPCTSTR`Когда используется `const char*`. `CString`предоставляет оператор `LPCTSTR` для преобразования между `CString` и `LPCTSTR`.  
  
 `CString`также предоставляет конструкторы поддерживают Юникод, операторы присваивания и операторы сравнения.  
  
 Дополнительные сведения о программировании Юникода см. в разделе [разделы Юникода](../mfc/unicode-in-mfc.md). [Справочник по библиотеке времени выполнения](../c-runtime-library/c-run-time-library-reference.md) определяет переносимой версии всех функций обработки строк. Просмотреть категорию [интернационализации](../c-runtime-library/internationalization.md).  
  
##  <a name="_core_mfc_support_for_mbcs_strings"></a>Поддержка MFC для Многобайтовой строки  
  
 Библиотека классов включена для многобайтовых кодировок, но только для двухбайтовых символов задает (DBCS).  
  
 В многобайтовой кодировки может содержать один или два байта. Если это два байта, его первый байт является специальной «старший байт», выбранный из определенного диапазона, в зависимости от того, какой код страницы уже используется. В совокупности открывающий и «младший байт» укажите уникальный кодировка.  
  
 Если символ `_MBCS` определен для построения программы, тип `TCHAR`, на котором `CString` основывается, сопоставляется `char`. Можно определить, какие байты в `CString` является старшие байты, а какая — младший байт. Библиотеки времени выполнения C предоставляет функции, чтобы определить это.  
  
 В кодировке DBCS заданной строке может содержать все однобайтовых знаков ANSI, все символы двухбайтовой или сочетание двух. Эти возможности требуется особое внимание при синтаксическом анализе строки. Сюда входят `CString` объектов.  
  
> [!NOTE]
>  Сериализацию строки Юникода в MFC можно считать Юникод и многобайтовая Кодировка строки, независимо от того, какая версия приложения, которое выполняется. Файлы данных могут переноситься между Юникод и многобайтовая Кодировка версии программы.  
  
 `CString`функции-члены используются специальные «универсальный текст» версии функций времени выполнения C, которые вызываются или использовании функции поддерживают Юникод. Таким образом, например если `CString` обычно вызывается функция `strcmp`, она вызывает соответствующий универсальная текстовая функция `_tcscmp` вместо него. В зависимости от того, как символы `_MBCS` и `_UNICODE` определены, `_tcscmp` сопоставляет следующим образом:  
  
|||  
|-|-|  
|`_MBCS`определенные|`_mbscmp`|  
|`_UNICODE`определенные|`wcscmp`|  
|Ни один символ определен|`strcmp`|  
  
> [!NOTE]
>  Символы `_MBCS` и `_UNICODE` являются взаимоисключающими.  
  
 Сопоставления универсальных текстовых функций для всех подпрограммы обработки строк во время выполнения рассматриваются в [Справочник по библиотеке времени выполнения C](../c-runtime-library/c-run-time-library-reference.md). В частности, в разделе [интернационализации](../c-runtime-library/internationalization.md).  
  
 Аналогичным образом `CString` методы реализуются с помощью сопоставления типов данных «универсальный». Чтобы включить многобайтовой Кодировки и Юникода, MFC использует `TCHAR` для `char`, `LPTSTR` для `char*`, и `LPCTSTR` для `const char*`. Это обеспечивает правильного сопоставления для MBCS или Юникод.  
  
## <a name="see-also"></a>См. также  
 [Строки (ATL и MFC)](../atl-mfc-shared/strings-atl-mfc.md)   
 [Операции со строками](../c-runtime-library/string-manipulation-crt.md)

