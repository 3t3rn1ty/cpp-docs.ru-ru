---
title: Программы и компоновка (C++) | Документы Microsoft
ms.custom: ''
ms.date: 04/09/2018
ms.technology:
- cpp-language
ms.topic: language-reference
dev_langs:
- C++
ms.assetid: a6493ba0-24e2-4c89-956e-9da1dea660cb
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 2dba8698461636e292771fc1e5a4f5ac0a633e73
ms.sourcegitcommit: d06966efce25c0e66286c8047726ffe743ea6be0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2018
ms.locfileid: "36238673"
---
# <a name="program-and-linkage-c"></a>Программа и компоновка (C++)

В программе на C++ *символ*, например имя переменной или функции, можно объявить любое число раз в пределах ее области действия, но его можно определить только один раз. Это правило одного определения (ODR). Объект *объявление* вводит (или повторно вводит) имя в программу. Объект *определение* вводит имя и в случае с переменной, явно инициализирует его. Объект *определение функции* состоит из подписи и тело функции.

Существуют следующие объявления:

```cpp
int i;
int f(int x);
```

Существуют следующие определения:

```cpp
int i{42};
int f(int x){ return x * i; }
```

Программа состоит из одного или нескольких *записи преобразования*. Записи преобразования состоит в файле реализации (.cpp, .cxx, т. д.) и всех заголовков (.h, .hpp, т. д.), он включает в себя прямо или косвенно. Каждый блок трансляции независимо друг от друга компилируется компилятором, после чего компоновщик объединяет скомпилированных преобразования в единую *программы*. Нарушение правила операционными данными обычно отображается как ошибках компоновщика после двух разных определений тем же именем в разных записях преобразования.

Как правило, чтобы сделать переменную видимой в нескольких файлах рекомендуется поместить его в файл заголовка и добавить #include в каждый CPP-файле, который требует объявления. Добавив *защита включения* вокруг содержимое заголовка, убедитесь, что имена, он объявляет определяются только один раз.

Однако в некоторых случаях может потребоваться объявления глобальной переменной или класса в CPP-файле. В таких случаях необходимо заставляют компилятор и компоновщик, применяется ли имя объекта только для одного файла или ко всем файлам.

## <a name="linkage-vs-scope"></a>Компоновка и области

Понятие *компоновка* ссылается на видимость глобальные символы (например, переменных, имена типов и функции), в рамках программы в целом в записи преобразования. Понятие *область* относится к символам, которые объявлены внутри блока, таких как пространства имен, класса или тело функции. Такие символы видны только в пределах области действия, в котором они определены; Понятие компоновка не применяется к ним. 

## <a name="external-vs-internal-linkage"></a>Внешние и внутренние связи

Объект *освободить функция* — функция, которая определена в глобальной или области видимости пространства имен. Non-const глобальные переменные и функции по умолчанию имеют *внешней компоновки*; они видимы из любой записи преобразования в программе. Таким образом нет других глобальных объектов (переменной, определение класса, т. д.) может иметь это имя. Символ с *внутренней компоновкой* или *без компоновки* видимы только в пределах записи преобразования, в котором она объявлена. Если имя содержит внутреннюю компоновку, в другой записи преобразования может существовать тем же именем. Переменные, объявленные с определения класса или тело функции не имеют компоновки. 

Можно принудительно на глобальное имя внутренней компоновкой, явно объявив ее в качестве **статических**. Это ограничивает его видимость для той же записи преобразования, в котором она объявлена. Обратите внимание, что в этом контексте **статического** означает нечто иное, чем при применяться к локальным переменным.

Следующие объекты имеют внутреннюю компоновку по умолчанию:
- const объектов
- объекты constexpr
- определения типов
- статические объекты в области видимости пространства имен

Чтобы предоставить const внешнюю компоновку объекта, он объявляется как **extern** и присвоить ей значение:

```cpp
extern const int value = 42;
```

В разделе [extern](extern-cpp.md) для получения дополнительной информации.

## <a name="see-also"></a>См. также

 [Основные понятия](../cpp/basic-concepts-cpp.md)