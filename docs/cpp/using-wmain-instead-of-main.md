---
title: "Использование wmain вместо main | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "language-reference"
f1_keywords: 
  - "wmain"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "main - функция, или wmain"
  - "wmain - функция"
ms.assetid: 7abb1257-b85c-413a-b913-d45b1582a71d
caps.latest.revision: 8
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 8
---
# Использование wmain вместо main
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

## Блок, относящийся только к системам Microsoft  
 В модели программирования Юникода можно определить широкосимвольную версию функции **main**.  Используйте **wmain** вместо **main**, если требуется создать переносимый код, который соответствует спецификации Юникода.  
  
 Формальные параметры для функции **wmain** определяются в том же формате, что и для функции **main**.  Затем можно передать в качестве аргументов "широкие" символы и указатель среды кодировки Юникод \(необязательно\) в программу.  Параметры `argv` и `envp` функции **wmain** относятся к типу `wchar_t*`.  
  
 Если программа использует функцию **main**, среда многобайтовой кодировки создается операционной системой при запуске программы.  Широкосимвольная копия среды создается только при необходимости \(например, вызовом функций [\_wgetenv](../c-runtime-library/reference/getenv-wgetenv.md) или [\_wputenv](../c-runtime-library/reference/putenv-wputenv.md)\).  При первом вызове `_wputenv` или `_wgetenv`, если среда многобайтовой кодировки \(MBCS\) уже существует, создается соответствующая среда широкосимвольной строки, на которую затем указывает глобальная переменная `_wenviron`, представляющая собой широкосимвольную версию глобальной переменной `_environ`.  В этот момент две копии среды \(для многобайтовой кодировки и Юникода\) существуют одновременно и поддерживаются операционной системой в течение всего срока жизни программы.  
  
 Аналогично, если программа использует функцию **wmain**, среда MBCS \(ASCII\) создается при первом вызове функции `_putenv` или `getenv`, и на нее указывает глобальная переменная `_environ`.  
  
 Дополнительные сведения о среде MBCS см. в разделе [Однобайтовые и многобайтовые кодировки](../c-runtime-library/single-byte-and-multibyte-character-sets.md) в справочном разделе *Библиотека времени выполнения*.  
  
## Завершение блока, относящегося только к системам Microsoft  
  
## См. также  
 [Функция main. Запуск программы](../Topic/main:%20Program%20Startup.md)