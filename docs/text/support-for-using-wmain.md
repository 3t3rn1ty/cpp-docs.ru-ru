---
title: "Поддержка использования wmain | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "wWinMain"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "широкие символы [C++], wmain - функция"
  - "wmain - функция"
  - "wWinMain - функция"
ms.assetid: 41213c41-668c-40a4-8a1e-77d9eded720d
caps.latest.revision: 9
caps.handback.revision: 9
author: "ghogen"
ms.author: "ghogen"
manager: "ghogen"
---
# Поддержка использования wmain
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Visual C\+\+ поддерживает определение функции **wmain** и передачу "широких" символов в качестве аргументов в приложение, представленное в формате Юникода.  Формальные параметры для функции **wmain** определяются в формате, аналогичном функции **main**.  Затем можно передать в качестве аргументов "широкие" символы и указатель среды кодировки Юникод \(необязательно\) в программу.  Параметры `argv` и `envp` функции **wmain** относятся к типу `wchar_t*`.  Примеры.  
  
```  
wmain( int argc, wchar_t *argv[ ], wchar_t *envp[ ] )  
```  
  
> [!NOTE]
>  В приложениях MFC с кодировкой Юникод в качестве точки входа используется **wWinMain**.  В этом случае `CWinApp::m_lpCmdLine` является строкой Юникода.  Убедитесь, что параметр компилятора [\/ENTRY](../build/reference/entry-entry-point-symbol.md) установлен в значение **wWinMainCRTStartup**.  
  
 Если программа использует функцию **main**, среда многобайтовой кодировки создается библиотекой времени выполнения при запуске программы.  Копия среды для Юникода создается только при необходимости \(например, для вызова функции `_wgetenv` или `_wputenv`\).  При первом вызове функции `_wputenv` или `_wgetenv`, если среда многобайтовой кодировки уже существует, создается среда для поддержки строк Юникода.  На эту среду впоследствии указывает глобальная переменная `_wenviron`, которая является версией глобальной переменной `_environ` в формате Юникода.  В этот момент две копии среды \(для многобайтовой кодировки и Юникода\) существуют одновременно и поддерживаются системой времени выполнения в течение всего срока жизни программы.  
  
 Аналогичным образом, если программа использует функцию **wmain**, при запуске программы создается среда Юникода и на нее указывает глобальная переменная `_wenviron`.  Среда многобайтовой кодировки \(ASCII\) создается при первом вызове функции `_putenv` или `getenv`, и на нее указывает глобальная переменная `_environ`.  
  
## См. также  
 [Поддержка Юникода](../text/support-for-unicode.md)   
 [Общие сведения о программировании Юникода](../text/unicode-programming-summary.md)   
 [Функция WinMain](http://msdn.microsoft.com/library/windows/desktop/ms633559)