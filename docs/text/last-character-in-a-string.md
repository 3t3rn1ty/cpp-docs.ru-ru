---
title: "Последний символ в строке | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "последний знак в строке"
  - "MBCS [C++], последний знак в строке"
ms.assetid: 0a180376-4e55-41e8-9c64-539c7b6d8047
caps.latest.revision: 7
caps.handback.revision: 7
author: "ghogen"
ms.author: "ghogen"
manager: "ghogen"
---
# Последний символ в строке
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Рекомендации:  
  
-   В большинстве случаев диапазоны младшего байта перекрывают набор знаков ASCII.  В связи с этим обеспечивается безопасность побайтового поиска любых управляющих символов \(менее 32\).  
  
-   Рассмотрим следующую строку кода, в которой должно проверяться, является ли последний знак строки знаком обратной косой черты:  
  
    ```  
    if ( sz[ strlen( sz ) - 1 ] == '\\' )    // Is last character a '\'?  
        // . . .  
    ```  
  
     Поскольку функция `strlen` не поддерживает многобайтовую кодировку, в результате ее выполнения возвращается число байтов, а не число знаков, в многобайтовой строке.  Также обратите внимание, что при использовании некоторых кодовых страниц \(например 932\) знак "\\" \(0x5c\) является допустимым младшим байтом \(`sz` — строка C\).  
  
     Чтобы устранить эту ошибку, можно изменить код следующим образом:  
  
    ```  
    char *pLast;  
    pLast = _mbsrchr( sz, '\\' );    // find last occurrence of '\' in sz  
    if ( pLast && ( *_mbsinc( pLast ) == '\0' ) )  
        // . . .  
    ```  
  
     В этом коде используются функции многобайтовой кодировки `_mbsrchr` и `_mbsinc`.  Поскольку эти функции поддерживают многобайтовую кодировку, в них различаются знак "\\" и младший байт "\\".  Если последним знаком строки является нуль \("\\0"\), в этом коде выполняются определенные действия.  
  
## См. также  
 [Советы по программированию многобайтовой кодировки](../Topic/MBCS%20Programming%20Tips.md)   
 [Присваивание символов](../text/character-assignment.md)