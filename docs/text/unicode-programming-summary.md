---
title: "Общие сведения о программировании Юникода | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs: C++
helpviewer_keywords:
- Unicode [C++], programming with
- Unicode [C++], MFC and C run-time functions
ms.assetid: a4c9770f-6c9c-447c-996b-980920288bed
caps.latest.revision: "8"
author: ghogen
ms.author: ghogen
manager: ghogen
ms.workload: cplusplus
ms.openlocfilehash: 2d08fcc502ac7daf97955741d044ebf1e50afab3
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="unicode-programming-summary"></a>Общие сведения о программировании Юникода
Чтобы воспользоваться преимуществами поддержки времени выполнения MFC и C Юникода, необходимо:  
  
-   Определение **_UNICODE**.  
  
     Определите символ **_UNICODE** перед построением программы.  
  
-   Укажите точки входа.  
  
     На **вывода** страница папки "компоновщик" в проекте [страницы свойств](../ide/property-pages-visual-cpp.md) диалогового окна задайте символ точки входа **wWinMainCRTStartup**.  
  
-   Используйте переносимые функции времени выполнения и типы.  
  
     Используйте соответствующие функции времени выполнения C для обработки строк Юникода. Можно использовать **wcs** семейство функций, но, возможно, предпочтете полностью портативный (международный включено) **_TCHAR** макросы. Эти макросы начинаются с **_tcs**; они однозначно заменяют, для **str** функции из семейства. Эти функции подробно описаны в в [интернационализации](../c-runtime-library/internationalization.md) раздел *Справочник по библиотеке времени выполнения*. Дополнительные сведения см. в разделе [универсальные текстовые сопоставления в файле Tchar.h](../text/generic-text-mappings-in-tchar-h.md).  
  
     Используйте **_TCHAR** и типы связанных переносимых данных, описанные в [поддержка Юникода](../text/support-for-unicode.md).  
  
-   Правильно обрабатывать строковые литералы.  
  
     Компилятор Visual C++ интерпретирует код в виде строковых литералов:  
  
    ```  
    L"this is a literal string"  
    ```  
  
     для обозначения строку символов Юникода. Можно использовать тот же префикс для строковых литералов. Используйте **_T** макрос для кодирования строковых литералов в общем случае, поэтому они компилируются как строки Юникода в Юникод или как строки ANSI (включая многобайтовую кодировку MBCS) без Юникода. Например вместо объекта:  
  
    ```  
    pWnd->SetWindowText( "Hello" );  
    ```  
  
     Использование:  
  
    ```  
    pWnd->SetWindowText( _T("Hello") );  
    ```  
  
     С **_UNICODE** определен, **_T** преобразует строковые литералы префиксом L формы; в противном случае **_T** преобразует строку без префикса L.  
  
    > [!TIP]
    >  **_T** макрос идентична `_TEXT` макрос.  
  
-   Будьте внимательны передаче длинных строк в функции.  
  
     Некоторым функциям требуется число символов в строке; другим пользователям требуется число байтов. Например если **_UNICODE** определен, в следующем вызове `CArchive` объект не будет работать (`str` — `CString`):  
  
    ```  
    archive.Write( str, str.GetLength( ) );    // invalid  
    ```  
  
     В приложении Юникод длина позволяет количество символов, но не нужное количество байтов, так как каждый символ занимает 2 байта. Вместо этого необходимо использовать:  
  
    ```  
    archive.Write( str, str.GetLength( ) * sizeof( _TCHAR ) );    // valid  
    ```  
  
     которая указывает правильное число байтов для записи.  
  
     Тем не менее функции-члены MFC, ориентированные на символ, а не ориентированный, работают без дополнительного кодирования:  
  
    ```  
    pDC->TextOut( str, str.GetLength( ) );  
    ```  
  
     `CDC::TextOut`принимает число символов, не является числом байтов.  
  
-   Используйте [fopen_s, _wfopen_s](../c-runtime-library/reference/fopen-s-wfopen-s.md) для открытия файлов в кодировке Юникод.  
  
 Итак, MFC и библиотеки времени выполнения обеспечивают поддержку Юникода программирования в среде Windows 2000:  
  
-   За исключением функций-членов класса базы данных все функции MFC поддерживают Юникод, включая `CString`. `CString`также предоставляет функции преобразования Юникода или ANSI.  
  
-   Библиотека времени выполнения предоставляет версии Юникода для всех функций обработки строк. (Библиотека времени выполнения также предоставляет переносимые версии, подходящие для Юникода или для многобайтовой Кодировки. Это **_tcs** макросы.)  
  
-   Tchar.h предоставляет переносимые типы данных и **_T** макрос для трансляции строковые литералы и символы. Дополнительные сведения см. в разделе [универсальные текстовые сопоставления в файле Tchar.h](../text/generic-text-mappings-in-tchar-h.md).  
  
-   Библиотека времени выполнения предоставляет версию расширенных символов **основной**. Используйте **wmain** сделать приложение поддерживают Юникод.  
  
## <a name="see-also"></a>См. также  
 [Поддержка Юникода](../text/support-for-unicode.md)