---
title: "MFC: Использование классов базы данных с документами и представлениями | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
helpviewer_keywords:
- documents [C++], database applications
- recordsets [C++], documents and views
- CRecordView class, using in database forms
- views [C++], database applications
- forms [C++], database applications
- record views [C++], form-based applications
- document/view architecture [C++], in databases
- database applications [C++], forms
- database classes [C++], MFC
- ODBC recordsets [C++], documents and views
- ODBC [C++], forms
ms.assetid: 83979974-fc63-46ac-b162-e8403a572e2c
caps.latest.revision: 
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload:
- cplusplus
- data-storage
ms.openlocfilehash: 6d3e2286c10d83b25576474692b5a7faeb9bb332
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="mfc-using-database-classes-with-documents-and-views"></a>MFC. Использование классов базы данных с документами и представлениями
Можно использовать классы баз данных MFC, независимо от архитектуры document/view. В этом разделе особое внимание уделяется работа с документами и представлениями. Он описывается:  
  
-   [Как написать приложение на основе форм](#_core_writing_a_form.2d.based_application) с помощью `CRecordView` объект в качестве основного представления документа.  
  
-   [Как использовать объекты наборов записей в документах и представлениях](#_core_using_recordsets_in_documents_and_views).  
  
-   [Другие вопросы](#_core_other_factors).  
  
 Альтернативные варианты см [MFC: использование классов базы данных без документов и представлений](../data/mfc-using-database-classes-without-documents-and-views.md).  
  
##  <a name="_core_writing_a_form.2d.based_application"></a>Написание приложения на основе форм  
 Многие приложения доступа к данным на основе форм. Пользовательский интерфейс представляет собой форму, содержащую элементы управления, в которых пользователь проверяет, входит или изменении данных. Чтобы создать приложение на основе формы, используйте класс `CRecordView`. При запуске мастера приложений MFC и выборе **ODBC** типа клиента на **Поддержка баз данных** страницы, в проекте используется `CRecordView` для класса представления.
  
 В приложения на основе форм, каждый объект представления записей сохраняет указатель на `CRecordset` объект. Механизм обмена (полями записей RFX) поле записи обеспечивает обмен данными между набора записей и источником данных. Механизм (диалоговых окон DDX) обеспечивает обмен данными между элементами данных полей объекта набора записей и элементов управления в форме, обмена данными диалогового окна. `CRecordView`также предоставляют по умолчанию функции обработчика команд для перемещения по записям в форме.  
  
 Чтобы создать приложение на основе формы с помощью мастера приложений, в разделе [создание приложений MFC на основе форм](../mfc/reference/creating-a-forms-based-mfc-application.md) и [Поддержка баз данных, мастер приложений MFC](../mfc/reference/database-support-mfc-application-wizard.md).  
  
 Подробное обсуждение форм в разделе [представления записей](../data/record-views-mfc-data-access.md).  
  
##  <a name="_core_using_recordsets_in_documents_and_views"></a>Использование наборов записей в документах и представлениях  
 Многие простой формы приложения нет необходимости использовать документы. Если приложение является более сложной, может потребоваться использовать документ в качестве прокси-сервера для базы данных, хранение `CDatabase` объект, который подключается к источнику данных. Приложения на основе форм, обычно сохраняют указатель на объект набора записей в представлении. Наборы записей хранения других видов приложений баз данных и `CDatabase` объекты в документе. Ниже приведены некоторые возможности использования документов в приложениях баз данных.  
  
-   Если вы обращаетесь к набору записей в локальном контексте, создайте `CRecordset` объекта локально в функциях-членах документа или представления, при необходимости.  
  
     Объявите объект набора записей как локальную переменную в функции. Передайте **NULL** в конструктор, которое вызывает платформу, чтобы создать и открыть временный `CDatabase` объект. В качестве альтернативы передать указатель на `CDatabase` объект. Используйте этот набор записей в функции и позвольте ему будут автоматически удаляться при выходе из функции.  
  
     При передаче **NULL** конструктору набора записей платформа использует сведения, возвращаемые функцией набора записей `GetDefaultConnect` функции-члена для создания `CDatabase` объекта и откройте его. Реализовать мастеров `GetDefaultConnect` для вас.  
  
-   Если вы обращаетесь к набору записей во время существования документа, внедрите одного или нескольких `CRecordset` объекты в документе.  
  
     При инициализации документа или при необходимости, создайте объекты набора записей. Можно написать функцию, которая возвращает указатель на набор записей, если он уже существует или создает и открывает набор записей, если он еще не существует. Закрыть, удалить и повторно создайте набор записей, при необходимости или вызвать его **Requery** функции-члена для обновления записей.  
  
-   При доступе к источнику данных во время существования документа внедрить `CDatabase` либо сохраните указатель `CDatabase` внутри него.  
  
     `CDatabase` Управляет подключения к источнику данных. Объект создан автоматически во время создания, и вызывать его **откройте** функции-члена при инициализации документа. При создании объектов наборов записей в функциях-членах документа, передать указатель в документ `CDatabase` объекта. Это связывает каждый набор записей с источником данных. Объект базы данных обычно удаляется при закрытии документа. Объекты набора записей обычно удаляются при выходе из области функции.  
  
##  <a name="_core_other_factors"></a>Другие факторы  
 Приложения на основе форм часто не требуется для документа механизм сериализации, поэтому может потребоваться удаление, отключение или замена `New` и **откройте** команды **файл**меню. См. в статье [сериализации: vs сериализации. Базы данных ввода вывода](../mfc/serialization-serialization-vs-database-input-output.md).  
  
 Можно также сделать используют многие возможности пользовательского интерфейса, которые поддерживают платформу. Например, можно использовать несколько `CRecordView` объектов в окна-разделителя, открыть несколько наборов записей в разных несколько дочерних окнах многодокументного интерфейса (MDI) и т. д.  
  
 Может потребоваться для реализации функций печати в представлении, будь то форма, реализованная с `CRecordView` либо другие. Классы, производные от `CFormView`, `CRecordView` поддерживают печать, но можно переопределить `OnPrint` функция-член можно разрешить печать. Дополнительные сведения см. в разделе класса [CFormView](../mfc/reference/cformview-class.md).  
  
 Вы не можете использовать во всех документов и представлений. См. в этом случае [MFC: использование классов базы данных без документов и представлений](../data/mfc-using-database-classes-without-documents-and-views.md).  
  
## <a name="see-also"></a>См. также  
 [Классы баз данных MFC (.. / data/mfc-database-classes-odbc-and-dao.md)