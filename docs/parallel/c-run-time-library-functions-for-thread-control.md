---
title: "Функции управления потоками в библиотеке времени выполнения C | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "_beginthread - функция"
  - "_beginthreadex - функция"
  - "_endthread - функция"
  - "_endthreadex - функция"
  - "многопоточность [C++], управление потоками"
  - "работа с потоками [C++], управление потоками"
ms.assetid: 39d0529c-c392-4c6f-94f5-105d1e8054e4
caps.latest.revision: 9
caps.handback.revision: 9
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Функции управления потоками в библиотеке времени выполнения C
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

В любой программе Win32 используется как минимум один поток.  Любой поток может создавать дополнительные потоки.  Поток может завершаться после выполнения определенных действий или оставаться активным в течение всего времени существования программы.  
  
 В библиотеках времени выполнения LIBCMT и MSVCRT C предоставляются следующие функции создания и завершения потоков: [\_beginthread, \_beginthreadex](../Topic/_beginthread,%20_beginthreadex.md), а также [\_endthread, \_endthreadex](../Topic/_endthread,%20_endthreadex.md).  
  
 Функции `_beginthread` и `_beginthreadex` используются для создания нового потока и в случае успешного выполнения операции возвращают идентификатор потока.  По завершении выполнения поток автоматически завершается. При необходимости можно завершить поток, вызвав метод `_endthread` или `_endthreadex`.  
  
> [!NOTE]
>  Если в программе, построенной с использованием библиотеки Libcmt.lib, предполагается вызов процедур времени выполнения C, для создания потока следует использовать функции `_beginthread` или `_beginthreadex`.  В таких случаях не следует использовать функции Win32 `ExitThread` и `CreateThread`.  При использовании функции `SuspendThread` может возникнуть состояние взаимной блокировки, которое связано с наличием нескольких заблокированных потоков, ожидающих завершения операции обращения к структуре данных времени выполнения C со стороны приостановленного потока.  
  
##  <a name="_core_the__beginthread_function"></a> Функции \_beginthread и \_beginthreadex  
 Функции `_beginthread` и `_beginthreadex` предназначены для создания нового потока.  Код и сегменты данных процесса совместно используются всеми входящими в его состав потоками, однако каждому потоку назначаются уникальные значения регистров, память в стеке и текущий адрес инструкции.  Каждому потоку автоматически выделяется время ЦП, благодаря чему обеспечивается параллельное выполнение всех потоков в процессе.  
  
 Функции `_beginthread` и `_beginthreadex` схожи с функцией [CreateThread](http://msdn.microsoft.com/library/windows/desktop/ms682453) интерфейса API Win32, однако имеют следующие отличия от нее:  
  
-   С помощью этих функций инициализируются определенные переменные библиотеки времени выполнения C.  Это важно только при использовании в потоках библиотеки времени выполнения C.  
  
-   Функция `CreateThread` обеспечивает управление атрибутами безопасности.  Эту функцию можно использовать для запуска потока в приостановленном состоянии.  
  
 Функции `_beginthread` и `_beginthreadex` возвращают дескриптор нового потока \(в случае успешного выполнения\) или код ошибки.  
  
##  <a name="_core_the__endthread_function"></a> Функции \_endthread и \_endthreadex  
 Функция [\_endthread](../Topic/_endthread,%20_endthreadex.md) используется для завершения потока, созданного с помощью функции `_beginthread`. Функция `_endthreadex` используется для завершения потока, созданного с помощью функции `_beginthreadex`.  Потоки автоматически завершаются после их выполнения.  Для условного завершения потока используются функции `_endthread` и `_endthreadex`.  Например, можно завершить поток, отвечающий за управление соединением, если в нем не удается получить доступ к COM\-порту.  
  
## См. также  
 [Реализация многопоточности на языке C с помощью функций Win32](../parallel/multithreading-with-c-and-win32.md)