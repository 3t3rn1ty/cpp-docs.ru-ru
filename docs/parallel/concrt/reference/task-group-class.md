`task_group` Класс представляет коллекцию параллельной работы, которая ожидается или отменены.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
class task_group;  
```  
  
## <a name="members"></a>Члены  
  
### <a name="public-constructors"></a>Открытые конструкторы  
  
|Имя|Описание|  
|----------|-----------------|  
|[Конструктор task_group](#ctor)|Перегружен. Создает новый `task_group` объекта.|  
|[~ task_group деструктор](#dtor)|Уничтожает объект `task_group`. Вы должны вызвать `wait` или `run_and_wait` метод на объекте до выполнения деструктора, если деструктор не выполняется в результате из-за исключения очистки стека.|  
  
### <a name="public-methods"></a>Открытые методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[Cancel-метод](#cancel)|Делает все возможное пытается отменить поддерево работ, имеющее корень в данной группе задач. Все задачи, запланированные в группе задач отменяются транзитивно, если это возможно.|  
|[is_canceling метод](#is_canceling)|Сообщает вызывающей стороне, находится ли группа задач состоянии отмены. Это не обязательно означает, что `cancel` метод был вызван для `task_group` объекта (хотя это определенно позволяет этот метод для возврата `true`). Часто бывает так, `task_group` объекта выполняется встроено и одной группы задач вверх в дереве рабочих была отменена. В случаях, таких как where эти среда выполнения может определить заранее, что отмена будет передаваться через этот `task_group` объекта, `true` также будут возвращены.|  
|[Метод Run](#run)|Перегружен. Планирует задачу на `task_group` объект. Если `task_handle` объект передается в качестве параметра `run`, вызывающий объект отвечает за управление временем жизни `task_handle` объекта. Выполнять версию метода, который принимает ссылку на объект функции как параметр, включает выделение кучи внутри среды выполнения, который может быть хуже, чем при использовании версии, который принимает ссылку на `task_handle` объект. Версия, принимающая параметр `_Placement`, заставляет задачу стремиться к выполнению в расположении, указанном этим параметром.|  
|[run_and_wait метод](#run_and_wait)|Перегружен. Планирует задачу для выполнения встроено в вызывающий контекст с помощью `task_group` объекта для поддержки полной отмены. Функция затем ожидает, пока не будет работать на `task_group` объекта будет завершена или отменена. Если `task_handle` объект передается в качестве параметра `run_and_wait`, вызывающий объект отвечает за управление временем жизни `task_handle` объекта.|  
|[wait-метод](#wait)|Ожидает, пока вся работа на `task_group` объекта будет завершена или отменена.|  
  
## <a name="remarks"></a>Примечания  
 В отличие от сильно ограниченными `structured_task_group` класса `task_group` класс является гораздо более общие конструкции. Он не имеет ограничений, описываемых [structured_task_group](structured-task-group-class.md). `task_group`объекты могут безопасно использоваться между потоками и загруженные способами произвольной формы. Недостатком `task_group` конструкция — что он не может выполнить а также `structured_task_group` построения для задач, выполняющих небольшие объемы работы.  
  
 Дополнительные сведения см. в разделе [параллелизм задач](../task-parallelism-concurrency-runtime.md).  
  
## <a name="inheritance-hierarchy"></a>Иерархия наследования  
 `task_group`  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** ppl.h  
  
 **Пространство имен:** concurrency  
  
##  <a name="a-namecancela-cancel"></a><a name="cancel"></a>Отмена 

 Делает все возможное пытается отменить поддерево работ, имеющее корень в данной группе задач. Все задачи, запланированные в группе задач отменяются транзитивно, если это возможно.  
  
```  
void cancel();  
```  
  
### <a name="remarks"></a>Примечания  
 Дополнительные сведения см. в разделе [отмены](../cancellation-in-the-ppl.md).  
  
##  <a name="a-nameiscancelinga-iscanceling"></a><a name="is_canceling"></a>is_canceling 

 Сообщает вызывающей стороне, находится ли группа задач состоянии отмены. Это не обязательно означает, что `cancel` метод был вызван для `task_group` объекта (хотя это определенно позволяет этот метод для возврата `true`). Часто бывает так, `task_group` объекта выполняется встроено и одной группы задач вверх в дереве рабочих была отменена. В случаях, таких как where эти среда выполнения может определить заранее, что отмена будет передаваться через этот `task_group` объекта, `true` также будут возвращены.  
  
```  
bool is_canceling();  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указание, следует ли `task_group` объекта, в процессе отмены (или гарантированно будет вскоре).  
  
### <a name="remarks"></a>Примечания  
 Дополнительные сведения см. в разделе [отмены](../cancellation-in-the-ppl.md).  
  
##  <a name="a-nameruna-run"></a><a name="run"></a>Запуск 

 Планирует задачу на `task_group` объект. Если `task_handle` объект передается в качестве параметра `run`, вызывающий объект отвечает за управление временем жизни `task_handle` объекта. Выполнять версию метода, который принимает ссылку на объект функции как параметр, включает выделение кучи внутри среды выполнения, который может быть хуже, чем при использовании версии, который принимает ссылку на `task_handle` объект. Версия, принимающая параметр `_Placement`, заставляет задачу стремиться к выполнению в расположении, указанном этим параметром.  
  
```  
template<  
   typename _Function  
>  
void run(  
   const _Function& _Func  
);  
  
template<  
   typename _Function  
>  
void run(  
   const _Function& _Func,  
   location& _Placement  
);  
  
template<  
   typename _Function  
>  
void run(  
   task_handle<_Function>& _Task_handle  
);  
  
template<  
   typename _Function  
>  
void run(  
   task_handle<_Function>& _Task_handle,  
   location& _Placement  
);  
```  
  
### <a name="parameters"></a>Параметры  
 `_Function`  
 Тип объекта функции, который будет вызываться для выполнения основной части дескриптора задачи.  
  
 `_Func`  
 Функция, которая будет вызываться для вызова основного текста задачи. Это может быть лямбда-выражение или другой объект, который поддерживает версию оператора вызова функции с сигнатурой `void operator()()`.  
  
 `_Placement`  
 Ссылка на расположение, в котором должна выполняться задача, представленная параметром `_Func`.  
  
 `_Task_handle`  
 Дескриптор запланированных работ. Обратите внимание, что вызывающий объект отвечает за время существования этого объекта. Среда выполнения будет продолжать ожидать live пока не `wait` или `run_and_wait` на это был вызван метод `task_group` объекта.  
  
### <a name="remarks"></a>Примечания  
 Среда выполнения планирует предоставленную рабочую функцию для запуска позднее, который может быть после возврата вызывающей функции. Этот метод использует [task_handle](task-handle-class.md) объект для хранения копии предоставленную рабочую функцию. Таким образом изменения состояния, возникающие в объект функции, который передается этому методу не появятся в копии этого объекта функции. Кроме того убедитесь, что время существования объектов, которые передают указатель или ссылка на функцию работы остаются в силе до возврата работы функции.  
  
 Если `task_group` destructs в результате очистки стека из исключения, не нужно гарантировать, что вызов либо `wait` или `run_and_wait` метод. В этом случае деструктор будет соответствующим образом отменить и ожидания для задачи, представленной `_Task_handle` параметра для выполнения.  
  
 Метод создает [invalid_multiple_scheduling](invalid-multiple-scheduling-class.md) исключение, если задача обработки заданного `_Task_handle` параметр уже было запланировано на объект группы задач через `run` метод и без промежуточных вызовов любого `wait` или `run_and_wait` метод в этой группе задач.  
  
##  <a name="a-namerunandwaita-runandwait"></a><a name="run_and_wait"></a>run_and_wait 

 Планирует задачу для выполнения встроено в вызывающий контекст с помощью `task_group` объекта для поддержки полной отмены. Функция затем ожидает, пока не будет работать на `task_group` объекта будет завершена или отменена. Если `task_handle` объект передается в качестве параметра `run_and_wait`, вызывающий объект отвечает за управление временем жизни `task_handle` объекта.  
  
```  
template<  
   class _Function  
>  
task_group_status run_and_wait(  
   task_handle<_Function>& _Task_handle  
);  
  
template<  
   class _Function  
>  
task_group_status run_and_wait(  
   const _Function& _Func  
);  
```  
  
### <a name="parameters"></a>Параметры  
 `_Function`  
 Тип объекта функции, который будет вызван для выполнения основной части задачи.  
  
 `_Task_handle`  
 Дескриптор задачу, которая будет выполняться в контексте вызова встроенной. Обратите внимание, что вызывающий объект отвечает за время существования этого объекта. Среда выполнения будет продолжать ожидать, что он будет жить до `run_and_wait` метод завершает выполнение.  
  
 `_Func`  
 Функция, которая будет вызываться для вызова основного текста работы. Это может быть лямбда-выражение или другой объект, который поддерживает версию оператора вызова функции с сигнатурой `void operator()()`.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Индикация того, было ли выполнено ожидания или группа задач была отменена в связи с явной операцией отмены или исключение из одной из задач. Дополнительные сведения см. в разделе [task_group_status](concurrency-namespace-enums.md#task_group_status).  

  
### <a name="remarks"></a>Примечания  
 Обратите внимание, что один или несколько задач, запланированных на этот `task_group` объекта может выполняться встроено в контекст вызова.  
  
 Если один или несколько задач, запланированных на этот `task_group` объекта возникает исключение, среда выполнения будет выбрать одно такое исключение и распространить из вызова `run_and_wait` метод.  
  
 После возврата из `run_and_wait` метод `task_group` объекта, среда выполнения сбрасывает объект в исходное состояние, где он может быть повторно использован. Это включает случай где `task_group` объекта была отменена.  
  
 В неисключительном пути выполнения имеется поручение вызывать этот метод или `wait` метод до деструктора `task_group` выполняет.  
  
##  <a name="a-namectora-taskgroup"></a><a name="ctor"></a>task_group 

 Создает новый `task_group` объекта.  
  
```  
task_group();  
  
task_group(  
   cancellation_token _CancellationToken  
);  
```  
  
### <a name="parameters"></a>Параметры  
 `_CancellationToken`  
 Токен отмены для связывания с этой группой задач. Группа задач будет отменена, когда будет отменен токен.  
  
### <a name="remarks"></a>Примечания  
 Конструктор, который принимает токен отмены, создает `task_group`, которая будет отменена, когда будет отменен источник, связанный с этим токеном. Предоставление явного токена отмены также изолирует эту группу задач от участия в неявной отмене из родительской группы с другим токеном или без токена.  
  
##  <a name="a-namedtora-taskgroup"></a><a name="dtor"></a>~ task_group 

 Уничтожает объект `task_group`. Вы должны вызвать `wait` или `run_and_wait` метод на объекте до выполнения деструктора, если деструктор не выполняется в результате из-за исключения очистки стека.  
  
```  
~task_group();  
```  
  
### <a name="remarks"></a>Примечания  
 Если деструктор выполняется как результат обычного выполнения (например, не освобождения стека из-за исключения) и ни `wait` , ни `run_and_wait` были вызваны, деструктор может вызвать [missing_wait](missing-wait-class.md) исключение.  
  
##  <a name="a-namewaita-wait"></a><a name="wait"></a>Ожидание 

 Ожидает, пока вся работа на `task_group` объекта будет завершена или отменена.  
  
```  
task_group_status wait();  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Индикация того, было ли выполнено ожидания или группа задач была отменена в связи с явной операцией отмены или исключение из одной из задач. Дополнительные сведения см. в разделе [task_group_status](concurrency-namespace-enums.md#task_group_status).  

  
### <a name="remarks"></a>Примечания  
 Обратите внимание, что один или несколько задач, запланированных на этот `task_group` объекта может выполняться встроено в контекст вызова.  
  
 Если один или несколько задач, запланированных на этот `task_group` объекта возникает исключение, среда выполнения будет выбрать одно такое исключение и распространить из вызова `wait` метод.  
  
 Вызов `wait` на `task_group` сбрасывает исходное состояние, где он может быть повторно использован. Это включает случай где `task_group` объекта была отменена.  
  
 В неисключительном пути выполнения имеется поручение вызывать этот метод или `run_and_wait` метод до деструктора `task_group` выполняет.  
  
## <a name="see-also"></a>См. также  
 [пространство имен Concurrency](concurrency-namespace.md)   
 [Класс structured_task_group](structured-task-group-class.md)   
 [Класс task_handle](task-handle-class.md)