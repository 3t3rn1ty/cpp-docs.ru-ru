---
title: "Класс CurrentScheduler | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-cpp
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords:
- concrt/concurrency::CurrentScheduler
dev_langs:
- C++
helpviewer_keywords:
- CurrentScheduler class
ms.assetid: 31c20e0e-4cdf-49b4-8220-d726130aad2b
caps.latest.revision: 20
author: mikeblome
ms.author: mblome
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: fc190feb08d9b221cd1cc21a9c91ad567c86c848
ms.openlocfilehash: 514f0abb6e317a7b133203a2f089d492a46ae4c4
ms.lasthandoff: 02/24/2017

---
# <a name="currentscheduler-class"></a>Класс CurrentScheduler
Представляет абстракцию для текущего планировщика, связанного с вызывающим контекстом.  
  
## <a name="syntax"></a>Синтаксис  
  
```
class CurrentScheduler;
```  
  
## <a name="members"></a>Члены  
  
### <a name="public-methods"></a>Открытые методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CREATE-метод](#create)|Создает новый планировщик, поведение которого описывается `_Policy` параметр и присоединяет его к контексту вызова. Вновь созданный планировщик становится текущий планировщик для вызывающего контекста.|  
|[Createschedulegroup-метод](#createschedulegroup)|Перегружен. Создает новую группу расписаний внутри планировщика, связанного с вызывающим контекстом. Версия, которая принимает параметр `_Placement` вызывает задачи в пределах группы вновь созданное расписание стремиться к выполнению в расположении, указанном этим параметром.|  
|[Detach-метод](#detach)|Отсоединяет текущий планировщик от вызывающего контекста и восстанавливает ранее присоединенный планировщик как текущего планировщика, если таковой существует. После возврата этого метода, вызывающий контекст затем управляется планировщика, который ранее был присоединен к контексту с помощью `CurrentScheduler::Create` или `Scheduler::Attach` метод.|  
|[GET-метод](#get)|Возвращает указатель на планировщик, связанный с контекстом вызывающим, также называемая текущего планировщика.|  
|[Getnumberofvirtualprocessors-метод](#getnumberofvirtualprocessors)|Возвращает текущее число виртуальных процессоров для планировщика, связанного с вызывающим контекстом.|  
|[GetPolicy-метод](#getpolicy)|Возвращает копию политики, созданные с текущего планировщика.|  
|[ID-метод](#id)|Возвращает уникальный идентификатор для текущего планировщика.|  
|[Isavailablelocation-метод](#isavailablelocation)|Определяет, доступно ли данное расположение в текущем планировщике.|  
|[Registershutdownevent-метод](#registershutdownevent)|Причины, переданный дескриптор события Windows `_ShutdownEvent` параметр сигнал, когда планировщик, связанный с текущим контекстом, завершает работу и удаляет себя. В то время, когда событие получает сигнал вся работа, запланированная планировщику завершена. Таким способом можно зарегистрировать несколько событий завершения работы.|  
|[ScheduleTask-метод](#scheduletask)|Перегружен. Назначает легкое задание внутри планировщика, связанного с вызывающим контекстом. Упрощенная задача будет размещена в группе расписаний, определенной средой выполнения. Версия, принимающая параметр `_Placement`, склоняет задачу к выполнению в указанном расположении.|  
  
## <a name="remarks"></a>Примечания  
 Если планировщик (см. [планировщика](scheduler-class.md)) связанных с контекстом вызывающим, многие методы в `CurrentScheduler` класса приведет к вложение планировщик по умолчанию для данного процесса. Это также означает, что планировщик по умолчанию процесса создается во время такого вызова.  
  
## <a name="inheritance-hierarchy"></a>Иерархия наследования  
 `CurrentScheduler`  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** concrt.h  
  
 **Пространство имен:** concurrency  
  
##  <a name="a-namecreatea-create"></a><a name="create"></a>Создание 

 Создает новый планировщик, поведение которого описывается `_Policy` параметр и присоединяет его к контексту вызова. Вновь созданный планировщик становится текущий планировщик для вызывающего контекста.  
  
```
static void __cdecl Create(const SchedulerPolicy& _Policy);
```  
  
### <a name="parameters"></a>Параметры  
 `_Policy`  
 Политика планировщика, описывающая поведение вновь созданного планировщика.  
  
### <a name="remarks"></a>Примечания  
 Вложение планировщик к контексту вызова неявно помещает значение счетчика ссылок планировщика.  
  
 После создания планировщика с `Create` метод, необходимо вызвать [CurrentScheduler::Detach](#detach) метод в некоторый момент в будущем, чтобы разрешить завершение работы планировщика.  
  
 Если этот метод вызывается из контекста, который уже присоединен к другому планировщику, существующий планировщик запоминается как предыдущий планировщик и вновь созданный планировщик становится текущим планировщиком. При вызове `CurrentScheduler::Detach` метода позднее, предыдущий планировщик восстанавливается как текущий планировщик.  
  
 Этот метод можно вызвать ряд исключений, включая [scheduler_resource_allocation_error](scheduler-resource-allocation-error-class.md) и [invalid_scheduler_policy_value](invalid-scheduler-policy-value-class.md).  
  
##  <a name="a-namecreateschedulegroupa-createschedulegroup"></a><a name="createschedulegroup"></a>CreateScheduleGroup 

 Создает новую группу расписаний внутри планировщика, связанного с вызывающим контекстом. Версия, которая принимает параметр `_Placement` вызывает задачи в пределах группы вновь созданное расписание стремиться к выполнению в расположении, указанном этим параметром.  
  
```
static ScheduleGroup* __cdecl CreateScheduleGroup();

static ScheduleGroup* __cdecl CreateScheduleGroup(location& _Placement);
```  
  
### <a name="parameters"></a>Параметры  
 `_Placement`  
 Ссылка на расположение, где задачи в пределах группы расписание будет стремиться к выполнению на.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на вновь созданное расписание группы. Это `ScheduleGroup` объект имеет начальное значение счетчика ссылок к нему.  
  
### <a name="remarks"></a>Примечания  
 В результате этого метода в процессе будет создан планировщик по умолчанию и/или присоединен к вызывающему контексту, если отсутствует планировщик, в данный момент связанный с вызывающим контекстом.  
  
 Необходимо вызвать метод [выпуска](schedulegroup-class.md#release) метод на группу расписаний после завершения планирования работы для него. Планировщик уничтожит расписание группы, когда вся работа в очереди для его завершения.  
  
 Обратите внимание, что если явно создан данный планировщик, необходимо освободить все ссылки на группы, расписания, перед освобождением ссылки на планировщик, путем отсоединения текущего контекста из него.  
  
##  <a name="a-namedetacha-detach"></a><a name="detach"></a>Отсоединение 

 Отсоединяет текущий планировщик от вызывающего контекста и восстанавливает ранее присоединенный планировщик как текущего планировщика, если таковой существует. После возврата этого метода, вызывающий контекст затем управляется планировщика, который ранее был присоединен к контексту с помощью `CurrentScheduler::Create` или `Scheduler::Attach` метод.  
  
```
static void __cdecl Detach();
```  
  
### <a name="remarks"></a>Примечания  
 `Detach` Метод неявно удаляет значение счетчика ссылок из планировщика.  
  
 Если планировщик присоединен к вызывающему контексту, вызов этого метода приведет к [scheduler_not_attached](scheduler-not-attached-class.md) исключения.  
  
 Вызов этого метода из контекста внутри и управляемый с помощью планировщика или контекст, который был подключен, используя метод, отличный от [Scheduler::Attach](scheduler-class.md#attach) или [CurrentScheduler::Create](#create) методы, приведет к [improper_scheduler_detach](improper-scheduler-detach-class.md) исключения.  
  
##  <a name="a-namegeta-get"></a><a name="get"></a>Получить 

 Возвращает указатель на планировщик, связанный с контекстом вызывающим, также называемая текущего планировщика.  
  
```
static Scheduler* __cdecl Get();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на планировщик, связанный с вызывающим контекстом (текущий планировщик).  
  
### <a name="remarks"></a>Примечания  
 В результате этого метода в процессе будет создан планировщик по умолчанию и/или присоединен к вызывающему контексту, если отсутствует планировщик, в данный момент связанный с вызывающим контекстом. Дополнительные ссылки будет располагаться на `Scheduler` объект, возвращаемый этим методом.  
  
##  <a name="a-namegetnumberofvirtualprocessorsa-getnumberofvirtualprocessors"></a><a name="getnumberofvirtualprocessors"></a>GetNumberOfVirtualProcessors 

 Возвращает текущее число виртуальных процессоров для планировщика, связанного с вызывающим контекстом.  
  
```
static unsigned int __cdecl GetNumberOfVirtualProcessors();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если планировщик связан с контекстом вызывающим, текущее число виртуальных процессоров для данного планировщика; в противном случае — значение `-1`.  
  
### <a name="remarks"></a>Примечания  
 Этот метод не приведет к вложению планировщика, если вызывающий контекст не связан с планировщика.  
  
 Возвращаемое значение из этого метода является результатом проверки число виртуальных процессоров для планировщика, связанного с вызывающим контекстом. Это значение может быть устаревшим в момент возврата.  
  
##  <a name="a-namegetpolicya-getpolicy"></a><a name="getpolicy"></a>GetPolicy 

 Возвращает копию политики, созданные с текущего планировщика.  
  
```
static SchedulerPolicy __cdecl GetPolicy();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Копия политики, который был создан текущий планировщик.  
  
### <a name="remarks"></a>Примечания  
 В результате этого метода в процессе будет создан планировщик по умолчанию и/или присоединен к вызывающему контексту, если отсутствует планировщик, в данный момент связанный с вызывающим контекстом.  
  
##  <a name="a-nameida-id"></a><a name="id"></a>Идентификатор 

 Возвращает уникальный идентификатор для текущего планировщика.  
  
```
static unsigned int __cdecl Id();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если планировщик связан с контекстом вызывающим, уникальный идентификатор для данного планировщика; в противном случае — значение `-1`.  
  
### <a name="remarks"></a>Примечания  
 Этот метод не приведет к вложению планировщика, если вызывающий контекст не связан с планировщика.  
  
##  <a name="a-nameisavailablelocationa-isavailablelocation"></a><a name="isavailablelocation"></a>IsAvailableLocation 

 Определяет, доступно ли данное расположение в текущем планировщике.  
  
```
static bool __cdecl IsAvailableLocation(const location& _Placement);
```  
  
### <a name="parameters"></a>Параметры  
 `_Placement`  
 Ссылка на расположение, о котором необходимо отправить запрос текущему планировщику.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Индикация доступности расположения, указанного параметром `_Placement`, в текущем планировщике.  
  
### <a name="remarks"></a>Примечания  
 Этот метод не приведет к вложению планировщика, если вызывающий контекст не связан с планировщика.  
  
 Обратите внимание, что возвращаемое значение является результатом проверки доступности указанного расположения в данный момент. При наличии нескольких планировщиков динамическое управление ресурсами может добавлять или забирать ресурсы у планировщиков в любой момент. Если это произошло, доступность заданного расположения может измениться.  
  
##  <a name="a-nameregistershutdowneventa-registershutdownevent"></a><a name="registershutdownevent"></a>RegisterShutdownEvent 

 Причины, переданный дескриптор события Windows `_ShutdownEvent` параметр сигнал, когда планировщик, связанный с текущим контекстом, завершает работу и удаляет себя. В то время, когда событие получает сигнал вся работа, запланированная планировщику завершена. Таким способом можно зарегистрировать несколько событий завершения работы.  
  
```
static void __cdecl RegisterShutdownEvent(HANDLE _ShutdownEvent);
```  
  
### <a name="parameters"></a>Параметры  
 `_ShutdownEvent`  
 Дескриптор объекта события Windows, который будет оповещаться средой выполнения, когда планировщик, связанный с текущим контекстом, завершает работу и удаляет себя.  
  
### <a name="remarks"></a>Примечания  
 Если планировщик присоединен к вызывающему контексту, вызов этого метода приведет к [scheduler_not_attached](scheduler-not-attached-class.md) исключения.  
  
##  <a name="a-namescheduletaska-scheduletask"></a><a name="scheduletask"></a>ScheduleTask 

 Назначает легкое задание внутри планировщика, связанного с вызывающим контекстом. Упрощенная задача будет размещена в группе расписаний, определенной средой выполнения. Версия, принимающая параметр `_Placement`, склоняет задачу к выполнению в указанном расположении.  
  
```
static void __cdecl ScheduleTask(
    TaskProc _Proc,
    _Inout_opt_ void* _Data);

static void __cdecl ScheduleTask(
    TaskProc _Proc,
    _Inout_opt_ void* _Data,
    location& _Placement);
```  
  
### <a name="parameters"></a>Параметры  
 `_Proc`  
 Указатель на функцию, выполняемую для выполнения тексте упрощенная задача.  
  
 `_Data`  
 Указатель void на данные, на которые будут передаваться в качестве параметра в теле задачи.  
  
 `_Placement`  
 Ссылка на расположение, где будет склонна выполняться упрощенная задача.  
  
### <a name="remarks"></a>Примечания  
 В результате этого метода в процессе будет создан планировщик по умолчанию и/или присоединен к вызывающему контексту, если отсутствует планировщик, в данный момент связанный с вызывающим контекстом.  
  
## <a name="see-also"></a>См. также  
 [пространство имен Concurrency](concurrency-namespace.md)   
 [Класс планировщика](scheduler-class.md)   
 [Перечисление PolicyElementKey](concurrency-namespace-enums.md)   
 [Планировщик заданий](../../../parallel/concrt/task-scheduler-concurrency-runtime.md)




