---
title: "Практическое руководство. Использование преобразователя в конвейере данных | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "класс transformer, пример"
  - "конвейеры данных, использование класса transformer [среда выполнения с параллелизмом]"
  - "использование класса transformer в конвейерах данных [среда выполнения с параллелизмом]"
ms.assetid: ca49cb3f-4dab-4b09-a9c9-d3a109ae4c29
caps.latest.revision: 16
caps.handback.revision: 13
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Практическое руководство. Использование преобразователя в конвейере данных
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

В этом разделе содержится общий пример использования класса [concurrency::transformer](../../parallel/concrt/reference/transformer-class.md) в конвейере данных.  Более полный пример, в котором для параллельной обработки изображения используется конвейер данных, см. в разделе [Пошаговое руководство. Создание сети обработки изображений](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md).  
  
 *Конвейеризация данных* — это общий шаблон в параллельном программировании.  Конвейер данных состоит из ряда этапов, каждый из которых выполняет работу и передает результаты этой работы на следующий этап.  Класс `transformer` является ключевым компонентом конвейеров данных, так как он получает входное значение, выполняет работу с этим значением и производит результат, который затем используется другим компонентом.  
  
## Пример  
 В этом примере для выполнения ряда преобразований с начальным входным значением используется следующий конвейер данных.  
  
1.  На первом этапе вычисляется его абсолютное значение.  
  
2.  На втором этапе вычисляется квадратный корень из введенного значения.  
  
3.  На третьем этапе вычисляется квадрат введенного значения.  
  
4.  На четвертом этапе из полученного значения вычитается введенное.  
  
5.  На пятом этапе окончательный результат записывается в буфер сообщений.  
  
 Наконец, результат конвейера выводится на консоль.  
  
 [!CODE [concrt-data-pipeline#1](../CodeSnippet/VS_Snippets_ConcRT/concrt-data-pipeline#1)]  
  
 В этом примере выводятся следующие данные:  
  
  **Результат равен \-42.** Часто этап конвейера данных выводит значение, отличающееся по типу от введенного.  В этом примере второй этап принимает значение типа `int` в качестве входных данных и выдает на выходе квадратный корень из этого значения \(значение `double`\).  
  
> [!NOTE]
>  Конвейер данных в этом пример носит иллюстративный характер.  Так как каждая операция преобразования выполняет небольшую работу, дополнительная нагрузка, необходимая для передачи сообщений, может не компенсироваться преимуществами использования конвейера данных.  
  
## Компиляция кода  
 Скопируйте код примера и вставьте его в проект Visual Studio или в файл с именем `data-pipeline.cpp`, затем выполните в окне командной строки Visual Studio следующую команду.  
  
 **cl.exe \/EHsc data\-pipeline.cpp**  
  
## См. также  
 [Библиотека асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md)   
 [Асинхронные блоки сообщений](../../parallel/concrt/asynchronous-message-blocks.md)   
 [Пошаговое руководство. Создание сети обработки изображений](../../parallel/concrt/walkthrough-creating-an-image-processing-network.md)