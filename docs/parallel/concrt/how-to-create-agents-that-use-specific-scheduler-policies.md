---
title: 'Как: создание агентов, использующих определенные политики планировщика | Документы Microsoft'
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-concrt
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- scheduler policies, agents [Concurrency Runtime]
- creating agents that use specific policies [Concurrency Runtime]
ms.assetid: 46a3e265-0777-4ec3-a142-967bafc49d67
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 9efa40d24ed4eaee5b9fd3995a4cf9ed696eb39a
ms.sourcegitcommit: 7019081488f68abdd5b2935a3b36e2a5e8c571f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
---
# <a name="how-to-create-agents-that-use-specific-scheduler-policies"></a>Практическое руководство. Создание агентов, использующих определенные политики планировщика
Агент — это компонент приложения, который работает асинхронно с другими компонентами для решения более крупных вычислительных задач. Обычно агент имеет заданный жизненный цикл и сохраняет сведения о состоянии.  
  
 Каждый агент может иметь уникальные требования к приложению. Например агент, который обеспечивает взаимодействие с пользователем (извлекая входные данные или отображая выходные данные) может потребоваться более высоким приоритетом доступ к вычислительным ресурсам. Политики планировщика позволяют управлять стратегией, которую планировщик применяет при управлении задачами. В этом разделе показано создание агентов, использующих определенные политики планировщика.  
  
 Простой пример использования пользовательских политик планировщика вместе с асинхронные блоки сообщений, в разделе [как: укажите конкретные политики планировщика](../../parallel/concrt/how-to-specify-specific-scheduler-policies.md).  
  
 В этом разделе используются функции из библиотеки асинхронных агентов, такие как агенты, блоки сообщений и функции передачи сообщений для выполнения работы. Дополнительные сведения о библиотеке асинхронных агентов см. в разделе [библиотеки асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md).  
  
## <a name="example"></a>Пример  
 В следующем примере определяется два класса, которые являются производными от [concurrency::agent](../../parallel/concrt/reference/agent-class.md): `permutor` и `printer`. `permutor` Класс вычисляет все перестановки заданной введенной строки. `printer` Класс печатает сообщения хода выполнения на консоль. `permutor` Класс выполняет операцию большим объемом вычислений, которая может использовать все доступные вычислительные ресурсы. Чтобы быть полезной, `printer` класс выводит каждое сообщение о ходе выполнения своевременно.  
  
 Для обеспечения `printer` класс адекватный доступ к вычислительным ресурсам, в этом примере используется действия, описанные в [как: управление экземпляром планировщика](../../parallel/concrt/how-to-manage-a-scheduler-instance.md) для создания экземпляра планировщика с пользовательской политикой. Пользовательская политика задает приоритет потока для с наивысшим приоритетом.  
  
 Чтобы продемонстрировать преимущества использования планировщика с пользовательской политикой, в этом примере вся задача выполняется два раза. В примере сначала используется планировщик по умолчанию для планирования обеих задач. Затем в примере используется планировщик по умолчанию для планирования `permutor` объекта и планировщик с пользовательской политикой для планирования `printer` объекта.  
  
 [!code-cpp[concrt-permute-strings#1](../../parallel/concrt/codesnippet/cpp/how-to-create-agents-that-use-specific-scheduler-policies_1.cpp)]  
  
 В этом примере формируются следующие данные:  
  
```Output  
With default scheduler:  
Computing all permutations of 'Grapefruit'...  
100% complete...  
 
With higher context priority:  
Computing all permutations of 'Grapefruit'...  
100% complete...  
```  
  
 Хотя оба набора задач дают одинаковый результат, версии, использующей настраиваемую политику обеспечивает `printer` объекта для запуска с повышенными приоритетом, чтобы более отзывчивое.  
  
## <a name="compiling-the-code"></a>Компиляция кода  
 Скопируйте код примера и вставьте его в проект Visual Studio или вставить его в файл с именем `permute-strings.cpp` , а затем запустите следующую команду в окне командной строки Visual Studio.  
  
 **permute CL.exe/EHsc-strings.cpp**  
  
## <a name="see-also"></a>См. также  
 [Политики планировщика](../../parallel/concrt/scheduler-policies.md)   
 [Асинхронные агенты](../../parallel/concrt/asynchronous-agents.md)   
 

