---
title: "2.3 конструкция parallel | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
ms.assetid: 190eacdf-2c16-4c06-8cb7-ac60eb211425
caps.latest.revision: 
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 89167547085682a81cc1d281f4f32ab55022d27c
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="23-parallel-construct"></a>2.3 Конструкция parallel
Следующая директива определяет параллельной области, являющийся областью программы, которые необходимо выполнить несколько потоков параллельно. Это основные конструкции, которая запускает параллельного выполнения.  
  
```  
#pragma omp parallel [clause[ [, ]clause] ...] new-line   structured-block  
```  
  
 *Предложение* является одним из следующих:  
  
 **Если (** *скалярное выражение* **)**  
  
 **закрытый (** *списка переменной* **)**  
  
 **firstprivate (** *списка переменной* **)**  
  
 **по умолчанию (общий &#124; нет)**  
  
 **Общие (** *списка переменной* **)**  
  
 **copyin (** *списка переменной* **)**  
  
 **Уменьшение (** *оператор* **:***списка переменной* **)**   
  
 **num_threads (** *целочисленное выражение* **)**  
  
 Когда поток обнаруживает параллельные конструкции, группу потоков создается при выполнении одного из следующих случаев:  
  
-   Не **Если** присутствует предложение.  
  
-   **Если** выражение имеет ненулевое значение.  
  
 Этот поток становится главного потока рабочей группы с количеством потоков 0, и все потоки в группе, включая главного потока параллельного выполнения области. Если значение **Если** выражение равно нулю, сериализуется области.  
  
 Чтобы определить количество потоков, которые запрашиваются, будут учитываться следующие правила в порядке. Первое правило, условия которого будут применены:  
  
1.  Если **num_threads** присутствует предложение, то значение целочисленное выражение находится число потоков в запросе.  
  
2.  Если **omp_set_num_threads** вызова функции библиотеки, то значение аргумента в вызове самого последнего выполненного будет запрошен потоков.  
  
3.  Если переменная среды **OMP_NUM_THREADS** определен, то значение этой переменной среды — количество потоков, в запросе.  
  
4.  Если ни один из методов, приведенных выше, число потоков, в запросе, определяемого реализацией.  
  
 Если **num_threads** присутствует предложение, а затем оно заменяет число запрашиваемых потоков **omp_set_num_threads** функции библиотеки или **OMP_NUM_THREADS** переменная среды только для параллельной области он применяется. Последующие параллельной области, он не затрагиваются.  
  
 Количество потоков, выполняющих параллельной области также зависит от того, включена ли динамическую настройку потоков. При отключении динамическую настройку запрошенное количество потоков выполнения параллельной области. Если включено динамическое выравнивание запрошенное число потоков является максимальное число потоков, которые могут выполняться параллельной области.  
  
 Если параллельной области встречается динамическую настройку потоков отключена, и число потоков, запрошенный для параллельной области превышает число, которое может предоставить системе времени выполнения, поведение программы не Реализация определяемого пользователем. Реализация может например, прервать выполнение программы, или он может сериализовать параллельной области.  
  
 **Omp_set_dynamic** функции библиотеки и **OMP_DYNAMIC** переменной среды можно использовать для включения и отключения динамическую настройку потоков.  
  
 Число физических процессоров, фактически размещение потоки в любой момент времени, определяемого реализацией. После создания, число потоков в группе остается постоянным в течение этой параллельной области. Можно изменить, явно пользователем или автоматически системой во время выполнения из одного параллельной области в другую.  
  
 Инструкции, содержащиеся в динамических экстент параллельной области выполняются каждым потоком, и каждый поток может выполняться путь инструкций, отличается от других потоков. Директивы обнаружена вне лексическая область параллельной области называются потерянные директивы.  
  
 Нет подразумеваемых барьера в конце параллельной области. Только главный поток команды продолжит работу в конце параллельной области.  
  
 Если поток в параллельной области выполнение команды обнаруживает другие параллельные конструкции, он создает новые команды, и становится master этой новой команды. Вложенные области параллельных сериализуются по умолчанию. В результате по умолчанию параллельной вложенной области выполняется команда, состоящие из одного потока. Поведение по умолчанию можно изменить с помощью функции библиотеки времени выполнения **omp_set_nested** или переменной среды **OMP_NESTED**. Однако количество потоков в команде, выполняемых параллельной вложенной области определяется реализацией.  
  
 Ограничения для **параллельных** директивы, следующим образом:  
  
-   Не более одного **Если** предложение могут отображаться на директивы.  
  
-   Не указано ли любой стороне эффектов внутри оператора if выражение или **num_threads** происходят выражения.  
  
-   Объект **throw** выполняется внутри параллельной области необходимо вызвать для возобновления внутри динамического экстент же структурированный блок выполнения, и должен быть перехвачено того же потока, вызвавшего исключение.  
  
-   Только один **num_threads** предложение могут отображаться на директивы. **Num_threads** выражение вычисляется вне контекста параллельной области и должен иметь положительное целое значение.  
  
-   Порядок вычисления **Если** и **num_threads** предложения не указан.  
  
## <a name="cross-references"></a>Перекрестные ссылки:  
  
-   **закрытый**, **firstprivate**, **по умолчанию**, **общего**, **copyin**, и **сокращения**предложений, в разделе [раздел 2.7.2](../../parallel/openmp/2-7-2-data-sharing-attribute-clauses.md) на странице 25.  
  
-   **OMP_NUM_THREADS** переменной среды [разделе 4.2](../../parallel/openmp/4-2-omp-num-threads.md) на стр. 48.  
  
-   **omp_set_dynamic** функции библиотеки, в разделе [раздел 3.1.7](../../parallel/openmp/3-1-7-omp-set-dynamic-function.md) на странице 39.  
  
-   **OMP_DYNAMIC** переменной, см. в разделе среды [раздел 4.3](../../parallel/openmp/4-3-omp-dynamic.md) на стр.  
  
-   **omp_set_nested** см. в разделе [раздел 3.1.9](../../parallel/openmp/3-1-9-omp-set-nested-function.md) на странице 40.  
  
-   **OMP_NESTED** переменной, см. в разделе среды [раздел 4.4](../../parallel/openmp/4-4-omp-nested.md) на стр.  
  
-   **omp_set_num_threads** функции библиотеки, в разделе [раздел 3.1.1](../../parallel/openmp/3-1-1-omp-set-num-threads-function.md) на стр.