---
title: 2.4.1 конструкция for | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-parallel
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: 27d2cbce-786b-4819-91d3-d55b2cc57a5e
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: d5165c21f0bf6f2b9757550208d5e8e26a2bd3b1
ms.sourcegitcommit: 7019081488f68abdd5b2935a3b36e2a5e8c571f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
ms.locfileid: "33693553"
---
# <a name="241-for-construct"></a>2.4.1 Конструкция for
**Для** директива идентифицирует итеративный совместной работы конструкция, указывающее выполнения итераций цикла связан в параллельном режиме. Итераций **для** цикла распределяются между потоками, которые уже существуют в команде выполнения параллельной конструкции, к которому он привязан. Синтаксис **для** конструкция следующим образом:  
  
```  
#pragma omp for [clause[[,] clause] ... ] new-linefor-loop  
```  
  
 Предложение является одним из следующих:  
  
 **закрытый (** *списка переменной* **)**  
  
 **firstprivate (** *списка переменной* **)**  
  
 **lastprivate (** *списка переменной* **)**  
  
 **Уменьшение (** *оператор* **:** *переменной-список ***)**  
  
 **упорядоченные**  
  
 **расписание (** *вид*[, *chunk_size*]**)**  
  
 **nowait**  
  
 **Для** директива накладывает ограничения на структуру соответствующего **для** цикла. В частности, соответствующий **для** цикл должен иметь каноническую форму:  
  
 **для (** *init-expr* **;** *b логических op var*; *incr-expr ***)**  
  
 *init-expr*  
 Один из следующих вариантов:  
  
 *var* = *балансировки нагрузки*  
  
 *целочисленный тип var* = *балансировки нагрузки*  
  
 *INCR-expr*  
 Один из следующих вариантов:  
  
 ++*Var*  
  
 *var* ++  
  
 -- *Var*  
  
 *var* --  
  
 *var* += *incr*  
  
 *var* -= *incr*  
  
 *var* = *var* + *incr*  
  
 *var* = *incr* + *var*  
  
 *var* = *var* - *incr*  
  
 *var*  
 Переменная целое число со знаком. Если эта переменная в противном случае будет использоваться совместно, она выполняется неявно закрытым в течение **для**.   Эта переменная не должны изменяться в теле **для** инструкции. Если не указан переменной **lastprivate**, ее значение после цикла не определен.  
  
 *логический оператор*  
 Один из следующих вариантов:  
  
 <  
  
 \<=  
  
 >  
  
 \>=  
  
 *балансировки нагрузки*, *b*, и *incr*  
 Цикл целые инвариантного выражения. Нет синхронизации при вычислении этих выражений не существует. Таким образом любые вычисления побочных эффектов привести к непредсказуемым результатам.  
  
 Обратите внимание, что каноническая форма позволяет количество итераций цикла должна быть вычислена при входе в цикл. Это вычисление выполняется со значениями в тип *var*, после восходящее приведение целочисленных типов. В частности, если значение *b* - *балансировки нагрузки* + *incr* не могут быть представлены в том, что тип, результат не определен. Кроме того, если *логических операций* — < или \<= затем *incr-expr* необходимо вызвать *var* для увеличения в каждой итерации цикла.   Если *логических операций* — > или > = затем *incr-expr* необходимо вызвать *var* уменьшение на каждой итерации цикла.  
  
 **Расписания** предложение указывает, как итераций **для** цикла распределяются между потоками рабочей группы. Правильность программы не должны зависеть потока, в который выполняется определенной итерации. Значение *chunk_size*, если он указан, должно быть выражение цикла инвариантный целое число со знаком с положительным. Нет без синхронизации при вычислении этого выражения. Таким образом любые вычисления побочных эффектов привести к непредсказуемым результатам. Расписание *вид* может принимать одно из следующих действий:  
  
 В ТАБЛИЦЕ 2-1 **расписания** предложение *вид* значения  
  
|||  
|-|-|  
|статический|При **расписания (статический,** *chunk_size ***)** указано, итераций, разделены на блоки размера, определяемого *chunk_size*. Блоки статически присвоены потоков в команде циклического перебора порядке номер потока. Если аргумент *chunk_size* указан, все итерации пространство делится на блоки, приблизительно одинакового размера, с один фрагмент, назначенный каждому потоку.|  
|dynamic|Когда **расписание (динамический,** *chunk_size ***)** указано, итераций разделяются на блоки, каждый из которых содержит ряд *chunk_size* итераций. Каждый блок назначается поток, который ожидает назначения. Поток выполняет блок итераций, а затем ждет Далее назначение, пока остаются фрагменты не могут быть назначены. Обратите внимание на то, возможно, последний блок должно быть присвоено меньшее число итераций. Если аргумент *chunk_size* указано, по умолчанию используется значение 1.|  
|Интерактивная|Когда **расписания (интерактивная,** *chunk_size ***)** указано, итераций назначаются потоки фрагментами с уменьшение размеров. Если поток завершает его назначенного блока итераций, динамически назначается другой фрагмент, пока остаются none. Для *chunk_size* 1, размер каждого фрагмента — приблизительно количество неназначенных итераций, деленное на количество потоков. Эти размеры экспоненциально приблизительно уменьшить значение 1. Для *chunk_size* со значением *k* больше 1, размеры уменьшить приблизительно экспоненциально с *k*, за исключением того, что последний блок может иметь не более чем  *k* итераций. Если аргумент *chunk_size* указано, по умолчанию используется значение 1.|  
|исполняющая среда|Когда **schedule(runtime)** указано, решение о планировании откладывается до времени выполнения. Расписание *вид* и размер фрагментов можно выбрать во время выполнения, установив переменную среды **OMP_SCHEDULE**. Если эта переменная среды не задано, полученный расписание определяется реализацией. Когда **schedule(runtime)** указано, *chunk_size* не должно быть определено.|  
  
 В случае отсутствия явно определенных **расписания** предложение, по умолчанию **расписание** определяется реализацией.  
  
 OpenMP совместимую программу, не следует полагаться на определенное расписание для правильного выполнения. Программа не следует полагаться на расписание *вид* соответствующий точно к описанию, приведенному выше, так как существует возможность иметь вариации в реализациях тому же расписанию *вид* через разные компиляторы. Чтобы выбрать расписание, которое подходит для конкретной ситуации, можно использовать описания.  
  
 **Упорядоченные** предложения должны присутствовать при **упорядоченные** директивы привязки к **для** построения.  
  
 В конце отсутствует неявное барьера **для** создать, если **nowait** указано предложение.  
  
 Ограничения для **для** директивы, следующим образом:  
  
-   **Для** цикла должен быть структурированный блок и, кроме того, его выполнения должна заканчиваться не точкой **разрыв** инструкции.  
  
-   Выражения управления значения цикла **для** цикл, связанный с **для** директивы должны быть одинаковыми для всех потоков в группе.  
  
-   **Для** переменной итерации цикла должен иметь тип целого числа со знаком.  
  
-   Только один **расписания** предложение могут отображаться на **для** директивы.  
  
-   Только один **упорядоченные** предложение могут отображаться на **для** директивы.  
  
-   Только один **nowait** предложение могут отображаться на **для** директивы.  
  
-   Неизвестная if или как часто влияет на любой стороне в течение *chunk_size*, *балансировки нагрузки*, *b*, или *incr* выражения.  
  
-   Значение *chunk_size* выражение должно быть одинаковым для всех потоков в группе.  
  
## <a name="cross-references"></a>Перекрестные ссылки:  
  
-   **закрытый**, **firstprivate**, **lastprivate**, и **сокращения** предложений, в разделе [раздел 2.7.2](../../parallel/openmp/2-7-2-data-sharing-attribute-clauses.md) на странице 25.  
  
-   **OMP_SCHEDULE** переменной, см. в разделе среды [разделе 4.1](../../parallel/openmp/4-1-omp-schedule.md) на стр. 48.  
  
-   **упорядоченные** создания см. в разделе [раздел 2.6.6](../../parallel/openmp/2-6-6-ordered-construct.md) на странице 22.  
  
-   [Приложение Г](../../parallel/openmp/d-using-the-schedule-clause.md), страница 93, предоставляет дополнительные сведения об использовании предложения schedule.