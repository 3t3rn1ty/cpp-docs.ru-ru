---
title: Реализация многопоточности на C++ с MFC | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-parallel
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- MFC [C++], multithreading
- threading [C++], MFC
- worker threads [C++]
- synchronization classes [C++]
- synchronization [C++], multithreading
- threading [MFC], about threading
- CWinThread class, purpose of
- multithreading [C++], MFC
- threading [MFC]
- user interface threads [C++]
ms.assetid: 979605f8-3988-44b5-ac9c-b8cce7fcce14
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 778602a0e9236ad8cc788d8a2306e8f2d143ec49
ms.sourcegitcommit: 7019081488f68abdd5b2935a3b36e2a5e8c571f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
ms.locfileid: "33688574"
---
# <a name="multithreading-with-c-and-mfc"></a>Реализация многопоточности на языке C++ с помощью классов MFC
Библиотека Microsoft Foundation Class (MFC) обеспечивает поддержку для многопоточных приложений. В этом разделе описаны процессы и потоки и подход MFC для многопоточности.  
  
 Процесс — выполняющегося экземпляра приложения. Например дважды щелкните значок «Блокнот», начать процесс, который запускает Блокнот.  
  
 Поток — это ветвь выполнения внутри процесса. При запуске программы Блокнот операционная система создает процесс и начинает выполнение основного потока этого процесса. Когда поток прекращается, завершается и процесс. Этот основной поток передается операционной системе кодом запуска в форме адреса функции. Обычно это адрес **основной** или `WinMain` предоставляется.  
  
 Если требуется, можно создать дополнительные потоки в приложении. Это необходимо для обработки фона или служебных задач в том случае, если требуется запретить пользователю дождаться их завершения может потребоваться. Все потоки в приложениях MFC представлены [CWinThread](../mfc/reference/cwinthread-class.md) объектов. В большинстве случаев вам даже нет для явного создания этих объектов. Вместо этого вызовите вспомогательную функцию [AfxBeginThread](../mfc/reference/application-information-and-management.md#afxbeginthread), которая создает `CWinThread` объект.  
  
 MFC различаются два типа потоков: потоки пользовательского интерфейса и рабочие потоки. Потоки пользовательского интерфейса обычно используются для обработки входных данных пользователя и реагировать на события и сообщения, создаваемые пользователем. Рабочие потоки обычно используются для выполнения задачи, такие как повторное вычисление, которые не требуют ввод данных пользователем. API-Интерфейс Win32 не делает различий между типами потоков; необходимо знать адрес начала потока, чтобы начать его обработку только. MFC обрабатывает потоки пользовательского интерфейса, предоставляя конвейер сообщений для событий в пользовательском интерфейсе. `CWinApp` Примером может служить объект потока пользовательского интерфейса, поскольку он является производным от `CWinThread` и обрабатывает события и сообщения, создаваемые пользователем.  
  
 Особое внимание следует уделять ситуациях, где несколько потоков может потребоваться доступ к тому же объекту. [Многопоточность: Советы по программированию](../parallel/multithreading-programming-tips.md) описание методов, которые можно использовать для устранения проблем, которые могут возникнуть в следующих ситуациях. [Многопоточность: Практическое использование классов синхронизации](../parallel/multithreading-how-to-use-the-synchronization-classes.md) описывает, как использовать классы, которые можно синхронизировать доступ из нескольких потоков на один объект.  
  
 Написание и отладка многопоточного программирования по своей природе является сложная и непредсказуемая задача, поскольку необходимо убедиться, что объекты не обращаются несколько потоков одновременно. В разделах, посвященных многопоточности, не описываются основы многопоточного программирования, только то, как использовать MFC в многопоточных программах. Примеры многопоточных приложений MFC, включенные в Visual C++ иллюстрируют несколько возможности многопоточности и API-интерфейсов Win32, не включенные в MFC; Тем не менее они предназначены только для начальной точки.  
  
 Дополнительные сведения о том, как операционная система обрабатывает процессы и потоки см. в разделе [процессы и потоки](http://msdn.microsoft.com/library/windows/desktop/ms684841) в [!INCLUDE[winsdkshort](../atl-mfc-shared/reference/includes/winsdkshort_md.md)].  
  
 Дополнительные сведения о поддержке многопоточности MFC см. в следующих разделах:  
  
-   [Многопоточность. Создание потоков пользовательского интерфейса](../parallel/multithreading-creating-user-interface-threads.md)  
  
-   [Многопоточность. Создание рабочих потоков](../parallel/multithreading-creating-worker-threads.md)  
  
-   [Многопоточность. Использование классов синхронизации](../parallel/multithreading-how-to-use-the-synchronization-classes.md)  
  
-   [Многопоточность. Завершение потоков](../parallel/multithreading-terminating-threads.md)  
  
-   [Многопоточность. Советы по программированию](../parallel/multithreading-programming-tips.md)  
  
-   [Многопоточность. Использование классов синхронизации](../parallel/multithreading-when-to-use-the-synchronization-classes.md)  
  
## <a name="see-also"></a>См. также  
 [Поддержка многопоточности для устаревшего кода (Visual C++)](../parallel/multithreading-support-for-older-code-visual-cpp.md)