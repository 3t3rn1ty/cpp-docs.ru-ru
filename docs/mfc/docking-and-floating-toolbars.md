---
title: "Закрепленные и плавающие панели инструментов | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "CBRS_SIZE_DYNAMIC"
  - "CBRS_SIZE_FIXED"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "CBRS_ALIGN_ANY - константа"
  - "CBRS_SIZE_DYNAMIC - константа"
  - "CBRS_SIZE_FIXED - константа"
  - "панели инструментов фиксированного размера"
  - "плавающие палитры"
  - "плавающие панели инструментов"
  - "окна фрейма, закрепление панели инструментов"
  - "палитры, плавающее"
  - "размер"
  - "размер, панели инструментов"
  - "элементы управления панели инструментов [MFC], создание оболочек"
  - "панели инструментов [C++], закрепление"
  - "панели инструментов [C++], плавающее"
  - "панели инструментов [C++], размер"
  - "панели инструментов [C++], создание оболочек"
ms.assetid: b7f9f9d4-f629-47d2-a3c4-2b33fa6b51e4
caps.latest.revision: 11
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 7
---
# Закрепленные и плавающие панели инструментов
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Библиотеки Microsoft Foundation Class поддерживает закрепляемых панелей инструментов.  Закрепляемая панели инструментов можно вложить или закрепленного, в любой части родительского окна или ему может быть окончательно удалить; или, в уплыто собственное окно области.  В этой статье описывается, как использовать закрепляемых панелей инструментов в приложениях.  
  
 При использовании мастера приложений для создания схемы приложения, то будет предложено, чтобы выбрать необходимость закрепляемых панелей инструментов.  По умолчанию с помощью мастера приложений создает код, который выполняет 3 необходимого действия, укажите закрепляемую панели инструментов в приложении:  
  
-   [Включение закрепления в окне фреймовом](#_core_enabling_docking_in_a_frame_window).  
  
-   [Включение закрепления для панели инструментов](#_core_enabling_docking_for_a_toolbar).  
  
-   [Закрепление панели инструментов \(в фреймовому окно\)](#_core_docking_the_toolbar).  
  
 Если какие\-либо из этих шагов отсутствует, приложение будет выводиться панель инструментов.  Последние два действия необходимо выполнить для каждой закрепляемой панели инструментов в приложении.  
  
 Другие разделы, описанные в этой статье:  
  
-   [Плавать панель инструментов](#_core_floating_the_toolbar)  
  
-   [Динамическое изменение размера панели инструментов](#_core_dynamically_resizing_the_toolbar)  
  
-   [Задание позиции использованих программы\-оболочек для панели инструментов фиксированной стиля](#_core_setting_wrap_positions_for_a_fixed.2d.style_toolbar)  
  
 В примере MFC [DOCKTOOL](../top/visual-cpp-samples.md) общий пример.  
  
##  <a name="_core_enabling_docking_in_a_frame_window"></a> Включение закрепления в окне фреймовом  
 Для закрепления панели инструментов в фреймовому фреймовое окно окно \(или присвоение\) необходимо включить закрепление разрешения.  Это делается с помощью функции [CFrameWnd::EnableDocking](../Topic/CFrameWnd::EnableDocking.md), которая принимает один параметр `DWORD`, набор отображение бит стиля, сторона фреймового окна поддерживает закрепление.  Если панель инструментов будет иметь закрепленным и несколько стороны, что он может быть закрепляется на, стороны, указанные в параметре, передаваемом в `EnableDocking` используются в следующем порядке: верхний, нижний, левое, вправо.  Если требуется возможность закрепление панели элементов управления в любом месте, передайте `CBRS_ALIGN_ANY` в `EnableDocking`.  
  
##  <a name="_core_enabling_docking_for_a_toolbar"></a> Включение закрепления для панели инструментов  
 После подготовили назначение для закрепления необходимо подготовить инструментом \(источник\) или в подобной таким.  Вызов [CControlBar::EnableDocking](../Topic/CControlBar::EnableDocking.md) для каждой панели инструментов следует закрепить, указывая стороны назначения, у которых должна закрепляться панель инструментов.  Если ни одна из сторон, определенных в вызове совпадению `CControlBar::EnableDocking` разрешенные стороны для закрепления в окне фреймовом, панель инструментов не могут закрепляться \), то они плывут.  После того как панель инструментов стала плавающей, она останется плавающей и не сможет закрепляться в фрейме окна.  
  
 Если результат требуется панель инструментов полностью с плавающей запятой, вызывает `EnableDocking` с параметром 0.  Затем вызов [CFrameWnd::FloatControlBar](../Topic/CFrameWnd::FloatControlBar.md).  Панель инструментов остается с плавающей запятой, постоянно невозможно закрепления в любом месте.  
  
##  <a name="_core_docking_the_toolbar"></a> Закрепление панели инструментов  
 Платформа вызывает функцию [CFrameWnd::DockControlBar](../Topic/CFrameWnd::DockControlBar.md), когда пользователь пытается удалить панель инструментов на стороне фреймового окна, которое позволяет закрепление.  
  
 Кроме того, можно вызвать эту функцию в любое время для закрепления панели элементов управления в фреймовому окно.  Это обычно делается во время инициализации.  Несколько можно закрепить панель инструментов в конкретной стороне фреймового окна.  
  
##  <a name="_core_floating_the_toolbar"></a> Плавать панели инструментов  
 Окончательное удаление закрепляемая панель инструментов из фреймового окна вызывает плавать панель инструментов.  Для этого вызова [CFrameWnd::FloatControlBar](../Topic/CFrameWnd::FloatControlBar.md).  Определите панель инструментов, необходимо плыть, точку, в которой он должен поместить и стиль выравнивания, указывает ли панель инструментов с плавающей запятой горизонтальн или вертикален.  
  
 Платформа вызывает данную функцию, если пользователь перетаскивает панель инструментов с его состыкованного расположения и удаляет его в место, где закрепление не включен.  Это может быть в любом месте внутри или вне фреймового окна.  Как и `DockControlBar` можно также вызвать эту функцию во время инициализации.  
  
 Реализация MFC закрепляемых панелей инструментов не предоставляет некоторые используя функций, найденных в некоторых приложениях, поддерживающих закрепляемых панелей инструментов.  Пользовательские функции, такие как настраивается инструментов не защищены.  
  
##  <a name="_core_dynamically_resizing_the_toolbar"></a> Динамическое изменение размера панели инструментов  
 Начиная с версии Visual C\+\+ 4.0 C, можно сделать ее возможной для пользователей приложения изменить панели инструментов с плавающей запятой динамически.  Обычно в панели инструментов содержит протяженную, линейную фигуры, показанная по горизонтали.  Но можно изменить его тип и ориентацию панели инструментов.  Например, когда пользователь закрепит инструмент для одной из сторон вертикальных фреймового окна, фигура изменяется на то вертикальный макет.  Также можно переформовать панель инструментов в прямоугольник с несколькими строками кнопок.  
  
 Можно выполнить следующие действия.  
  
-   Определите динамический размер как характеристика инструмента.  
  
-   Как указать размер устраняет характеристика инструмента.  
  
 Чтобы обеспечить такую поддержку, существует 2 новых стиля инструмента для использования на вызовах функцию\-член [CToolBar::Create](../Topic/CToolBar::Create.md).  К ним относятся:  
  
-   Панель элементов управления **CBRS\_SIZE\_DYNAMIC** являются динамическими.  
  
-   Панель элементов управления **CBRS\_SIZE\_FIXED** исправлена.  
  
 Стиль размера в динамический позволяет пользователю изменять панель инструментов во время его с плавающей запятой, но не во время его обрезается.  Панель инструментов «создать», где требуется изменение вида как перетаскивания пользователя его границы.  
  
 Стиль исправлено размером сохраняет состояния использованих программы\-оболочек инструмента, исправление положение кнопок в каждом столбце.  Пользователя приложения не может изменить фигуры инструмента.  Использование панели оболочки на пять раз, например расположения разделителей между кнопками.  Он поддерживает эту форму ли ограничен панель инструментов или плавать.  Эффект фиксированная палитра с несколькими столбцами кнопок.  
  
 Можно также использовать [CToolBar::GetButtonStyle](../Topic/CToolBar::GetButtonStyle.md) вернуть состояние и стиль для кнопок с инструментов.  Определяет, как стиль кнопки появляется кнопка и принципы ее отвечает на ввод пользователя; состояние указывает ли кнопка в создаватьом программу\-оболочку состоянии.  
  
##  <a name="_core_setting_wrap_positions_for_a_fixed.2d.style_toolbar"></a> Задание позиции использованих программы\-оболочек для панели инструментов фиксированной стиля  
 Для панели инструментов с стилем зафиксированным размером обозначьте индексы кнопки панели инструментов на панель инструментов экземпляра.  В следующем коде показано, как сделать это в переопределении `OnCreate` основного фреймового окна:  
  
 [!code-cpp[NVC_MFCDocViewSDI#10](../mfc/codesnippet/CPP/docking-and-floating-toolbars_1.cpp)]  
  
 В примере MFC [DOCKTOOL](../top/visual-cpp-samples.md) является использование функций\-членов класса [CControlBar](../mfc/reference/ccontrolbar-class.md) и [CToolBar](../mfc/reference/ctoolbar-class.md) для управления динамический макет панели инструментов.  См. файл в EDITBAR.CPP DOCKTOOL.  
  
### Дополнительные сведения  
  
-   [Основные сведения о панели инструментов](../mfc/toolbar-fundamentals.md)  
  
-   [Всплывающие подсказки панели инструментов](../Topic/Toolbar%20Tool%20Tips.md)  
  
-   [С помощью панели инструментов старые](../Topic/Using%20Your%20Old%20Toolbars.md)  
  
## См. также  
 [Реализация панели инструментов MFC](../mfc/mfc-toolbar-implementation.md)