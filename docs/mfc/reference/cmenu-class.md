---
title: "CMenu-класс | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-cpp
ms.tgt_pltfrm: 
ms.topic: reference
f1_keywords:
- CMenu
dev_langs:
- C++
helpviewer_keywords:
- HMENU
- menus, class
- menus, base class
- menus, creating
- menus, managing
- CMenu class
ms.assetid: 40cacfdc-d45c-4ec7-bf28-991c72812499
caps.latest.revision: 22
author: mikeblome
ms.author: mblome
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: 0e0c08ddc57d437c51872b5186ae3fc983bb0199
ms.openlocfilehash: dcd353bf0be5d23c1782347f54b16a875ed190ed
ms.lasthandoff: 02/24/2017

---
# <a name="cmenu-class"></a>CMenu-класс
Инкапсуляция `HMENU`Windows.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
class CMenu : public CObject  
```  
  
## <a name="members"></a>Члены  
  
### <a name="public-constructors"></a>Открытые конструкторы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMenu::CMenu](#cmenu)|Создает объект `CMenu`.|  
  
### <a name="public-methods"></a>Открытые методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMenu::AppendMenu](#appendmenu)|Добавляет новый элемент в конец этого меню.|  
|[CMenu::Attach](#attach)|Присоединяет дескриптора меню Windows `CMenu` объекта.|  
|[CMenu::CheckMenuItem](#checkmenuitem)|Устанавливает флажок рядом с полем или снимает флажок с пункта меню в контекстном меню.|  
|[CMenu::CheckMenuRadioItem](#checkmenuradioitem)|Помещает переключатель рядом с элементом меню и удаляет переключатель от всех остальных пунктов меню в группе.|  
|[CMenu::CreateMenu](#createmenu)|Создает пустое меню и присоединяет его к `CMenu` объекта.|  
|[CMenu::CreatePopupMenu](#createpopupmenu)|Создает пустое всплывающих меню и присоединяет его к `CMenu` объекта.|  
|[CMenu::DeleteMenu](#deletemenu)|Удаляет указанный элемент из меню. Если этот элемент меню имеет связанный всплывающего меню, Уничтожает дескриптор для контекстного меню и освобождает память, занятая ее.|  
|[CMenu::DeleteTempMap](#deletetempmap)|Удаляет все временные `CMenu` объектов, созданных `FromHandle` функции-члена.|  
|[CMenu::DestroyMenu](#destroymenu)|Удаляет меню, подключенное к `CMenu` объекта и освобождает память, занимаемую меню.|  
|[CMenu::Detach](#detach)|Отсоединяет дескриптор меню Windows из `CMenu` и возвращает дескриптор.|  
|[CMenu::DrawItem](#drawitem)|Вызывается инфраструктурой при изменении внешнего вида пользовательского меню изменения.|  
|[CMenu::EnableMenuItem](#enablemenuitem)|Включает, отключает или затемняется (оттенки серого) пункта меню.|  
|[CMenu::FromHandle](#fromhandle)|Возвращает указатель на `CMenu` объект, заданный дескриптор меню Windows.|  
|[CMenu::GetDefaultItem](#getdefaultitem)|Определяет элемент меню по умолчанию, заданного в меню.|  
|[CMenu::GetMenuContextHelpId](#getmenucontexthelpid)|Получает идентификатор контекста справки, связанный с меню.|  
|[CMenu::GetMenuInfo](#getmenuinfo)|Извлекает сведения о конкретных меню.|  
|[CMenu::GetMenuItemCount](#getmenuitemcount)|Определяет количество элементов в меню всплывающее окно или верхнего уровня.|  
|[CMenu::GetMenuItemID](#getmenuitemid)|Получает идентификатор пункта меню для пункта меню, расположенный в заданной позиции.|  
|[CMenu::GetMenuItemInfo](#getmenuiteminfo)|Извлекает сведения о пункта меню.|  
|[CMenu::GetMenuState](#getmenustate)|Возвращает состояние заданный элемент меню или количество элементов в контекстном меню.|  
|[CMenu::GetMenuString](#getmenustring)|Получает метку заданный элемент меню.|  
|[CMenu::GetSafeHmenu](#getsafehmenu)|Возвращает `m_hMenu` Инкапсулированный данным итератором `CMenu` объекта.|  
|[CMenu::GetSubMenu](#getsubmenu)|Извлекает указатель на всплывающее меню.|  
|[CMenu::InsertMenu](#insertmenu)|Вставляет новый элемент меню в указанной позиции, движение других элементов в меню.|  
|[CMenu::InsertMenuItem](#insertmenuitem)|Вставляет новый элемент меню в указанной позиции в меню.|  
|[CMenu::LoadMenu](#loadmenu)|Загружает ресурс меню из исполняемого файла и присоединяется к `CMenu` объекта.|  
|[CMenu::LoadMenuIndirect](#loadmenuindirect)|Загружает меню из меню шаблона в памяти и присоединяет его к `CMenu` объекта.|  
|[CMenu::MeasureItem](#measureitem)|Вызывается платформой для определения измерения меню, при создании пользовательского меню.|  
|[CMenu::ModifyMenu](#modifymenu)|Изменяет существующий элемент меню в указанной позиции.|  
|[CMenu::RemoveMenu](#removemenu)|Удаляет элемент меню со связанным всплывающее меню указанного меню.|  
|[CMenu::SetDefaultItem](#setdefaultitem)|Задает элемент меню по умолчанию для указанного меню.|  
|[CMenu::SetMenuContextHelpId](#setmenucontexthelpid)|Задает идентификатор контекста справки, сопоставляемое с меню.|  
|[CMenu::SetMenuInfo](#setmenuinfo)|Задает сведения о конкретных меню.|  
|[CMenu::SetMenuItemBitmaps](#setmenuitembitmaps)|Связывает указанный флажок точечные рисунки с элементом меню.|  
|[CMenu::SetMenuItemInfo](#setmenuiteminfo)|Изменение сведений о пункта меню.|  
|[CMenu::TrackPopupMenu](#trackpopupmenu)|Отображает число с плавающей контекстное меню в указанном месте и отслеживает список элементов всплывающего меню.|  
|[CMenu::TrackPopupMenuEx](#trackpopupmenuex)|Отображает число с плавающей контекстное меню в указанном месте и отслеживает список элементов всплывающего меню.|  
  
### <a name="public-operators"></a>Открытые операторы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMenu::operator описателя HMENU](#operator_hmenu)|Получает дескриптор объекта меню.|  
|[CMenu::operator! =](#operator_neq)|Определяет неравенство двух объектов меню.|  
|[CMenu::operator ==](#operator_eq_eq)|Определяет, равны ли два объекта меню.|  
  
### <a name="public-data-members"></a>Открытые члены данных  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMenu::m_hMenu](#m_hmenu)|Определяет дескриптор меню Windows, присоединенные к `CMenu` объекта.|  
  
## <a name="remarks"></a>Примечания  
 Он предоставляет функции-члены для создания, отслеживания, обновление и удаление меню.  
  
 Создание `CMenu` объектов в кадре стека как локальной, затем вызовите `CMenu`функции-члены для управления новое меню, при необходимости. Затем вызовите [CWnd::SetMenu](../../mfc/reference/cwnd-class.md#setmenu) для установки в меню окна, за которым следует путем вызова `CMenu` объекта [отсоединения](#detach) функции-члена. `CWnd::SetMenu` Функция-член устанавливает меню окна в новое меню, окно перерисовку в соответствии с изменениями меню и также передает владение меню окна. Вызов **отсоединения** отсоединяет `HMENU` из `CMenu` объекта, так что при локальном `CMenu` переменной выйдет за пределы области, `CMenu` деструктора объекта не пытается уничтожить меню, больше не является владельцем. Само меню автоматически уничтожается при уничтожении окна.  
  
 Можно использовать [LoadMenuIndirect](#loadmenuindirect) для создания меню из шаблона в памяти, но меню, созданные из ресурса путем вызова функции-члена [LoadMenu](#loadmenu) повышает удобство поддержки и сам ресурс меню можно создавать и изменять с помощью редактора меню.  
  
## <a name="inheritance-hierarchy"></a>Иерархия наследования  
 [CObject](../../mfc/reference/cobject-class.md)  
  
 `CMenu`  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** afxwin.h  
  
##  <a name="a-nameappendmenua--cmenuappendmenu"></a><a name="appendmenu"></a>CMenu::AppendMenu  
 Добавляет новый элемент в конец меню.  
  
```  
BOOL AppendMenu(
    UINT nFlags,  
    UINT_PTR nIDNewItem = 0,  
    LPCTSTR lpszNewItem = NULL);

 
BOOL AppendMenu(
    UINT nFlags,  
    UINT_PTR nIDNewItem,  
    const CBitmap* pBmp);
```  
  
### <a name="parameters"></a>Параметры  
 `nFlags`  
 Указывает сведения о состоянии нового элемента меню при его добавлении в меню. Он состоит из одного или нескольких значений, перечисленных в разделе «Примечания».  
  
 `nIDNewItem`  
 Указывает идентификатор команды нового элемента меню или, если `nFlags` равен **MF_POPUP**, дескриптор меню ( `HMENU`) из всплывающего меню. `nIDNewItem` Параметр не учитывается (не необходимости), если `nFlags` равен **MF_SEPARATOR**.  
  
 `lpszNewItem`  
 Указывает содержимое нового пункта меню. `nFlags` Параметр используется для интерпретации `lpszNewItem` следующим образом:  
  
|nFlags|Интерпретация lpszNewItem|  
|------------|-----------------------------------|  
|`MF_OWNERDRAW`|Содержит 32-разрядное значение, приложение может использовать для поддержания дополнительные данные, связанные с элементом меню предоставляемый приложением. Это 32-разрядное значение доступной для приложения при его обработке `WM_MEASUREITEM` и `WM_DRAWITEM` сообщений. Значение, хранящееся в **itemData** член структуры, предоставлены эти сообщения.|  
|**MF_STRING**|Содержит указатель на строку, завершающуюся значением null. Это интерпретацию по умолчанию.|  
|**MF_SEPARATOR**|`lpszNewItem` Параметр учитывается (не требуется).|  
  
 *pBmp*  
 Указывает на `CBitmap` объект, который будет использоваться в качестве элемента меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если функция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Приложение может задать состояние элемента меню, задавая значения в `nFlags`. Если `nIDNewItem` указывает всплывающего меню, оно становится частью меню, к которому добавляется. При удалении этого меню будут уничтожены и пункты меню. Пункты меню должны быть отсоединены от `CMenu` , чтобы избежать конфликтов. Обратите внимание, что **MF_STRING** и `MF_OWNERDRAW` недопустимы для точечного рисунка версии `AppendMenu`.  
  
 В следующем списке описываются флаги, которые могут быть установлены в `nFlags`:  
  
- **MF_CHECKED** переключаться с **MF_UNCHECKED** для размещения по умолчанию флажок рядом с элементом. Когда приложение предоставляет растровые изображения галочки (см. [SetMenuItemBitmaps](#setmenuitembitmaps) функции-члена), появляется точечный «флажок на».  
  
- **MF_UNCHECKED** переключаться с **MF_CHECKED** снимите флажок рядом с элементом. Когда приложение предоставляет растровые изображения галочки (см. `SetMenuItemBitmaps` функции-члена), появляется точечный «флажок off».  
  
- **MF_DISABLED** отключает пункт меню, чтобы он не может быть выбран, но не затемнять.  
  
- `MF_ENABLED`Включает элемент меню, чтобы его можно выбрать и их восстановления из состояния серым цветом.  
  
- **MF_GRAYED** отключает пункт меню, чтобы он не может быть выбран и затемняет его.  
  
- **MF_MENUBARBREAK** помещает элемент на новой строке в статические меню или в новый столбец во всплывающих меню. Новый столбец во всплывающем меню будут разделены из старого столбца вертикальной линии деления.  
  
- **MF_MENUBREAK** помещает элемент на новой строке в статические меню или в новый столбец во всплывающих меню. Нет разделителя помещается между столбцами.  
  
- `MF_OWNERDRAW`Указывает, что элемент является рисование владельцем элемента. Если меню отображается в первый раз, окна, которому принадлежит меню получает `WM_MEASUREITEM` сообщения, которое получает высоту и ширину элемента меню. `WM_DRAWITEM` Сообщение является отправленного всякий раз, когда владелец необходимо обновить внешний вид пункта меню. Этот параметр недопустим для элемента меню верхнего уровня.  
  
- **MF_POPUP** указывает, что элемент меню имеет всплывающего меню, связанные с ним. Параметр ID указывает дескриптор раскрывающееся меню, которое требуется связать с элементом. Используется для добавления элемента во всплывающем меню всплывающее меню верхнего уровня или иерархические всплывающего меню.  
  
- **MF_SEPARATOR** рисует горизонтальную линию разделения. Может использоваться только в контекстном меню. Эта строка не серым цветом, отключена или выделенным. Остальные параметры учитываются.  
  
- **MF_STRING** указывает, что элемент меню является символьной строкой.  
  
 Каждый из следующих групп перечислены флаги, которые являются взаимоисключающими и не могут использоваться совместно.  
  
- **MF_DISABLED**, `MF_ENABLED`, и **MF_GRAYED**  
  
- **MF_STRING**, `MF_OWNERDRAW`, **MF_SEPARATOR**и версию точечного рисунка  
  
- **MF_MENUBARBREAK** и **MF_MENUBREAK**  
  
- **MF_CHECKED** и **MF_UNCHECKED**  
  
 Всякий раз, когда меню, который находится в окне изменяется (ли отображается окно), приложение должно вызвать [CWnd::DrawMenuBar](../../mfc/reference/cwnd-class.md#drawmenubar).  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::CreateMenu](#createmenu).  
  
##  <a name="a-nameattacha--cmenuattach"></a><a name="attach"></a>CMenu::Attach  
 Присоединяет к существующему меню Windows `CMenu` объекта.  
  
```  
BOOL Attach(HMENU hMenu);
```  
  
### <a name="parameters"></a>Параметры  
 `hMenu`  
 Указывает дескриптор меню Windows.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если операция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Эта функция не должна вызываться, если меню уже присоединена к `CMenu` объекта. Дескриптор меню хранится в `m_hMenu` элемент данных.  
  
 Если меню, которым требуется управлять уже связан с окном, можно использовать [CWnd::GetMenu](../../mfc/reference/cwnd-class.md#getmenu) функцию для получения дескриптора меню.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#21;](../../mfc/reference/codesnippet/cpp/cmenu-class_1.cpp)]  
  
##  <a name="a-namecheckmenuitema--cmenucheckmenuitem"></a><a name="checkmenuitem"></a>CMenu::CheckMenuItem  
 Флажки для добавляет или удаляет флажки из пунктов меню во всплывающем меню.  
  
```  
UINT CheckMenuItem(
    UINT nIDCheckItem,  
    UINT nCheck);
```  
  
### <a name="parameters"></a>Параметры  
 `nIDCheckItem`  
 Указывает пункт меню, чтобы проверить, что определяется `nCheck`.  
  
 `nCheck`  
 Указывает способ проверки элементом меню и как определить положение элемента в меню. `nCheck` Параметр может быть сочетанием **MF_CHECKED** или **MF_UNCHECKED** с **MF_BYPOSITION** или **MF_BYCOMMAND** флаги. Эти флаги можно комбинировать с помощью побитового оператора OR. Они имеют следующий смысл:  
  
- **MF_BYCOMMAND** указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию.  
  
- **MF_BYPOSITION** указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.  
  
- **MF_CHECKED** переключаться с **MF_UNCHECKED** для размещения по умолчанию флажок рядом с элементом.  
  
- **MF_UNCHECKED** переключаться с **MF_CHECKED** снимите флажок рядом с элементом.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Предыдущее состояние элемента: **MF_CHECKED** или **MF_UNCHECKED**, или 0xFFFFFFFF, если элемент меню не существует.  
  
### <a name="remarks"></a>Примечания  
 `nIDCheckItem` Указывает изменяемого элемента.  
  
 `nIDCheckItem` Параметра может определять элемент всплывающего меню, а также пункта меню. Никаких специальных шагов необходимых для проверки элемента во всплывающем меню. Не удается проверить пункты меню верхнего уровня. Всплывающее меню должен быть проверен по позиции, так как он не имеет идентификатор пункта меню, связанные с ним.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::GetMenuState](#getmenustate).  
  
##  <a name="a-namecheckmenuradioitema--cmenucheckmenuradioitem"></a><a name="checkmenuradioitem"></a>CMenu::CheckMenuRadioItem  
 Проверяет указанный меню и делает элемент радио.  
  
```  
BOOL CheckMenuRadioItem(
    UINT nIDFirst,  
    UINT nIDLast,  
    UINT nIDItem,  
    UINT nFlags);
```  
  
### <a name="parameters"></a>Параметры  
 `nIDFirst`  
 Указывает (как идентификатор или смещение, в зависимости от значения `nFlags`) первого элемента меню в группе переключателей.  
  
 `nIDLast`  
 Указывает (как идентификатор или смещение, в зависимости от значения `nFlags`) последнего пункта меню в группе переключателей.  
  
 `nIDItem`  
 Указывает (как идентификатор или смещение, в зависимости от значения `nFlags`) элемента в группе, которая будет проверяться с помощью переключателя.  
  
 `nFlags`  
 Задает интерпретацию `nIDFirst`, `nIDLast`, и `nIDItem` следующим образом:  
  
|nFlags|Интерпретация|  
|------------|--------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.|  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если выполнено успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 В то же время функция снимает все пункты меню в соответствующей группы и сбрасывает тип радио item для этих элементов. Отмеченный элемент отображается с помощью переключателей кнопки (или маркер) вместо растрового изображения галочки.  
  
### <a name="example"></a>Пример  
  В примере показано [ON_COMMAND_RANGE](http://msdn.microsoft.com/library/c52719fc-dd6e-48c9-af79-383f48d608e0).  
  
##  <a name="a-namecmenua--cmenucmenu"></a><a name="cmenu"></a>CMenu::CMenu  
 Создает пустое меню и присоединяет его к `CMenu` объекта.  
  
```  
CMenu();
```  
  
### <a name="remarks"></a>Примечания  
 Меню не создается, пока не будет вызван один из создать или загрузить функции-члены **CMenu:**  
  
- [Предоставил](#createmenu)  
  
- [CreatePopupMenu](#createpopupmenu)  
  
- [LoadMenu](#loadmenu)  
  
- [LoadMenuIndirect](#loadmenuindirect)  
  
- [Attach](#attach)  
  
##  <a name="a-namecreatemenua--cmenucreatemenu"></a><a name="createmenu"></a>CMenu::CreateMenu  
 Меню создает и присоединяет его к `CMenu` объекта.  
  
```  
BOOL CreateMenu();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если меню был создан успешно. в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Меню изначально пуст. Элементы меню можно добавлять с помощью `AppendMenu` или `InsertMenu` функции-члена.  
  
 Если меню назначена к окну, автоматически уничтожается при уничтожении окна.  
  
 Перед завершением работы приложения необходимо освободить системные ресурсы, связанные с меню, если меню не назначен окна. Приложение освобождает меню путем вызова [DestroyMenu](#destroymenu) функции-члена.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#22;](../../mfc/reference/codesnippet/cpp/cmenu-class_2.cpp)]  
  
##  <a name="a-namecreatepopupmenua--cmenucreatepopupmenu"></a><a name="createpopupmenu"></a>CMenu::CreatePopupMenu  
 Создает всплывающее меню и присоединяет его к `CMenu` объекта.  
  
```  
BOOL CreatePopupMenu();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если контекстного меню был успешно создан; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Меню изначально пуст. Элементы меню можно добавлять с помощью `AppendMenu` или `InsertMenu` функции-члена. Приложение можно добавить во всплывающем меню существующих или всплывающих меню. `TrackPopupMenu` Функция-член может использоваться для отображения этого меню в виде всплывающего меню с плавающей запятой и отслеживать параметры всплывающего меню.  
  
 Если меню назначена к окну, автоматически уничтожается при уничтожении окна. Если меню добавляется в существующее меню, автоматически уничтожается при уничтожении этого меню.  
  
 Перед завершением работы приложения необходимо освободить системные ресурсы, связанные с помощью всплывающего меню, если меню не назначен окна. Приложение освобождает меню путем вызова [DestroyMenu](#destroymenu) функции-члена.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::CreateMenu](#createmenu).  
  
##  <a name="a-namedeletemenua--cmenudeletemenu"></a><a name="deletemenu"></a>CMenu::DeleteMenu  
 Удаляет элемент из меню.  
  
```  
BOOL DeleteMenu(
    UINT nPosition,  
    UINT nFlags);
```  
  
### <a name="parameters"></a>Параметры  
 `nPosition`  
 Указывает элемент меню, которые требуется удалить, как определяется `nFlags`.  
  
 `nFlags`  
 Используется для интерпретации `nPosition` следующим образом:  
  
|nFlags|Интерпретация nPosition|  
|------------|---------------------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.|  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если функция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Если этот элемент меню имеет связанный всплывающего меню `DeleteMenu` Уничтожает дескриптор для контекстного меню и освобождает память, используемая во всплывающем меню.  
  
 Всякий раз, когда меню, который находится в окне изменяется (ли отображается окно), приложение должно вызвать [CWnd::DrawMenuBar](../../mfc/reference/cwnd-class.md#drawmenubar).  
  
### <a name="example"></a>Пример  
  В примере показано [CWnd::GetMenu](../../mfc/reference/cwnd-class.md#getmenu).  
  
##  <a name="a-namedeletetempmapa--cmenudeletetempmap"></a><a name="deletetempmap"></a>CMenu::DeleteTempMap  
 Вызывается автоматически `CWinApp` обработчик времени простоя, удаляет все временные `CMenu` объектов, созданных [FromHandle](#fromhandle) функции-члена.  
  
```  
static void PASCAL DeleteTempMap();
```  
  
### <a name="remarks"></a>Примечания  
 `DeleteTempMap`Отсоединяет объект меню Windows, присоединенный к временной `CMenu` объекта перед удалением `CMenu` объекта.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#23;](../../mfc/reference/codesnippet/cpp/cmenu-class_3.cpp)]  
  
##  <a name="a-namedestroymenua--cmenudestroymenu"></a><a name="destroymenu"></a>CMenu::DestroyMenu  
 Уничтожает меню и ресурсы Windows, которые были использованы.  
  
```  
BOOL DestroyMenu();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если меню удаляется; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Меню отсоединяется от `CMenu` объекта перед его удалением. Windows `DestroyMenu` функция вызывается автоматически в `CMenu` деструктор.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::CreateMenu](#createmenu).  
  
##  <a name="a-namedetacha--cmenudetach"></a><a name="detach"></a>CMenu::Detach  
 Отсоединяет меню Windows `CMenu` объекта и возвращает дескриптор.  
  
```  
HMENU Detach();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Дескриптор типа `HMENU`, в меню Windows, если успешно; в противном случае **NULL**.  
  
### <a name="remarks"></a>Примечания  
 `m_hMenu` Член данных имеет значение **NULL**.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#21;](../../mfc/reference/codesnippet/cpp/cmenu-class_1.cpp)]  
  
##  <a name="a-namedrawitema--cmenudrawitem"></a><a name="drawitem"></a>CMenu::DrawItem  
 Вызывается инфраструктурой при изменении внешнего вида пользовательского меню изменения.  
  
```  
virtual void DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct);
```  
  
### <a name="parameters"></a>Параметры  
 `lpDrawItemStruct`  
 Указатель на [DRAWITEMSTRUCT](../../mfc/reference/drawitemstruct-structure.md) структуру, содержащую сведения о типе требуется рисования.  
  
### <a name="remarks"></a>Примечания  
 `itemAction` Членом `DRAWITEMSTRUCT` структура определяет рисования действие, которое должно быть выполнено. Переопределить эту функцию-член для реализации отрисовки рисование владельцем `CMenu` объекта. Приложение должно восстановить всех графических устройств интерфейс (GDI) выбранных объектов в контексте отображения указано в `lpDrawItemStruct` до завершения работы этой функции-члена.  
  
 В разделе [CWnd::OnDrawItem](../../mfc/reference/cwnd-class.md#ondrawitem) описание `DRAWITEMSTRUCT` структуры.  
  
### <a name="example"></a>Пример  
 Следующий код — от MFC [CTRLTEST](../../visual-cpp-samples.md) пример:  
  
 [!code-cpp[NVC_MFCWindowing&#24;](../../mfc/reference/codesnippet/cpp/cmenu-class_4.cpp)]  
  
##  <a name="a-nameenablemenuitema--cmenuenablemenuitem"></a><a name="enablemenuitem"></a>CMenu::EnableMenuItem  
 Включает, отключает или затемняется пункта меню.  
  
```  
UINT EnableMenuItem(
    UINT nIDEnableItem,  
    UINT nEnable);
```  
  
### <a name="parameters"></a>Параметры  
 *nIDEnableItem*  
 Указывает элемент меню для включения определяется `nEnable`. Этот параметр можно указать элементы всплывающего меню, а также стандартных элементов меню.  
  
 `nEnable`  
 Указывает действие, предпринимаемое. Он может быть сочетанием **MF_DISABLED**, `MF_ENABLED`, или **MF_GRAYED**, с **MF_BYCOMMAND** или **MF_BYPOSITION**. Эти значения могут объединяться с помощью побитового оператора OR. Эти значения имеют следующий смысл:  
  
- **MF_BYCOMMAND** указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию.  
  
- **MF_BYPOSITION** указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.  
  
- **MF_DISABLED** отключает пункт меню, чтобы он не может быть выбран, но не затемнять.  
  
- `MF_ENABLED`Включает элемент меню, чтобы его можно выбрать и их восстановления из состояния серым цветом.  
  
- **MF_GRAYED** отключает пункт меню, чтобы он не может быть выбран и затемняет его.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Предыдущее состояние ( **MF_DISABLED**, `MF_ENABLED`, или **MF_GRAYED**) или -1, если он не является допустимым.  
  
### <a name="remarks"></a>Примечания  
 [Предоставил](#createmenu), [InsertMenu](#insertmenu), [ModifyMenu](#modifymenu), и [LoadMenuIndirect](#loadmenuindirect) функции-члены также можно задать состояние (включена, отключена или заблокирована) пункта меню.  
  
 С помощью **MF_BYPOSITION** значения требуется приложение для использования правильный `CMenu`. Если `CMenu` меню панель, затронутых пункт меню верхнего уровня (пункт меню). Чтобы задать состояние элемента во всплывающем меню всплывающее окно или вложенные по позиции, приложение должно указать `CMenu` из контекстного меню.  
  
 Если приложение задает **MF_BYCOMMAND** флага Windows проверяет все элементы всплывающего меню, подчиненных `CMenu`; таким образом, только при наличии дублированию пунктов, с помощью `CMenu` меню панели будет достаточно.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#25;](../../mfc/reference/codesnippet/cpp/cmenu-class_5.cpp)]  
  
##  <a name="a-namefromhandlea--cmenufromhandle"></a><a name="fromhandle"></a>CMenu::FromHandle  
 Возвращает указатель на `CMenu` объект, заданный дескриптор окна для меню.  
  
```  
static CMenu* PASCAL FromHandle(HMENU hMenu);
```  
  
### <a name="parameters"></a>Параметры  
 `hMenu`  
 Дескриптор Windows для меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на `CMenu` , может быть временным или постоянным.  
  
### <a name="remarks"></a>Примечания  
 Если `CMenu` объект еще не присоединен к объекту меню Windows, временный `CMenu` объект создается и прикрепляется.  
  
 Этот временный `CMenu` допустимо только до следующего приложения имеет время простоя в свой цикл событий, в какое время будут удалены все временные объекты.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::CreateMenu](#createmenu).  
  
##  <a name="a-namegetdefaultitema--cmenugetdefaultitem"></a><a name="getdefaultitem"></a>CMenu::GetDefaultItem  
 Определяет элемент меню по умолчанию, заданного в меню.  
  
```  
UINT GetDefaultItem(
    UINT gmdiFlags,  
    BOOL fByPos = FALSE);
```  
  
### <a name="parameters"></a>Параметры  
 *gmdiFlags*  
 Значение, указывающее, как будет выполняться поиск для элементов меню. Этот параметр может быть none, одно или сочетание следующих значений:  
  
|Значение|Значение|  
|-----------|-------------|  
|**GMDI_GOINTOPOPUPS**|Указывает, что, если элемент по умолчанию открывается подменю, функция поиска в соответствующих подменю рекурсивно. Если подменю нет элемента по умолчанию, возвращаемое значение определяет элемент, который открывается подменю.<br /><br /> По умолчанию функция возвращает первый элемент по умолчанию в меню указанным, независимо от того, элемент, который открывается подменю.|  
|**GMDI_USEDISABLED**|Указывает, что функция для возвращения элемента по умолчанию, даже если она отключена.<br /><br /> По умолчанию функция пропускает элементы отключенный или выделенный серым цветом.|  
  
 `fByPos`  
 Значение, указывающее, следует ли получить идентификатор элемента меню или позиции. Если этот параметр равен **FALSE**, возвращается идентификатор. В противном случае возвращается позиция.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если функция выполняется успешно, возвращаемое значение является идентификатором или положение данного элемента меню. Если функция завершается с ошибкой, возвращаемое значение равно - 1.  
  
### <a name="remarks"></a>Примечания  
 Эта функция-член реализует поведение функции Win32 [GetMenuDefaultItem](http://msdn.microsoft.com/library/windows/desktop/ms647976), как описано в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namegetmenucontexthelpida--cmenugetmenucontexthelpid"></a><a name="getmenucontexthelpid"></a>CMenu::GetMenuContextHelpId  
 Извлекает идентификатор, связанный с помощью контекста `CMenu`.  
  
```  
DWORD GetMenuContextHelpId() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Контекстная справка, идентификатор, который в данный момент связанный с `CMenu` если оно имеется; в противном случае — нуль.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namegetmenuinfoa--cmenugetmenuinfo"></a><a name="getmenuinfo"></a>CMenu::GetMenuInfo  
 Возвращает сведения о меню.  
  
```  
BOOL GetMenuInfo(LPMENUINFO lpcmi) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `lpcmi`  
 Указатель на [MENUINFO](http://msdn.microsoft.com/library/windows/desktop/ms647575) структуру, содержащую сведения для меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если функция выполняется успешно, возвращается ненулевое значение; в противном случае — возвращаемое значение равно нулю.  
  
### <a name="remarks"></a>Примечания  
 Эта функция вызывается для получения информации о меню.  
  
##  <a name="a-namegetmenuitemcounta--cmenugetmenuitemcount"></a><a name="getmenuitemcount"></a>CMenu::GetMenuItemCount  
 Определяет количество элементов в меню всплывающее окно или верхнего уровня.  
  
```  
UINT GetMenuItemCount() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Число элементов в меню, если функция выполнена успешно; в противном случае — значение -1.  
  
### <a name="example"></a>Пример  
  В примере показано [CWnd::GetMenu](../../mfc/reference/cwnd-class.md#getmenu).  
  
##  <a name="a-namegetmenuitemida--cmenugetmenuitemid"></a><a name="getmenuitemid"></a>CMenu::GetMenuItemID  
 Получает идентификатор пункта меню для пункта меню, который расположен в позиции, определяемой `nPos`.  
  
```  
UINT GetMenuItemID(int nPos) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `nPos`  
 Задает расположение (начиная с нуля) элемента меню, идентификатор которого извлекается.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Идентификатор элемента для указанного элемента в контекстном меню, если функция выполнена успешно. Если указанный элемент всплывающего меню (в отличие от элемента в контекстном меню), возвращаемое значение –&1;. Если `nPos` соответствует **РАЗДЕЛИТЕЛЯ** элемент меню, возвращаемое значение равно 0.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namegetmenuiteminfoa--cmenugetmenuiteminfo"></a><a name="getmenuiteminfo"></a>CMenu::GetMenuItemInfo  
 Извлекает сведения о пункта меню.  
  
```  
BOOL GetMenuItemInfo(
    UINT uItem,  
    LPMENUITEMINFO lpMenuItemInfo,  
    BOOL fByPos = FALSE);
```  
  
### <a name="parameters"></a>Параметры  
 `uItem`  
 Идентификатор или позиция пункта меню, о котором требуется получить сведения. Значение этого параметра зависит от значения `ByPos`.  
  
 `lpMenuItemInfo`  
 Указатель на [MENUITEMINFO](http://msdn.microsoft.com/library/windows/desktop/ms647578), как описано в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)], который содержит сведения о меню.  
  
 `fByPos`  
 Значение, указывающее значение `nIDItem`. По умолчанию `ByPos` — **FALSE**, который указывает, что uItem — это идентификатор элемента меню. Если `ByPos` равно **FALSE**, он указывает положение элемента меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если функция выполняется успешно, возвращается ненулевое значение. Если функция выполняется неудачно, возвращается нулевое значение. Чтобы получить расширенные сведения об ошибке, используйте функцию Win32 [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360), как описано в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="remarks"></a>Примечания  
 Эта функция-член реализует поведение функции Win32 [GetMenuItemInfo](http://msdn.microsoft.com/library/windows/desktop/ms647980), как описано в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)]. Обратите внимание, что в реализации MFC `GetMenuItemInfo`, не следует использовать дескриптор меню.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#26;](../../mfc/reference/codesnippet/cpp/cmenu-class_6.cpp)]  
  
##  <a name="a-namegetmenustatea--cmenugetmenustate"></a><a name="getmenustate"></a>CMenu::GetMenuState  
 Возвращает состояние заданный элемент меню или количество элементов в контекстном меню.  
  
```  
UINT GetMenuState(
    UINT nID,  
    UINT nFlags) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `nID`  
 Указывает идентификатор элемента меню в соответствии с `nFlags`.  
  
 `nFlags`  
 Определяет характер `nID`. Он может принимать одно из следующих значений:  
  
- **MF_BYCOMMAND** указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию.  
  
- **MF_BYPOSITION** указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение 0xFFFFFFFF, если указанный элемент не существует. Если *nId* определяет всплывающего меню, старший байт содержит число элементов в контекстном меню, а младший байт меню флаги, связанные с помощью контекстного меню. В противном случае возвращает значение маски (логическое или) значений из следующего списка (Эта маска описывает состояние меню элементов, *nId* определяет):  
  
- **MF_CHECKED** переключаться с **MF_UNCHECKED** для размещения по умолчанию флажок рядом с элементом. Когда приложение предоставляет растровые изображения галочки (см. `SetMenuItemBitmaps` функции-члена), появляется точечный «флажок на».  
  
- **MF_DISABLED** отключает пункт меню, чтобы он не может быть выбран, но не затемнять.  
  
- `MF_ENABLED`Включает элемент меню, чтобы его можно выбрать и их восстановления из состояния серым цветом. Обратите внимание, что значение этой константы равно 0; приложения не должны протестировать с 0 для ошибки, при использовании этого значения.  
  
- **MF_GRAYED** отключает пункт меню, чтобы он не может быть выбран и затемняет его.  
  
- **MF_MENUBARBREAK** помещает элемент на новой строке в статические меню или в новый столбец во всплывающих меню. Новый столбец во всплывающем меню будут разделены из старого столбца вертикальной линии деления.  
  
- **MF_MENUBREAK** помещает элемент на новой строке в статические меню или в новый столбец во всплывающих меню. Нет разделителя помещается между столбцами.  
  
- **MF_SEPARATOR** рисует горизонтальную линию разделения. Может использоваться только в контекстном меню. Эта строка не серым цветом, отключена или выделенным. Остальные параметры учитываются.  
  
- **MF_UNCHECKED** переключаться с **MF_CHECKED** снимите флажок рядом с элементом. Когда приложение предоставляет растровые изображения галочки (см. `SetMenuItemBitmaps` функции-члена), появляется точечный «флажок off». Обратите внимание, что значение этой константы равно 0; приложения не должны протестировать с 0 для ошибки, при использовании этого значения.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#27;](../../mfc/reference/codesnippet/cpp/cmenu-class_7.cpp)]  
  
##  <a name="a-namegetmenustringa--cmenugetmenustring"></a><a name="getmenustring"></a>CMenu::GetMenuString  
 Копирует указанный буфер метку заданный элемент меню.  
  
```  
int GetMenuString(
    UINT nIDItem,  
    LPTSTR lpString,  
    int nMaxCount,  
    UINT nFlags) const;  
  
int GetMenuString(
    UINT nIDItem,  
    CString& rString,  
    UINT nFlags) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `nIDItem`  
 Указывает целочисленный идентификатор элемента меню или смещение элемента меню в меню, в зависимости от значения `nFlags`.  
  
 `lpString`  
 Указывает на буфер, который должен получить метку.  
  
 `rString`  
 Ссылку на `CString` объекта, для получения строки копируются меню.  
  
 `nMaxCount`  
 Указывает максимальную длину (в символах) метки для копирования. Если метка превышает максимум, указанный в `nMaxCount`, то лишние символы усекаются.  
  
 `nFlags`  
 Определяет интерпретацию `nIDItem` параметр. Он может принимать одно из следующих значений:  
  
|nFlags|Интерпретация nIDItem|  
|------------|-------------------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.|  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указывает фактическое число символов, скопировать в буфер, не включая завершающий символ null.  
  
### <a name="remarks"></a>Примечания  
 `nMaxCount` Параметр должен быть больше, чем количество символов в метке в соответствии с символ null, которая завершает строку один.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namegetsafehmenua--cmenugetsafehmenu"></a><a name="getsafehmenu"></a>CMenu::GetSafeHmenu  
 Возвращает `HMENU` Инкапсулированный данным итератором `CMenu` объекта, или **NULL** `CMenu` указателя.  
  
```  
HMENU GetSafeHmenu() const;  
```  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::LoadMenu](#loadmenu).  
  
##  <a name="a-namegetsubmenua--cmenugetsubmenu"></a><a name="getsubmenu"></a>CMenu::GetSubMenu  
 Извлекает `CMenu` объекта из всплывающего меню.  
  
```  
CMenu* GetSubMenu(int nPos) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `nPos`  
 Указывает положение всплывающего меню, содержащихся в меню. Значения позиций начинаются с 0 для первого элемента меню. Идентификатор всплывающего меню не может использоваться в этой функции.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на `CMenu` которого `m_hMenu` члена содержит дескриптор во всплывающем меню, если существует всплывающее меню в заданной позиции; в противном случае **NULL**. Если `CMenu` объект не существует, то создается временный один. `CMenu` Указатель, возвращенный не будут сохранены.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::TrackPopupMenu](#trackpopupmenu).  
  
##  <a name="a-nameinsertmenua--cmenuinsertmenu"></a><a name="insertmenu"></a>CMenu::InsertMenu  
 Вставляет новый элемент меню в позиции, указанной параметром `nPosition` и перемещает другие элементы меню.  
  
```  
BOOL InsertMenu(
    UINT nPosition,  
    UINT nFlags,  
    UINT_PTR nIDNewItem = 0,  
    LPCTSTR lpszNewItem = NULL);

 
BOOL InsertMenu(
    UINT nPosition,  
    UINT nFlags,  
    UINT_PTR nIDNewItem,  
    const CBitmap* pBmp);
```  
  
### <a name="parameters"></a>Параметры  
 `nPosition`  
 Указывает элемент меню, перед которой является новый элемент меню для вставки. `nFlags` Используется для интерпретации `nPosition` следующим образом:  
  
|nFlags|Интерпретация nPosition|  
|------------|---------------------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0. Если `nPosition` –&1;, новый элемент меню добавляется в конец меню.|  
  
 `nFlags`  
 Указывает, каким образом `nPosition` интерпретируется и задает сведения о состоянии нового элемента меню при его добавлении в меню. Список флагов, которые могут быть установлены, в разделе [функцию AppendMenu всегда](#appendmenu) функции-члена. Чтобы указать более одного значения, используйте оператор побитового или объединить их с **MF_BYCOMMAND** или **MF_BYPOSITION** флаг.  
  
 `nIDNewItem`  
 Указывает идентификатор команды нового элемента меню или, если `nFlags` равен **MF_POPUP**, дескриптор меню ( `HMENU`) из контекстного меню. `nIDNewItem` Параметр не учитывается (не необходимости), если `nFlags` равен **MF_SEPARATOR**.  
  
 `lpszNewItem`  
 Указывает содержимое нового пункта меню. `nFlags`можно использовать для интерпретации `lpszNewItem` следующим образом:  
  
|nFlags|Интерпретация lpszNewItem|  
|------------|-----------------------------------|  
|`MF_OWNERDRAW`|Содержит 32-разрядное значение, приложение может использовать для поддержания дополнительные данные, связанные с элементом меню предоставляемый приложением. Это 32-разрядное значение для приложения в **itemData** член структуры, предоставляемые [WM_MEASUREITEM](http://msdn.microsoft.com/library/windows/desktop/bb775925) и [WM_DRAWITEM](http://msdn.microsoft.com/library/windows/desktop/bb775923) сообщений. Эти сообщения отправляются, когда элемент меню будет первоначально отображаться или изменяется.|  
|**MF_STRING**|Содержит длинный указатель на строку, завершающуюся значением null. Это интерпретацию по умолчанию.|  
|**MF_SEPARATOR**|`lpszNewItem` Параметр учитывается (не требуется).|  
  
 *pBmp*  
 Указывает на `CBitmap` объект, который будет использоваться в качестве элемента меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если функция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Приложение может задать состояние элемента меню, задавая значения в `nFlags`.  
  
 Всякий раз, когда меню, который находится в окне изменяется (ли отображается окно), приложение должно вызвать `CWnd::DrawMenuBar`.  
  
 Если `nIDNewItem` указывает всплывающего меню, оно становится частью меню, в которую вставляется. При удалении этого меню будут уничтожены и вставленные меню. Меню, вставленные должны быть отсоединены от `CMenu` , чтобы избежать конфликтов.  
  
 Если активная развернуто дочернего окна многодокументного интерфейса (MDI) и приложение вставляет всплывающее меню в меню MDI-приложения, при вызове этой функции и указав **MF_BYPOSITION** флаг, — меню вставки на одну позицию влево, чем ожидалось. Это происходит потому, что в активную дочернюю MDI меню элемента управления вставляется в первую позицию меню Окно области MDI. Для размещения меню должным образом, приложение необходимо добавить 1 к значению позиции, в противном случае будет использоваться. Приложение может использовать **WM_MDIGETACTIVE** сообщения, чтобы определить, развернуто ли в данный момент активным дочерним окном.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#28;](../../mfc/reference/codesnippet/cpp/cmenu-class_8.cpp)]  
  
##  <a name="a-nameinsertmenuitema--cmenuinsertmenuitem"></a><a name="insertmenuitem"></a>CMenu::InsertMenuItem  
 Вставляет новый элемент меню в указанной позиции в меню.  
  
```  
BOOL InsertMenuItem(
    UINT uItem,  
    LPMENUITEMINFO lpMenuItemInfo,  
    BOOL fByPos = FALSE);
```  
  
### <a name="parameters"></a>Параметры  
 `uItem`  
 Просмотреть описание `uItem` в [InsertMenuItem](http://msdn.microsoft.com/library/windows/desktop/ms647988) в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
 `lpMenuItemInfo`  
 Просмотреть описание `lpmii` в **InsertMenuItem** в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
 `fByPos`  
 Просмотреть описание `fByPosition` в **InsertMenuItem** в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="remarks"></a>Примечания  
 Эта функция осуществляет [InsertMenuItem](http://msdn.microsoft.com/library/windows/desktop/ms647988), описанный в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
##  <a name="a-nameloadmenua--cmenuloadmenu"></a><a name="loadmenu"></a>CMenu::LoadMenu  
 Загружает ресурс меню из исполняемого файла приложения и присоединяет его к `CMenu` объекта.  
  
```  
BOOL LoadMenu(LPCTSTR lpszResourceName);  
BOOL LoadMenu(UINT nIDResource);
```  
  
### <a name="parameters"></a>Параметры  
 `lpszResourceName`  
 Указывает нулем строка, содержащая имя ресурса меню загрузки.  
  
 `nIDResource`  
 Указывает идентификатор ресурса меню меню загрузки.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если ресурс был загружен успешно. в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Перед завершением работы приложения необходимо освободить системные ресурсы, связанные с меню, если меню не назначен окна. Приложение освобождает меню путем вызова [DestroyMenu](#destroymenu) функции-члена.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#29;](../../mfc/reference/codesnippet/cpp/cmenu-class_9.cpp)]  
  
##  <a name="a-nameloadmenuindirecta--cmenuloadmenuindirect"></a><a name="loadmenuindirect"></a>CMenu::LoadMenuIndirect  
 Загружает ресурс из меню шаблона в памяти и присоединяет его к `CMenu` объекта.  
  
```  
BOOL LoadMenuIndirect(const void* lpMenuTemplate);
```  
  
### <a name="parameters"></a>Параметры  
 *lpMenuTemplate*  
 Указывает шаблон меню (который представляет собой одну [MENUITEMTEMPLATEHEADER](http://msdn.microsoft.com/library/windows/desktop/ms647583) структуры и коллекцию из одного или нескольких [MENUITEMTEMPLATE](http://msdn.microsoft.com/library/windows/desktop/ms647581) структуры). Дополнительные сведения об этих двух структур см. в разделе [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если ресурс был загружен успешно. в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Выберите шаблон — это заголовок, следуют коллекцию из одного или нескольких [MENUITEMTEMPLATE](http://msdn.microsoft.com/library/windows/desktop/ms647581) структуры, каждый из которых может содержать один или несколько элементов меню и контекстные меню.  
  
 Номер версии должен быть 0.  
  
 **MtOption** должен включать флаги **MF_END** для последнего элемента в виде всплывающего списка и для последнего элемента в главном списке. В разделе `AppendMenu` функции-члена для других флагов. **MtId** член должен быть исключен из **MENUITEMTEMPLATE** структуры при **MF_POPUP** указывается в **mtOption**.  
  
 Объем пространства, выделенного для **MENUITEMTEMPLATE** структура должна быть достаточно большим для **mtString** содержит имя элемента меню, как строка, заканчивающаяся нулем.  
  
 Перед завершением работы приложения необходимо освободить системные ресурсы, связанные с меню, если меню не назначен окна. Приложение освобождает меню путем вызова [DestroyMenu](#destroymenu) функции-члена.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#30;](../../mfc/reference/codesnippet/cpp/cmenu-class_10.cpp)]  
  
##  <a name="a-namemhmenua--cmenumhmenu"></a><a name="m_hmenu"></a>CMenu::m_hMenu  
 Указывает `HMENU` дескриптор меню Windows подключенные к `CMenu` объекта.  
  
```  
HMENU m_hMenu;  
```  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::LoadMenu](#loadmenu).  
  
##  <a name="a-namemeasureitema--cmenumeasureitem"></a><a name="measureitem"></a>CMenu::MeasureItem  
 Вызывается инфраструктурой при создании меню с пользовательской отрисовки стиля.  
  
```  
virtual void MeasureItem(LPMEASUREITEMSTRUCT lpMeasureItemStruct);
```  
  
### <a name="parameters"></a>Параметры  
 `lpMeasureItemStruct`  
 Указатель на `MEASUREITEMSTRUCT` структуры.  
  
### <a name="remarks"></a>Примечания  
 По умолчанию эта функция-член не выполняет никаких действий. Переопределить эту функцию-член и заполните `MEASUREITEMSTRUCT` структуры для информирования Windows меню измерений.  
  
 В разделе [CWnd::OnMeasureItem](../../mfc/reference/cwnd-class.md#onmeasureitem) описание `MEASUREITEMSTRUCT` структуры.  
  
### <a name="example"></a>Пример  
 Следующий код — от MFC [CTRLTEST](../../visual-cpp-samples.md) пример:  
  
 [!code-cpp[NVC_MFCWindowing&#31;](../../mfc/reference/codesnippet/cpp/cmenu-class_11.cpp)]  
  
##  <a name="a-namemodifymenua--cmenumodifymenu"></a><a name="modifymenu"></a>CMenu::ModifyMenu  
 Изменяет существующий элемент меню в позиции, указанной параметром `nPosition`.  
  
```  
BOOL ModifyMenu(
    UINT nPosition,  
    UINT nFlags,  
    UINT_PTR nIDNewItem = 0,  
    LPCTSTR lpszNewItem = NULL);

 
BOOL ModifyMenu(
    UINT nPosition,  
    UINT nFlags,  
    UINT_PTR nIDNewItem,  
    const CBitmap* pBmp);
```  
  
### <a name="parameters"></a>Параметры  
 `nPosition`  
 Указывает элемент меню должен быть изменен. `nFlags` Используется для интерпретации `nPosition` следующим образом:  
  
|nFlags|Интерпретация nPosition|  
|------------|---------------------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.|  
  
 `nFlags`  
 Указывает, каким образом `nPosition` интерпретируется, а также сведения об изменениях, внесенных в элемент меню. Список флагов, которые могут быть установлены, в разделе [функцию AppendMenu всегда](#appendmenu) функции-члена.  
  
 `nIDNewItem`  
 Указывает идентификатор команды элемента измененного меню или, если `nFlags` равен **MF_POPUP**, дескриптор меню ( `HMENU`) из всплывающего меню. `nIDNewItem` Параметр не учитывается (не необходимости), если `nFlags` равен **MF_SEPARATOR**.  
  
 `lpszNewItem`  
 Указывает содержимое нового пункта меню. `nFlags` Используется для интерпретации `lpszNewItem` следующим образом:  
  
|nFlags|Интерпретация lpszNewItem|  
|------------|-----------------------------------|  
|`MF_OWNERDRAW`|Содержит 32-разрядное значение, приложение может использовать для поддержания дополнительные данные, связанные с элементом меню предоставляемый приложением. Это 32-разрядное значение доступной для приложения при его обработке **MF_MEASUREITEM** и **MF_DRAWITEM**.|  
|**MF_STRING**|Содержит длинный указатель на строку, завершающуюся значением null или к `CString`.|  
|**MF_SEPARATOR**|`lpszNewItem` Параметр учитывается (не требуется).|  
  
 *pBmp*  
 Указывает на `CBitmap` объект, который будет использоваться в качестве элемента меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если функция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Приложение указывает новое состояние элемента меню, задавая значения в `nFlags`. Если эта функция заменяет всплывающего меню, связанное с элементом меню, он удаляет старые во всплывающем меню и освобождает память, используемая во всплывающем меню.  
  
 Если `nIDNewItem` указывает всплывающего меню, оно становится частью меню, в которую вставляется. При удалении этого меню будут уничтожены и вставленные меню. Меню, вставленные должны быть отсоединены от `CMenu` , чтобы избежать конфликтов.  
  
 Всякий раз, когда меню, который находится в окне изменяется (ли отображается окно), приложение должно вызвать `CWnd::DrawMenuBar`. Чтобы изменить атрибуты существующих элементов меню, он работает намного быстрее использовать `CheckMenuItem` и `EnableMenuItem` функции-члены.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-nameoperatorhmenua--cmenuoperator-hmenu"></a><a name="operator_hmenu"></a>CMenu::operator описателя HMENU  
 Этот оператор используется для получения дескриптора `CMenu` объекта.  
  
```  
operator HMENU() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 В случае успеха дескриптор `CMenu` объекта; в противном случае — **NULL**.  
  
### <a name="remarks"></a>Примечания  
 Дескриптор можно использовать для прямого вызова API-интерфейсов Windows.  
  
##  <a name="a-nameoperatorneqa--cmenuoperator-"></a><a name="operator_neq"></a>CMenu::operator! =  
 Определяет, если два меню логически не равны.  
  
```  
BOOL operator!=(const CMenu& menu) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `menu`  
 Объект `CMenu` объект для сравнения.  
  
### <a name="remarks"></a>Примечания  
 Проверяет объект меню с левой стороны не равно объект меню справа от оператора.  
  
##  <a name="a-nameoperatoreqeqa--cmenuoperator-"></a><a name="operator_eq_eq"></a>CMenu::operator ==  
 Определяет, логически равны ли два меню.  
  
```  
BOOL operator==(const CMenu& menu) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `menu`  
 Объект `CMenu` объект для сравнения.  
  
### <a name="remarks"></a>Примечания  
 Проверяет объект меню с левой стороны равно (в виде `HMENU` значение) в объект меню справа от оператора.  
  
##  <a name="a-nameremovemenua--cmenuremovemenu"></a><a name="removemenu"></a>CMenu::RemoveMenu  
 Удаляет элемент меню со связанным всплывающее меню в меню.  
  
```  
BOOL RemoveMenu(
    UINT nPosition,  
    UINT nFlags);
```  
  
### <a name="parameters"></a>Параметры  
 `nPosition`  
 Указывает удаляемого элемента меню. `nFlags` Используется для интерпретации `nPosition` следующим образом:  
  
|nFlags|Интерпретация nPosition|  
|------------|---------------------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.|  
  
 `nFlags`  
 Указывает, каким образом `nPosition` интерпретируется.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если функция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Она не удаляет дескриптор для всплывающего меню, чтобы меню может быть повторно использован. Перед вызовом этой функции, приложение может вызвать `GetSubMenu` функции-члена для получения всплывающих окон `CMenu` объекта для повторного использования.  
  
 Всякий раз, когда меню, который находится в окне изменяется (ли отображается окно), приложение должно вызвать `CWnd::DrawMenuBar`.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namesetdefaultitema--cmenusetdefaultitem"></a><a name="setdefaultitem"></a>CMenu::SetDefaultItem  
 Задает элемент меню по умолчанию для указанного меню.  
  
```  
BOOL SetDefaultItem(
    UINT uItem,  
    BOOL fByPos = FALSE);
```  
  
### <a name="parameters"></a>Параметры  
 `uItem`  
 Идентификатор или позиция нового пункта меню по умолчанию или - 1 для нет элемента по умолчанию. Значение этого параметра зависит от значения `fByPos`.  
  
 `fByPos`  
 Значение, указывающее значение `uItem`. Если этот параметр равен **FALSE**, `uItem` — это идентификатор элемента меню. В противном случае — это положение элемента меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если функция выполняется успешно, возвращается ненулевое значение. Если функция выполняется неудачно, возвращается нулевое значение. Чтобы получить расширенные сведения об ошибке, используйте функцию Win32 [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360), как описано в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="remarks"></a>Примечания  
 Эта функция-член реализует поведение функции Win32 [SetMenuDefaultItem](http://msdn.microsoft.com/library/windows/desktop/ms647996), как описано в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namesetmenucontexthelpida--cmenusetmenucontexthelpid"></a><a name="setmenucontexthelpid"></a>CMenu::SetMenuContextHelpId  
 Связывает идентификатор контекста справки с `CMenu`.  
  
```  
BOOL SetMenuContextHelpId(DWORD dwContextHelpId);
```  
  
### <a name="parameters"></a>Параметры  
 `dwContextHelpId`  
 Идентификатор контекста справки, связываемое с `CMenu`.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если выполнено успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Все элементы в меню используют этот идентификатор — невозможно присоединить идентификатор контекста справки для отдельных пунктов меню.  
  
### <a name="example"></a>Пример  
  В примере показано [CMenu::InsertMenu](#insertmenu).  
  
##  <a name="a-namesetmenuinfoa--cmenusetmenuinfo"></a><a name="setmenuinfo"></a>CMenu::SetMenuInfo  
 Задает сведения о меню.  
  
```  
BOOL SetMenuInfo(LPCMENUINFO lpcmi);
```  
  
### <a name="parameters"></a>Параметры  
 `lpcmi`  
 Указатель на [MENUINFO](http://msdn.microsoft.com/library/windows/desktop/ms647575) структуру, содержащую сведения для меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если функция выполняется успешно, возвращается ненулевое значение; в противном случае — возвращаемое значение равно нулю.  
  
### <a name="remarks"></a>Примечания  
 Вызывайте эту функцию, чтобы задать определенные сведения о меню.  
  
##  <a name="a-namesetmenuitembitmapsa--cmenusetmenuitembitmaps"></a><a name="setmenuitembitmaps"></a>CMenu::SetMenuItemBitmaps  
 Связывает указанный растровых изображений с элементом меню.  
  
```  
BOOL SetMenuItemBitmaps(
    UINT nPosition,  
    UINT nFlags,  
    const CBitmap* pBmpUnchecked,  
    const CBitmap* pBmpChecked);
```  
  
### <a name="parameters"></a>Параметры  
 `nPosition`  
 Указывает элемент меню должен быть изменен. `nFlags` Используется для интерпретации `nPosition` следующим образом:  
  
|nFlags|Интерпретация nPosition|  
|------------|---------------------------------|  
|**MF_BYCOMMAND**|Указывает, что параметр дает идентификатор команды существующего элемента меню. Это значение по умолчанию, если ни одна из **MF_BYCOMMAND** , ни **MF_BYPOSITION** имеет значение.|  
|**MF_BYPOSITION**|Указывает, что параметр дает положение существующего элемента меню. Первый элемент находится в позиции 0.|  
  
 `nFlags`  
 Указывает, каким образом `nPosition` интерпретируется.  
  
 `pBmpUnchecked`  
 Указывает битовую карту для пунктов меню, которые не проверяются.  
  
 `pBmpChecked`  
 Указывает битовую карту для выделенных элементов меню.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если функция выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Является ли элемент меню помечены или нет, Windows отображается соответствующее изображение рядом с элементом меню.  
  
 Если параметр `pBmpUnchecked` или `pBmpChecked` — **NULL**, то ничего не рядом с элементом меню для соответствующего атрибута выводит Windows. Если оба параметра имеют **NULL**, Windows использует флажок по умолчанию, когда элемент проверяется и снимает флажок, если элемент не установлен.  
  
 При уничтожении меню, эти точечные рисунки, не удаляются; приложение должно удалять их.  
  
 Windows **GetMenuCheckMarkDimensions** функция извлекает размеры флажок по умолчанию, используемый для элементов меню. Приложение использует эти значения для определения подходящего размера для растровых изображений, предоставленные с помощью этой функции. Получение сведений о размере, создайте точечные рисунки и установите их.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#32;](../../mfc/reference/codesnippet/cpp/cmenu-class_12.cpp)]  
  
 [!code-cpp[NVC_MFCWindowing&#33;](../../mfc/reference/codesnippet/cpp/cmenu-class_13.cpp)]  
  
##  <a name="a-namesetmenuiteminfoa--cmenusetmenuiteminfo"></a><a name="setmenuiteminfo"></a>CMenu::SetMenuItemInfo  
 Изменение сведений о пункта меню.  
  
```  
BOOL SetMenuItemInfo(
    UINT uItem,  
    LPMENUITEMINFO lpMenuItemInfo,  
    BOOL fByPos = FALSE);
```  
  
### <a name="parameters"></a>Параметры  
 `uItem`  
 Просмотреть описание `uItem` в [SetMenuItemInfo](http://msdn.microsoft.com/library/windows/desktop/ms648001) в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
 `lpMenuItemInfo`  
 Просмотреть описание `lpmii` в **SetMenuItemInfo** в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
 `fByPos`  
 Просмотреть описание `fByPosition` в **SetMenuItemInfo** в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="remarks"></a>Примечания  
 Эта функция осуществляет [SetMenuItemInfo](http://msdn.microsoft.com/library/windows/desktop/ms648001), описанный в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
##  <a name="a-nametrackpopupmenua--cmenutrackpopupmenu"></a><a name="trackpopupmenu"></a>CMenu::TrackPopupMenu  
 Отображает число с плавающей контекстное меню в указанном месте и отслеживает список элементов всплывающего меню.  
  
```  
BOOL TrackPopupMenu(
    UINT nFlags,  
    int x,  
    int y,  
    CWnd* pWnd,  
    LPCRECT lpRect = 0);
```  
  
### <a name="parameters"></a>Параметры  
 `nFlags`  
 Задает флаги, положение на экране и положение мыши. В разделе [TrackPopupMenu](http://msdn.microsoft.com/library/windows/desktop/ms648002) список доступных флагов.  
  
 *x*  
 Задает горизонтальное положение всплывающего меню в экранных координатах. В зависимости от значения `nFlags` параметр меню может быть по левому краю, по правому краю или по центру относительно этой позиции.  
  
 *y*  
 Задает вертикальное положение в координатах экрана в верхней части меню на экране.  
  
 `pWnd`  
 Определяет окно, которому принадлежит во всплывающем меню. Этот параметр не может быть **NULL**, даже если **TPM_NONOTIFY** указан флаг. Это окно получает все **WM_COMMAND** сообщения в меню. В системе Windows версии 3.1 и более поздней версии, не получает окна **WM_COMMAND** сообщений до `TrackPopupMenu` возвращает. В Windows 3.0, то оно получит **WM_COMMAND** сообщений перед `TrackPopupMenu` возвращает.  
  
 `lpRect`  
 Не обрабатывается.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Этот метод возвращает результат вызова метода [TrackPopupMenu](http://msdn.microsoft.com/library/windows/desktop/ms648002) в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)].  
  
### <a name="remarks"></a>Примечания  
 Всплывающее меню с плавающей запятой могут находиться в любом на экране.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCWindowing&#34;](../../mfc/reference/codesnippet/cpp/cmenu-class_14.cpp)]  
  
##  <a name="a-nametrackpopupmenuexa--cmenutrackpopupmenuex"></a><a name="trackpopupmenuex"></a>CMenu::TrackPopupMenuEx  
 Отображает число с плавающей контекстное меню в указанном месте и отслеживает список элементов всплывающего меню.  
  
```  
BOOL TrackPopupMenuEx(
    UINT fuFlags,  
    int x,  
    int y,  
    CWnd* pWnd,  
    LPTPMPARAMS lptpm);
```  
  
### <a name="parameters"></a>Параметры  
 `fuFlags`  
 Указывает различные функции для расширенного меню. Список всех значений и их значении см. [TrackPopupMenuEx](http://msdn.microsoft.com/library/windows/desktop/ms648003).  
  
 *x*  
 Задает горизонтальное положение всплывающего меню в экранных координатах.  
  
 *y*  
 Задает вертикальное положение в координатах экрана в верхней части меню на экране.  
  
 `pWnd`  
 Указатель на окно владельца во всплывающем меню и получения сообщений в созданный меню. В этом окне может быть любое окно из текущего приложения, но не может быть **NULL**. При указании **TPM_NONOTIFY** в `fuFlags` параметр функции не отправлять любые сообщения, `pWnd`. Эта функция должна возвращать для окна, на который указывает `pWnd` получать **WM_COMMAND** сообщение.  
  
 *lptpm*  
 Указатель на [TPMPARAMS](http://msdn.microsoft.com/library/windows/desktop/ms647586) структура, которая указывает область экрана меню не должны перекрываться. Этот параметр может иметь **NULL**.  
  
### <a name="return-value"></a>Возвращаемое значение  
 При указании **TPM_RETURNCMD** в `fuFlags` параметр, возвращаемое значение является идентификатор элемента, выбранного пользователем пункта меню. Если пользователь отменяет меню без выбора или при возникновении ошибки, возвращаемое значение — 0.  
  
 Если вы не укажете **TPM_RETURNCMD** в `fuFlags` параметр возвращается ненулевое значение, если функция выполняется успешно и 0 в случае сбоя. Чтобы получить расширенные сведения об ошибке, вызовите [GetLastError](http://msdn.microsoft.com/library/windows/desktop/ms679360).  
  
### <a name="remarks"></a>Примечания  
 Всплывающее меню с плавающей запятой могут находиться в любом на экране. Дополнительные сведения об обработке ошибок при создании контекстного меню в разделе [TrackPopupMenuEx](http://msdn.microsoft.com/library/windows/desktop/ms648003).  
  
## <a name="see-also"></a>См. также  
 [Пример MFC CTRLTEST](../../visual-cpp-samples.md)   
 [Пример MFC DYNAMENU](../../visual-cpp-samples.md)   
 [CObject-класс](../../mfc/reference/cobject-class.md)   
 [Диаграмма иерархии](../../mfc/hierarchy-chart.md)   
 [CObject-класс](../../mfc/reference/cobject-class.md)

