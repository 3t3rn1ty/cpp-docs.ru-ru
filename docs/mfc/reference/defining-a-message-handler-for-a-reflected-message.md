---
title: "Определение обработчика сообщений для отраженного сообщения | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "vc.codewiz.defining.msg.msghandler"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "обработка сообщений, отраженные сообщения"
  - "сообщения, отраженные"
ms.assetid: 5a403528-58c5-46e7-90d5-4a77f0ab9b9c
caps.latest.revision: 9
caps.handback.revision: 5
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Определение обработчика сообщений для отраженного сообщения
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

После создания класса элемента управления MFC для него можно определить обработчик сообщений.  Обработчики отраженных сообщений позволяют классу элемента управления обрабатывать собственные сообщения, прежде чем они будут переданы родителю.  Для передачи сообщений от элемента управления к родительскому окну может использоваться функция MFC [CWnd::SendMessage](../Topic/CWnd::SendMessage.md).  
  
 Эта функциональная возможность позволяет, например, создать поле со списком, которое будет прорисовываться самостоятельно, а не родительским окном \(рисование владельцем\).  Дополнительные сведения об отраженных сообщениях см. в разделе [Обработка отраженных сообщений](../../mfc/handling-reflected-messages.md).  
  
 Чтобы создать [элемент управления ActiveX](../../mfc/activex-controls-on-the-internet.md) с аналогичной функциональностью, необходимо создать проект элемента управления ActiveX.  
  
> [!NOTE]
>  Добавить отраженное сообщение \(OCM\_*Message*\) для элемента управления ActiveX с помощью окна "Свойства", как описано ниже, невозможно.  Добавление этих сообщений необходимо производить вручную.  
  
### Определение обработчика сообщений для отраженного сообщения в окне "Свойства"  
  
1.  Добавьте в проект MFC элемент управления, например, список, контейнер элементов управления, панель инструментов или дерево.  
  
2.  В окне классов щелкните имя класса элемента управления.  
  
3.  Имя класса элемента управления отобразится в окне [Свойства](../Topic/Properties%20Window.md) в списке **Имя класса**.  
  
4.  Нажмите кнопку **Сообщения**, чтобы отобразить список сообщений Windows, которые могут быть добавлены к элементу управления.  
  
5.  Прокрутите вниз список сообщений в окне "Свойства" до заголовка **Отражен**.  Можно также нажать кнопку **Категории** и свернуть окно, чтобы получить доступ к заголовку **Отражен**.  
  
6.  Выберите отраженное сообщение, для которого необходимо определить обработчик события.  Отраженные сообщения помечаются знаком равенства \(\=\).  
  
7.  Щелкните ячейку в правом столбце в окне свойств для отображения предложенного имени обработчика как \<add\>*HandlerName*. \(Например, обработчик сообщений **\=WM\_CTLCOLOR** предлагает \<add\>**CtlColor**\).  
  
8.  Щелкните предлагаемое имя, чтобы принять его.  Обработчик будет добавлен в проект.  
  
     Имена добавленных обработчиков сообщений отображаются в правом столбце окна отраженных сообщений.  
  
9. Чтобы изменить или удалить обработчик сообщений, повторите шаги с 4 по 7.  Щелкните ячейку, содержащую имя обработчика, подлежащего удалению или изменению, и выберите соответствующую задачу.  
  
## См. также  
 [Сопоставление сообщений с функциями](../Topic/Mapping%20Messages%20to%20Functions.md)   
 [Добавление функциональных возможностей с помощью мастеров кода](../../ide/adding-functionality-with-code-wizards-cpp.md)   
 [Добавление класса](../Topic/Adding%20a%20Class%20\(Visual%20C++\).md)   
 [Добавление функции\-члена](../../ide/adding-a-member-function-visual-cpp.md)   
 [Добавление переменной\-члена](../../ide/adding-a-member-variable-visual-cpp.md)   
 [Переопределение виртуальной функции](../Topic/Overriding%20a%20Virtual%20Function%20\(Visual%20C++\).md)   
 [Обработчик сообщений MFC](../../mfc/reference/adding-an-mfc-message-handler.md)   
 [Перемещение по структуре класса](../../ide/navigating-the-class-structure-visual-cpp.md)