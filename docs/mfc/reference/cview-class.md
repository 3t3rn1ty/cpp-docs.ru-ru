---
title: CView-класс | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: reference
f1_keywords:
- CView
- AFXWIN/CView
- AFXWIN/CView::CView
- AFXWIN/CView::DoPreparePrinting
- AFXWIN/CView::GetDocument
- AFXWIN/CView::IsSelected
- AFXWIN/CView::OnDragEnter
- AFXWIN/CView::OnDragLeave
- AFXWIN/CView::OnDragOver
- AFXWIN/CView::OnDragScroll
- AFXWIN/CView::OnDrop
- AFXWIN/CView::OnDropEx
- AFXWIN/CView::OnInitialUpdate
- AFXWIN/CView::OnPrepareDC
- AFXWIN/CView::OnScroll
- AFXWIN/CView::OnScrollBy
- AFXWIN/CView::OnActivateFrame
- AFXWIN/CView::OnActivateView
- AFXWIN/CView::OnBeginPrinting
- AFXWIN/CView::OnDraw
- AFXWIN/CView::OnEndPrinting
- AFXWIN/CView::OnEndPrintPreview
- AFXWIN/CView::OnPreparePrinting
- AFXWIN/CView::OnPrint
- AFXWIN/CView::OnUpdate
dev_langs:
- C++
helpviewer_keywords:
- CView [MFC], CView
- CView [MFC], DoPreparePrinting
- CView [MFC], GetDocument
- CView [MFC], IsSelected
- CView [MFC], OnDragEnter
- CView [MFC], OnDragLeave
- CView [MFC], OnDragOver
- CView [MFC], OnDragScroll
- CView [MFC], OnDrop
- CView [MFC], OnDropEx
- CView [MFC], OnInitialUpdate
- CView [MFC], OnPrepareDC
- CView [MFC], OnScroll
- CView [MFC], OnScrollBy
- CView [MFC], OnActivateFrame
- CView [MFC], OnActivateView
- CView [MFC], OnBeginPrinting
- CView [MFC], OnDraw
- CView [MFC], OnEndPrinting
- CView [MFC], OnEndPrintPreview
- CView [MFC], OnPreparePrinting
- CView [MFC], OnPrint
- CView [MFC], OnUpdate
ms.assetid: 9cff3c56-7564-416b-b9a4-71a9254ed755
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 9ca94e9d1f870fe028faec413a79f13d8a3b8eaa
ms.sourcegitcommit: 76b7653ae443a2b8eb1186b789f8503609d6453e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33377905"
---
# <a name="cview-class"></a>CView-класс
Предоставляет базовую функциональность для определяемых пользователем классов представления.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
class AFX_NOVTABLE CView : public CWnd  
```  
  
## <a name="members"></a>Члены  
  
### <a name="protected-constructors"></a>Защищенные конструкторы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CView::CView](#cview)|Создает объект `CView`.|  
  
### <a name="public-methods"></a>Открытые методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CView::DoPreparePrinting](#doprepareprinting)|Отображает диалоговое окно «Печать» и создает контекст устройства принтера; При переопределении вызывать `OnPreparePrinting` функции-члена.|  
|[CView::GetDocument](#getdocument)|Возвращает документ, связанный с представлением.|  
|[CView::IsSelected](#isselected)|Проверяет, является ли элемент документа выбран. Требуется для поддержки OLE.|  
|[CView::OnDragEnter](#ondragenter)|Вызывается, когда элемент перетаскивается сначала в область перетаскивания и вставки представления.|  
|[CView::OnDragLeave](#ondragleave)|Вызывается, когда перетаскиваемый элемент покидает область перетаскивания и вставки представления.|  
|[CView::OnDragOver](#ondragover)|Вызывается, когда элемент перетаскивается в область перетаскивания и вставки представления.|  
|[CView::OnDragScroll](#ondragscroll)|Вызывается для определения, является ли курсор перетаскивается в область прокрутки окна.|  
|[CView::OnDrop](#ondrop)|Вызывается, когда элемент был удален в область перетаскивания и вставки представления, обработчик по умолчанию.|  
|[CView::OnDropEx](#ondropex)|Вызывается, когда элемент был удален в область перетаскивания и вставки представления, первичный обработчик.|  
|[CView::OnInitialUpdate](#oninitialupdate)|Вызывается после представление впервые присоединяется к документу.|  
|[CView::OnPrepareDC](#onpreparedc)|Вызывается перед `OnDraw` функция-член вызывается для отображения на экране или `OnPrint` функция-член вызывается для печати или предварительного просмотра.|  
|[CView::OnScroll](#onscroll)|Вызывается, когда при перетаскивании элементов OLE за границы представления.|  
|[CView::OnScrollBy](#onscrollby)|Вызывается, когда прокручивать представление, содержащее активные элементы OLE на месте.|  
  
### <a name="protected-methods"></a>Защищенные методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CView::OnActivateFrame](#onactivateframe)|Вызывается, когда рамка окна, содержащего представление, активируется или деактивируется.|  
|[CView::OnActivateView](#onactivateview)|Вызывается при активации представления.|  
|[CView::OnBeginPrinting](#onbeginprinting)|Вызывается, когда начинается задание печати; Переопределите, чтобы выделить графических устройств (GDI) интерфейс ресурсы.|  
|[CView::OnDraw](#ondraw)|Вызывается для отрисовки рисунка документа для отображения на экране, печати или предварительного просмотра печати. Требуется реализация.|  
|[CView::OnEndPrinting](#onendprinting)|Вызывается при завершении задания печати; переопределение для освобождения ресурсов GDI.|  
|[CView::OnEndPrintPreview](#onendprintpreview)|Вызывается при выходе из режима предварительного просмотра.|  
|[CView::OnPreparePrinting](#onprepareprinting)|Вызывается до печати или просмотра; документа Переопределите, чтобы инициализировать диалоговое окно «Печать».|  
|[CView::OnPrint](#onprint)|Вызывается для печати или просмотра документа.|  
|[CView::OnUpdate](#onupdate)|Вызывается для оповещения представление, документ был изменен.|  
  
## <a name="remarks"></a>Примечания  
 Представление прикрепляемые к документу и действует как посредник между документом и пользователь: представление отображает изображение документа на экран или принтер и интерпретирует как операции после документа ввод данных пользователем.  
  
 Представление является потомком фрейм окна. Более одного представления можно использовать совместно с окном фрейма, как в случае окна-разделителя. Связь между класса представления класс окна фрейма и класс документа обеспечивается `CDocTemplate` объекта. Когда пользователь открывает новое окно или разделяет существующую одну платформу создает новое представление и присоединяет его к документу.  
  
 Представление можно подключить только один документ, но документ может иметь несколько представлений, подключенных к нему за один раз — например, если документ отображается в окне разделителя или в нескольких дочерних окон в приложении несколько интерфейса (MDI) документа. Приложение может поддерживать различные типы представлений для типа данных документа; например текстовый процессор может обеспечить полный текст представления документа и структура, показывающая только заголовки разделов. Различных типов представления может быть помещен в отдельную рамку windows или в отдельные области окна один кадр при использовании окна-разделителя.  
  
 Представление может быть отвечает за обработку несколько различных типов ввода, например ввод с клавиатуры, мыши ввода или ввода данных посредством перетаскивания и вставки, а также команды меню, панелей инструментов и полосами прокрутки. Представление откликается с окном фрейма. Если представление не обрабатывает данной команды, он перенаправляет команду в связанный документ. Как и все целевые объекты команд представление обрабатывает сообщения через схему сообщений.  
  
 Отвечает представление для отображения и изменения данных документа, но не для ее хранения. Документ содержит представление с необходимые сведения о его данные. Можно открыть непосредственно документа элементы данных, или можно предоставлять функции-члены в класс документа для класса представления для вызова.  
  
 При изменении данных документа, ответственный за изменения представления обычно вызывает [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) для документа, который уведомляет все представления, вызвав функцию `OnUpdate` для функции-члена Каждый. Реализация по умолчанию `OnUpdate` делает недействительной всю клиентскую область представления. Его можно переопределить переводимого только этих областей клиентской области, сопоставленные им измененные части документа.  
  
 Для использования `CView`, создайте класс, производный от него и реализации `OnDraw` функции-члена для выполнения отображения на экране. Можно также использовать `OnDraw` выполнять печать и предварительный просмотр. Платформа обрабатывает цикла печати для печати и предварительного просмотра документа.  
  
 Представление обрабатывает сообщения полосу прокрутки с [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) функции-члены. Полоса прокрутки обработки сообщений в эти функции можно реализовать, или можно использовать `CView` производного класса [CScrollView](../../mfc/reference/cscrollview-class.md) для обработки прокрутки для вас.  
  
 Помимо `CScrollView`, библиотеки классов Microsoft Foundation предоставляет девять классы, производные от `CView`:  
  
- [CCtrlView](../../mfc/reference/cctrlview-class.md), представление, которое разрешает использование документ - представление архитектуры с помощью дерева, список и расширенного редактирования элементов управления.  
  
- [CDaoRecordView](../../mfc/reference/cdaorecordview-class.md), представление, которое отображает записи базы данных в элементах управления диалогового окна.  
  
- [CEditView](../../mfc/reference/ceditview-class.md), представление, которое предоставляет простого многострочного текстового редактора. Можно использовать `CEditView` объект как элемент управления в диалоговое окно, а также представления для документа.  
  
- [CFormView](../../mfc/reference/cformview-class.md), собой прокручиваемое представление, содержащий только элементы управления диалогового окна основана на ресурс шаблона диалоговых окон.  
  
- [CListView](../../mfc/reference/clistview-class.md), представление, которое разрешает использование документ - представление архитектуры с помощью списка элементов управления.  
  
- [CRecordView](../../mfc/reference/crecordview-class.md), представление, которое отображает записи базы данных в элементах управления диалогового окна.  
  
- [CRichEditView](../../mfc/reference/cricheditview-class.md), представление, которое разрешает использование документ - представление, элементы управления редактирования архитектуру с широкими возможностями.  
  
- [CScrollView](../../mfc/reference/cscrollview-class.md), представление, которое автоматически обеспечивает поддержку прокрутки.  
  
- [CTreeView](../../mfc/reference/ctreeview-class.md), представление, которое разрешает использование документ - представление архитектуры с помощью дерева элементов управления.  
  
 `CView` Класс также содержит реализацию производного класса с именем **CPreviewView**, который используется платформой для выполнения просмотра печати. Этот класс обеспечивает поддержку функций, уникальных для окна предварительного просмотра перед печатью, например панель инструментов, Просмотр одной или двойной страницы и масштабирования, который увеличение изображения предварительного просмотра. Не нужно вызывать или переопределять какие-либо **CPreviewView**его функций-членов. Если нужно реализовать собственный интерфейс предварительного просмотра печати (например, если требуется поддержка редактирования в режим предварительного просмотра). Дополнительные сведения об использовании `CView`, в разделе [архитектуры Document/View](../../mfc/document-view-architecture.md) и [печать](../../mfc/printing.md). Кроме того, в разделе [Технические заметки 30](../../mfc/tn030-customizing-printing-and-print-preview.md) Дополнительные сведения о настройке предварительного просмотра печати.  
  
## <a name="inheritance-hierarchy"></a>Иерархия наследования  
 [CObject](../../mfc/reference/cobject-class.md)  
  
 [CCmdTarget](../../mfc/reference/ccmdtarget-class.md)  
  
 [CWnd](../../mfc/reference/cwnd-class.md)  
  
 `CView`  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** afxwin.h  
  
##  <a name="cview"></a>  CView::CView  
 Создает объект `CView`.  
  
```  
CView();
```  
  
### <a name="remarks"></a>Примечания  
 Платформа вызывает конструктор, когда создается новый объект окна или разделить окна. Переопределить [OnInitialUpdate](#oninitialupdate) функции-члена для инициализации представления после присоединения документа.  
  
##  <a name="doprepareprinting"></a>  CView::DoPreparePrinting  
 Эта функция вызывается из переопределенный [OnPreparePrinting](#onprepareprinting) для вызова диалогового окна печати и создания контекста принтера.  
  
```  
BOOL DoPreparePrinting(CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pInfo`  
 Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структура, описывающая текущее задание печати.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если можно начать печати или предварительного просмотра; 0, если операция была отменена.  
  
### <a name="remarks"></a>Примечания  
 Эта функция поведение зависит от того, является ли он вызывается для печати или предварительного просмотра (заданные **m_bPreview** членом `pInfo` параметр). При печати файла, эта функция вызывает диалоговое окно «Печать», используя значения из [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, в которой `pInfo` указывает; после пользователь закрыл диалоговое окно, функция создает контекст устройства принтера на основе параметров пользователя, указанного в диалоговом окне и возвращает этот контекст устройства через `pInfo` параметра. Этот контекст устройства используется для печати документа.  
  
 При просмотре файла, эта функция создает контекст устройства принтера с использованием текущих параметров печати; Этот контекст устройства используется для имитации принтера во время предварительного просмотра.  
  
##  <a name="getdocument"></a>  CView::GetDocument  
 Эта функция вызывается для получения указателя на просмотр документа.  
  
```  
CDocument* GetDocument() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на [CDocument](../../mfc/reference/cdocument-class.md) объект, связанный с представлением. **Значение NULL** Если представление не присоединен к документу.  
  
### <a name="remarks"></a>Примечания  
 Это позволяет вызывать функции-члены документа.  
  
##  <a name="isselected"></a>  CView::IsSelected  
 Вызывается платформой для проверки того, выбран ли элемент указанного документа.  
  
```  
virtual BOOL IsSelected(const CObject* pDocItem) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `pDocItem`  
 Указывает тестируемого элемента документа.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если указанный документ элемент выбран; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция возвращает **FALSE**. Переопределить эту функцию при реализации с помощью выбора [CDocItem](../../mfc/reference/cdocitem-class.md) объектов. Эту функцию необходимо переопределить, если представление содержит OLE-элементы.  
  
##  <a name="onactivateframe"></a>  CView::OnActivateFrame  
 Вызывается платформой, когда фрейм окна, содержащего представление, активируется или деактивируется.  
  
```  
virtual void OnActivateFrame(
    UINT nState,  
    CFrameWnd* pFrameWnd);
```  
  
### <a name="parameters"></a>Параметры  
 `nState`  
 Указывает, выполняется ли окно фрейма активации или деактивации. Он может принимать одно из следующих значений:  
  
- **WA_INACTIVE** фрейм окна становится неактивным.  
  
- **WA_ACTIVE** фрейм окна активируется через какого-либо метода, отличного от щелчок мыши (например, с помощью интерфейса клавиатуры для выбора окна).  
  
- **WA_CLICKACTIVE** фрейм окна активируется по щелчку мыши  
  
 `pFrameWnd`  
 Указатель на фрейм окна, который должен быть активирован.  
  
### <a name="remarks"></a>Примечания  
 Переопределите эту функцию-член, если вы хотите выполнять специальную обработку при активации или отключении окна фрейма, связанный с представлением. Например [CFormView](../../mfc/reference/cformview-class.md) выполняет это переопределение, когда он сохраняет и восстанавливает элемент управления, имеющий фокус.  
  
##  <a name="onactivateview"></a>  CView::OnActivateView  
 Вызывается платформой, когда представление активируется или деактивируется.  
  
```  
virtual void OnActivateView(
    BOOL bActivate,  
    CView* pActivateView,  
    CView* pDeactiveView);
```  
  
### <a name="parameters"></a>Параметры  
 `bActivate`  
 Указывает, является ли представление активируется или деактивируется.  
  
 `pActivateView`  
 Указывает объект представления, который активируется.  
  
 `pDeactiveView`  
 Указывает объект представления, который становится неактивным.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция устанавливает фокус на время активации представления. Если вы хотите выполнять специальную обработку, когда представление активируется или деактивируется переопределите эту функцию. Например, для предоставления специальных визуальных подсказок, отличающих активное представление от неактивные представления будет просмотреть `bActivate` параметр и обновите соответствующим образом внешний вид представления.  
  
 `pActivateView` И `pDeactiveView` параметры указывают на одинаковое представление, если окно главного фрейма приложения активирован без изменения в активном окне — например, если фокус переносится из другого приложения с данным, а не из одного Просмотр в другую в приложении или при переключении между дочерними окнами MDI. Это позволяет повторно реализовать свою палитру представления, при необходимости.  
  
 Эти параметры отличаются при [CFrameWnd::SetActiveView](../../mfc/reference/cframewnd-class.md#setactiveview) называется представлением, которое отличается от что [CFrameWnd::GetActiveView](../../mfc/reference/cframewnd-class.md#getactiveview) будет возвращать. Чаще всего это происходит с помощью окна разделителей.  
  
##  <a name="onbeginprinting"></a>  CView::OnBeginPrinting  
 Вызывается платформой в начале задания печати или предварительного просмотра после вызова `OnPreparePrinting` .  
  
```  
virtual void OnBeginPrinting(
    CDC* pDC,  
    CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структура, описывающая текущее задание печати.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию этой функции не выполняет никаких действий. Переопределите эту функцию, чтобы выделить все ресурсы GDI, такие как перья или шрифты, специально для печати. Выберите объекты GDI в контексте устройства в [OnPrint](#onprint) функция-член для каждой страницы, который использует их. Если вы применяете один и тот же объект представления для вывода изображения на экран и печати, используйте отдельные переменные для ресурсов GDI, необходимых для каждого отображения. Это позволит обновлять экран во время печати.  
  
 Эту функцию также можно использовать для инициализаций, которые зависят от свойств контекста принтера. Например, число страниц, необходимых для печати документа, может зависеть от параметров, заданных пользователем в диалоговом окне печати (например, длина страницы). В такой ситуации нельзя указать длину документа в [OnPreparePrinting](#onprepareprinting) функции-члене, где это обычно делается это; необходимо дождаться создания контекста принтера на основе параметров поле диалогового окна. [OnBeginPrinting](#onbeginprinting) — это первая переопределяемая функция, которая предоставляет доступ к [CDC](../../mfc/reference/cdc-class.md) объект, представляющий контекст устройства принтера, поэтому можно задавать длину документа из данной функции. Обратите внимание, что если к этому моменту длина документа не указана, во время предварительного просмотра полоса прокрутки отображаться не будет.  
  
##  <a name="ondragenter"></a>  CView::OnDragEnter  
 Вызывается платформой, когда указатель мыши входит области без прокрутки окна цели перетаскивания.  
  
```  
virtual DROPEFFECT OnDragEnter(
    COleDataObject* pDataObject,  
    DWORD dwKeyState,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) перетаскиваемых в область представления.  
  
 `dwKeyState`  
 Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: **MK_CONTROL**, **MK_SHIFT**, **MK_ALT**, **MK_LBUTTON**, **MK_ MBUTTON**, и **MK_RBUTTON**.  
  
 `point`  
 Текущее положение мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение из `DROPEFFECT` перечисляемого типа, которое указывает тип drop, которая возникла бы, если пользователь удален объект в этой позиции. Обычно зависит от текущее состояние клавиш, определяется тип drop `dwKeyState`. Стандартная сопоставление ключевые для `DROPEFFECT` значения:  
  
- `DROPEFFECT_NONE` Не удалось удалить объект данных в этом окне.  
  
- `DROPEFFECT_LINK` для **MK_CONTROL &#124; MK_SHIFT** создает связь между объектом и его сервер.  
  
- `DROPEFFECT_COPY` для **MK_CONTROL** создает копию удаленного объекта.  
  
- `DROPEFFECT_MOVE` для **MK_ALT** создает копию удаляемый объект и удаления исходного объекта. Обычно это эффект перетаскивания по умолчанию, если представление может принять этот объект данных.  
  
 Дополнительные сведения см. в образце Дополнительные понятия MFC [OCLIENT](../../visual-cpp-samples.md).  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию — не выполнять никаких действий и вернуть `DROPEFFECT_NONE`.  
  
 Переопределить эту функцию для подготовки к будущие вызовы [OnDragOver](#ondragover) функции-члена. Все данные, необходимые из объекта данных должны быть получены в данный момент для последующего использования в `OnDragOver` функции-члена. Представление также должны обновляться на указанное время, чтобы дать пользователю визуальную обратную связь. Дополнительные сведения см. в статье [перетаскивание: реализация объекта-приемника](../../mfc/drag-and-drop-implementing-a-drop-target.md).  
  
##  <a name="ondragleave"></a>  CView::OnDragLeave  
 Вызывается платформой при выполнении операции перетаскивания при перемещении указателя мыши за пределы правильную область выпадения для этого окна.  
  
```  
virtual void OnDragLeave();
```  
  
### <a name="remarks"></a>Примечания  
 Переопределить эту функцию, если требуется очистить все действия, предпринятые во время текущего представления [OnDragEnter](#ondragenter) или [OnDragOver](#ondragover) вызовов, например удаление любые отзывы пользователей visual, пока объект был перетаскивать .  
  
##  <a name="ondragover"></a>  CView::OnDragOver  
 Вызывается платформой при выполнении операции перетаскивания при перемещении указателя мыши по окна цели перетаскивания.  
  
```  
virtual DROPEFFECT OnDragOver(
    COleDataObject* pDataObject,  
    DWORD dwKeyState,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) , перетаскиваемый над конечным расположением сброса.  
  
 `dwKeyState`  
 Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: **MK_CONTROL**, **MK_SHIFT**, **MK_ALT**, **MK_LBUTTON**, **MK_ MBUTTON**, и **MK_RBUTTON**.  
  
 `point`  
 Текущая позиция мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение из `DROPEFFECT` перечисляемого типа, которое указывает тип drop, которая возникла бы, если пользователь удален объект в этой позиции. Тип удаления часто зависит от текущего состояния раздела, обозначенный `dwKeyState`. Стандартная сопоставление ключевые для `DROPEFFECT` значения:  
  
- `DROPEFFECT_NONE` Не удалось удалить объект данных в этом окне.  
  
- `DROPEFFECT_LINK` для **MK_CONTROL &#124; MK_SHIFT** создает связь между объектом и его сервер.  
  
- `DROPEFFECT_COPY` для **MK_CONTROL** создает копию удаленного объекта.  
  
- `DROPEFFECT_MOVE` для **MK_ALT** создает копию удаляемый объект и удаления исходного объекта. Обычно это эффект перетаскивания по умолчанию, если представление может принимать объекты данных.  
  
 Дополнительные сведения см. в образце Дополнительные понятия MFC [OCLIENT](../../visual-cpp-samples.md).  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию — не выполнять никаких действий и вернуть `DROPEFFECT_NONE`.  
  
 Переопределите эту функцию, чтобы дать пользователю визуальную обратную связь во время операции перетаскивания. Так как эта функция вызывается постоянно, любой код, содержащийся в нем должен оптимизироваться максимальной. Дополнительные сведения см. в статье [перетаскивание: реализация объекта-приемника](../../mfc/drag-and-drop-implementing-a-drop-target.md).  
  
##  <a name="ondragscroll"></a>  CView::OnDragScroll  
 Вызывается платформой перед вызовом [OnDragEnter](#ondragenter) или [OnDragOver](#ondragover) , чтобы определить, является ли точка в области прокрутки.  
  
```  
virtual DROPEFFECT OnDragScroll(
    DWORD dwKeyState,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `dwKeyState`  
 Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: **MK_CONTROL**, **MK_SHIFT**, **MK_ALT**, **MK_LBUTTON**, **MK_ MBUTTON**, и **MK_RBUTTON**.  
  
 `point`  
 Содержит расположение курсора в пикселях относительно экрана.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение из `DROPEFFECT` перечисляемого типа, которое указывает тип drop, которая возникла бы, если пользователь удален объект в этой позиции. Обычно зависит от текущее состояние клавиш, определяется тип drop `dwKeyState`. Стандартная сопоставление ключевые для `DROPEFFECT` значения:  
  
- `DROPEFFECT_NONE` Не удалось удалить объект данных в этом окне.  
  
- `DROPEFFECT_LINK` для **MK_CONTROL &#124; MK_SHIFT** создает связь между объектом и его сервер.  
  
- `DROPEFFECT_COPY` для **MK_CONTROL** создает копию удаленного объекта.  
  
- `DROPEFFECT_MOVE` для **MK_ALT** создает копию удаляемый объект и удаления исходного объекта.  
  
- `DROPEFFECT_SCROLL` Указывает, что операция перетаскивания прокрутки о или происходит в представление целевого объекта.  
  
 Дополнительные сведения см. в образце Дополнительные понятия MFC [OCLIENT](../../visual-cpp-samples.md).  
  
### <a name="remarks"></a>Примечания  
 Переопределите эту функцию, если вы хотите предоставить особое поведение для данного события. Реализация по умолчанию автоматическая прокрутка windows, когда курсор перетаскивается в область прокрутки по умолчанию внутри границы каждого окна. Дополнительные сведения см. в статье [перетаскивание: реализация объекта-приемника](../../mfc/drag-and-drop-implementing-a-drop-target.md).  
  
##  <a name="ondraw"></a>  CView::OnDraw  
 Вызывается платформой для отрисовки рисунка документа.  
  
```  
virtual void OnDraw(CDC* pDC) = 0;  
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст устройства для использования для подготовки к просмотру изображения документа.  
  
### <a name="remarks"></a>Примечания  
 Платформа вызывает эту функцию для выполнения отображения на экране, печати и предварительного просмотра и в каждом случае он передает контекст другое устройство. Реализация по умолчанию отсутствует.  
  
 Необходимо переопределить эту функцию, чтобы отобразить представление документа. Можно вызывать графических устройств (GDI) интерфейса с помощью [CDC](../../mfc/reference/cdc-class.md) объекта, на который указывает `pDC` параметра. Можно выбрать ресурсы GDI, такие как перья или шрифты, в контексте устройства перед рисованием и снимите их позже. Часто рисования кода может быть аппаратно независимые; то есть он не требует сведений о устройства отображается изображение.  
  
 Чтобы оптимизировать рисования, вызовите [RectVisible](../../mfc/reference/cdc-class.md#rectvisible) контекст устройства, чтобы узнать, будет ли данный прямоугольник рисоваться функцию-член. Если необходимо различать обычные экран и печати, вызовите [IsPrinting](../../mfc/reference/cdc-class.md#isprinting) функции-члена контекста устройства.  
  
##  <a name="ondrop"></a>  CView::OnDrop  
 Вызывается платформой, когда пользователь отпускает объект данных через допустимым местом назначения.  
  
```  
virtual BOOL OnDrop(
    COleDataObject* pDataObject,  
    DROPEFFECT dropEffect,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) , попадает в место вставки.  
  
 `dropEffect`  
 Пользователь запросил влияния drop.  
  
- `DROPEFFECT_COPY` Создает копию объекта данных в процессе удаления.  
  
- `DROPEFFECT_MOVE` Перемещает объект данных до текущего положения мыши.  
  
- `DROPEFFECT_LINK` Создает связь между объектом данных и свой сервер.  
  
 `point`  
 Текущая позиция мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если удаления выполнена успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию не выполняет никаких действий и возвращает **FALSE**.  
  
 Переопределите эту функцию для реализации эффект перетаскивания OLE в клиентскую область представления. Объект данных, можно просмотреть через `pDataObject` для данных в буфере обмена форматы и данные удалены в заданной точке.  
  
> [!NOTE]
>  Платформа вызывает эту функцию, если переопределение, чтобы [OnDropEx](#ondropex) в этом классе представления.  
  
##  <a name="ondropex"></a>  CView::OnDropEx  
 Вызывается платформой, когда пользователь отпускает объект данных через допустимым местом назначения.  
  
```  
virtual DROPEFFECT OnDropEx(
    COleDataObject* pDataObject,  
    DROPEFFECT dropDefault,  
    DROPEFFECT dropList,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает на [COleDataObject](../../mfc/reference/coledataobject-class.md) , попадает в место вставки.  
  
 `dropDefault`  
 Эффект, который пользователь выбрал для операции удаления по умолчанию, исходя из текущего состояния ключа. Возможно, он `DROPEFFECT_NONE`. Эффектов перетаскивания описаны в разделе "Примечания".  
  
 `dropList`  
 Список эффектов перетаскивания, которые поддерживает источнику. DROP эффект значения могут быть объединены с помощью побитового или ( **&#124;**) операции. Эффектов перетаскивания описаны в разделе "Примечания".  
  
 `point`  
 Текущая позиция мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Эффект сброса, полученным в результате попытка удаления в местоположении, заданном свойством `point`. Это должно быть одно из значений, обозначенном *dropEffectList*. Эффектов перетаскивания описаны в разделе "Примечания".  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию — не выполнять никаких действий и вернуть фиктивное значение (-1), чтобы указать, что платформа должна вызывать [OnDrop](#ondrop) обработчика.  
  
 Переопределите эту функцию для реализации эффект правой кнопки мыши операции перетаскивания. Перетаскивание правой кнопки мыши обычно отображает меню вариантов при отпускании правой кнопки мыши.  
  
 Переопределенный `OnDropEx` должен запросить правой кнопки мыши. Можно вызвать [GetKeyState](http://msdn.microsoft.com/library/windows/desktop/ms646301) или сохранить состояние правой кнопки мыши из вашего [OnDragEnter](#ondragenter) обработчика.  
  
-   Если правой кнопки мыши не работает, переопределение должно отображаться в контекстном меню, которая предлагает поддержку эффектов перетаскивания источником перетаскивания.  
  
    -   Изучите `dropList` для определения эффектов перетаскивания, поддерживаемые источником перетаскивания. Включите эти действия во всплывающем меню.  
  
    -   Используйте [SetMenuDefaultItem](http://msdn.microsoft.com/library/windows/desktop/ms647996) для задания действия по умолчанию на основе `dropDefault`.  
  
    -   Наконец выполните действия, обозначенном выбора пользователя из всплывающего меню.  
  
-   Если правой кнопки мыши не вниз, переопределение должно обрабатывать это как стандартная drop запрос. Используйте drop эффект, указанный в `dropDefault`. Кроме того, переопределенный может возвращать фиктивное значение (-1), чтобы указать, что `OnDrop` будет обрабатывать эту операцию перетаскивания.  
  
 Используйте `pDataObject` для изучения `COleDataObject` для данных из буфера обмена данные и формат удалить в заданной точке.  
  
 Эффектов перетаскивания описаны действия, связанные с операцией перетаскивания. Ниже представлен список эффектов перетаскивания:  
  
- `DROPEFFECT_NONE` Удаление не допускается.  
  
- `DROPEFFECT_COPY` Операция копирования будет выполнена.  
  
- `DROPEFFECT_MOVE` Выполняется операция перемещения.  
  
- `DROPEFFECT_LINK` Ссылка из перетаскиваемых данных с исходными данными будет установлено.  
  
- `DROPEFFECT_SCROLL` Указывает, что операции перетаскивания прокрутки о или происходит в целевом объекте.  
  
 Дополнительные сведения о задании команду меню по умолчанию см. в разделе [SetMenuDefaultItem](http://msdn.microsoft.com/library/windows/desktop/ms647996) в Windows SDK и [CMenu::GetSafeHmenu](../../mfc/reference/cmenu-class.md#getsafehmenu) в данном томе.  
  
##  <a name="onendprinting"></a>  CView::OnEndPrinting  
 Вызывается структурой после документ был напечатан или просмотрен.  
  
```  
virtual void OnEndPrinting(
    CDC* pDC,  
    CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структура, описывающая текущее задание печати.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию этой функции не выполняет никаких действий. Переопределить эту функцию, чтобы освободить все ресурсы GDI, выделенных в [OnBeginPrinting](#onbeginprinting) функции-члена.  
  
##  <a name="onendprintpreview"></a>  CView::OnEndPrintPreview  
 Вызывается платформой, когда пользователь выходит из режима предварительного просмотра печати.  
  
```  
virtual void OnEndPrintPreview(
    CDC* pDC,  
    CPrintInfo* pInfo,  
    POINT point,  
    CPreviewView* pView);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структура, описывающая текущее задание печати.  
  
 `point`  
 Задает точку на странице, последнего отображается в режиме предварительного просмотра.  
  
 `pView`  
 Указывает объект представления, используемые для предварительного просмотра.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция вызывает [OnEndPrinting](#onendprinting) функции-члена и восстановление начала фрейма главного окна в состояние, ранее в режиме предварительного просмотра. Переопределите эту функцию, чтобы выполнять специальную обработку при завершении режим предварительного просмотра. Например, если вы хотите поддерживать положение пользователя в документе, при переходе из режима предварительного просмотра в обычный режим, можно прокрутить позиции, описываемого `point` параметр и `m_nCurPage` членом `CPrintInfo` структуры `pInfo` указывает параметр.  
  
 Всегда вызывайте метод версию базового класса `OnEndPrintPreview` из переопределения, обычно в конце функции.  
  
##  <a name="oninitialupdate"></a>  CView::OnInitialUpdate  
 Вызывается платформой после представление впервые присоединяется к документу, но до первоначального отображения представления.  
  
```  
virtual void OnInitialUpdate();
```  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция вызывает [OnUpdate](#onupdate) функции-члена без указания информации (то есть, используя значения по умолчанию 0 для `lHint` параметр и **NULL** для `pHint` параметр). Переопределите эту функцию, чтобы выполнить однократную инициализацию, которая требуется сведения о документе. Например если приложение имеет документов фиксированного размера, можно использовать эту функцию для инициализации представления прокрутки ограничения в зависимости от размера документа. Если приложение поддерживает документы переменного размера, используйте [OnUpdate](#onupdate) обновление прокрутки ограничивает каждый раз изменения документа.  
  
##  <a name="onpreparedc"></a>  CView::OnPrepareDC  
 Вызывается платформой перед [OnDraw](#ondraw) функция-член вызывается для отображения на экране и перед [OnPrint](#onprint) функция-член вызывается для каждой страницы во время печати или предварительного просмотра.  
  
```  
virtual void OnPrepareDC(
    CDC* pDC,  
    CPrintInfo* pInfo = NULL);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст устройства для использования для подготовки к просмотру изображения документа.  
  
 `pInfo`  
 Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структура, описывающая текущее задание печати, если `OnPrepareDC` вызывается для печати или предварительного просмотра; `m_nCurPage` член определяет страницу готов к печати. Этот параметр является **NULL** Если `OnPrepareDC` вызывается для отображения на экране.  
  
### <a name="remarks"></a>Примечания  
 Если функция вызывается для отображения на экране, реализация этой функции по умолчанию не выполняет никаких действий. Однако эта функция переопределяется в производных классах, таких как [CScrollView](../../mfc/reference/cscrollview-class.md), для настройки атрибутов контекста устройства; таким образом, следует всегда вызывать реализацию базового класса в начале переопределения.  
  
 Если функция вызывается для печати, реализация по умолчанию проверяет страницу сведений, хранящихся в `pInfo` параметра. Если длина документа не был задан, `OnPrepareDC` предполагает документ, который требуется одной страницей и останавливает печати цикла после печати одной страницы. Функция останавливающее цикл печати, задав `m_bContinuePrinting` член структуры **FALSE**.  
  
 Переопределить `OnPrepareDC` по любой из следующих причин:  
  
-   Для настройки атрибутов контекста устройства, при необходимости для указанной страницы. Например если необходимо задать режим сопоставления или других характеристик контекста устройства, сделать в этой функции.  
  
-   Для выполнения во время печати разбиение на страницы. Обычно следует указать длину документа, когда печать начинается с помощью [OnPreparePrinting](#onprepareprinting) функции-члена. Тем не менее, если вы не знаете заранее документа (например, при печати неопределенное количество записей из базы данных), переопределите `OnPrepareDC` для проверки на наличие конца документа во время его вывода на печать. При больше документа на печать, установите `m_bContinuePrinting` членом `CPrintInfo` структуру **FALSE**.  
  
-   Для отправки escape-кодами принтер на основе страницу за страницей. Для отправки escape-кодами `OnPrepareDC`, вызовите **Escape** функцию-член `pDC` параметра.  
  
 Вызовите версию базового класса `OnPrepareDC` в начале переопределения.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCDocView#183](../../mfc/codesnippet/cpp/cview-class_1.cpp)]  
  
##  <a name="onprepareprinting"></a>  CView::OnPreparePrinting  
 Вызывается платформой перед печати или просмотра документа.  
  
```  
virtual BOOL OnPreparePrinting(CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pInfo`  
 Указывает на [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структура, описывающая текущее задание печати.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение для начала печати. 0, если задание было отменено.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию не выполняет никаких действий.  
  
 Необходимо переопределить эту функцию, чтобы включить печать и предварительный просмотр. Вызовите [DoPreparePrinting](#doprepareprinting) функция-член, передавая ему `pInfo` параметра и возвращать его возвращаемое значение; `DoPreparePrinting` отображает диалоговое окно «Печать» и создает контекст устройства принтера. Если требуется инициализировать диалоговое окно печати с помощью значения, отличные от значений по умолчанию, присвоения значений членам `pInfo`. Например, если вы знаете длине документа, передайте значение для [SetMaxPage](../../mfc/reference/cprintinfo-structure.md#setmaxpage) функцию-член `pInfo` перед вызовом `DoPreparePrinting`. Это значение отображается в поле Кому: поле в диапазоне части диалогового окна «Печать».  
  
 `DoPreparePrinting` не отображать диалоговое окно печати для просмотра задания. Если вы хотите обойти диалоговое окно печати задания печати, убедитесь, что **m_bPreview** членом `pInfo` — **FALSE** и установите его в **TRUE** перед передачей `DoPreparePrinting`; сбросить его, чтобы **FALSE** позже.  
  
 Требуется для инициализаций, которым требуется доступ к `CDC` объект, представляющий контекст устройства принтера (например, если вам необходимо знать размер страницы, перед тем как указать длину документа), переопределить `OnBeginPrinting` член функция.  
  
 Если вы хотите задать значение **m_nNumPreviewPages** или **m_strPageDesc** члены `pInfo` параметра, сделать это после вызова `DoPreparePrinting`. `DoPreparePrinting` Наборы элементов функция **m_nNumPreviewPages** значение, найденное в приложении. INI-файл и задает **m_strPageDesc** значение по умолчанию.  
  
### <a name="example"></a>Пример  
  Переопределить `OnPreparePrinting` и вызвать `DoPreparePrinting` из переопределение, чтобы платформа будет отображать диалоговое окно печати и создавать принтера.  
  
 [!code-cpp[NVC_MFCDocView#184](../../mfc/codesnippet/cpp/cview-class_2.cpp)]  
  
 Если вы знаете, сколько страниц, что документ содержит, задать максимальное страницы в `OnPreparePrinting` перед вызовом `DoPreparePrinting`. Платформа будет отображаться номера страницы в поле «Кому» диалогового окна "Печать".  
  
 [!code-cpp[NVC_MFCDocView#185](../../mfc/codesnippet/cpp/cview-class_3.cpp)]  
  
##  <a name="onprint"></a>  CView::OnPrint  
 Вызывается платформой для печати или просмотра страницы документа.  
  
```  
virtual void OnPrint(
    CDC* pDC,  
    CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает `CPrintInfo` структура, описывающая текущее задание печати.  
  
### <a name="remarks"></a>Примечания  
 Для каждой страницы вывод на печать, платформа вызывает эту функцию сразу после вызова [OnPrepareDC](#onpreparedc) функции-члена. Вывод на печать страницы определяется `m_nCurPage` членом [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, в которой `pInfo` указывает. Реализация по умолчанию вызывает [OnDraw](#ondraw) функция-член и передает его в контекст устройства принтера.  
  
 Переопределите эту функцию для любой из следующих причин:  
  
-   Чтобы разрешить печать многостраничных документов. Отображать только часть документа, который соответствует странице в настоящее время печатается. Если вы используете `OnDraw` для выполнения отрисовки, можно настроить начало координат окна просмотра, чтобы печатается соответствующую часть документа.  
  
-   Чтобы сделать печатной отличаться от изображения на экране (то есть, если приложение не WYSIWYG). Вместо того чтобы передавать контекст устройства для принтера `OnDraw`, использовать контекст устройства для подготовки к просмотру изображения с помощью атрибутов, не отображаются на экране.  
  
     Если вам требуется ресурсов GDI для печати, который не используется для отображения на экране, выберите их в контекст устройства перед рисованием и затем снимите флажок. Эти ресурсы GDI необходимо выделить в [OnBeginPrinting](#onbeginprinting) , так и в [OnEndPrinting](#onendprinting).  
  
-   Чтобы реализовать верхние и нижние колонтитулы. Вы можете продолжать использовать `OnDraw` делать для подготовки к просмотру путем ограничения области печати.  
  
 Обратите внимание, что **m_rectDraw** членом `pInfo` параметр описывает области печати страницы в логических единицах.  
  
 Не вызывайте `OnPrepareDC` в переопределении `OnPrint`; вызывается `OnPrepareDC` автоматически перед вызовом `OnPrint`.  
  
### <a name="example"></a>Пример  
 Ниже приведен каркас для переопределенный `OnPrint` функции:  
  
 [!code-cpp[NVC_MFCDocView#186](../../mfc/codesnippet/cpp/cview-class_4.cpp)]  
  
 Еще один пример см. в разделе [CRichEditView::PrintInsideRect](../../mfc/reference/cricheditview-class.md#printinsiderect).  
  
##  <a name="onscroll"></a>  CView::OnScroll  
 Вызывается платформой, чтобы определить, является ли прокрутка возможна.  
  
```  
virtual BOOL OnScroll(
    UINT nScrollCode,  
    UINT nPos,  
    BOOL bDoScroll = TRUE);
```  
  
### <a name="parameters"></a>Параметры  
 `nScrollCode`  
 Полоса прокрутки код, указывающий пользователя прокрутки запроса. Этот параметр состоит из двух частей: младший байт, который определяет тип возникновения прокрутки по горизонтали, а старший байт, который определяет тип возникновения прокрутки по вертикали:  
  
- **SB_BOTTOM** выполняет прокрутку вниз.  
  
- **SB_LINEDOWN** прокручивает одну строку вниз.  
  
- **SB_LINEUP** прокручивает одну строку вверх.  
  
- **SB_PAGEDOWN** прокручивает одну страницу вниз.  
  
- **SB_PAGEUP** прокручивает одну страницу вверх.  
  
- **SB_THUMBTRACK** перетаскивания ползунка в указанной позиции. Текущая позиция указывается в `nPos`.  
  
- **SB_TOP** прокручивается в начало.  
  
 `nPos`  
 Содержит текущее положение полосы прокрутки, если полоса прокрутки код **SB_THUMBTRACK**; в противном случае он не используется. В зависимости от диапазона начальной прокрутки `nPos` может быть отрицательным и должны быть приведены к `int` при необходимости.  
  
 `bDoScroll`  
 Определяет ли его реального выполнения указанного действия прокрутки. Если **задано значение TRUE,** то прокрутка должно быть выполнено; Если **FALSE**, прокрутка должно не выполняться.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если `bDoScroll` — **TRUE** и фактически прокрутке представления, возвращается ненулевое значение; в противном случае — 0. Если `bDoScroll` — **FALSE**, возвращается значение, которое вы возвращала бы Если `bDoScroll` были **TRUE**, даже если этого не сделать фактически прокрутки.  
  
### <a name="remarks"></a>Примечания  
 В первом случае эта функция вызывается платформой с `bDoScroll` значение **TRUE** Если представление получает сообщение полосы прокрутки. В этом случае фактически следует прокручивать представление. В другом случае эта функция вызывается с `bDoScroll` значение **FALSE** при элемента OLE изначально перетаскивается в область автоматическая прокрутка конечного расположения сброса перед прокрутки фактическом. В этом случае следует не перейти фактически представления.  
  
##  <a name="onscrollby"></a>  CView::OnScrollBy  
 Вызывается платформой, когда пользователь просматривает область за пределами имеется представление документа, либо путем перетаскивания объекта OLE с границами текущего представления или работая с вертикальной или горизонтальной полосы прокрутки.  
  
```  
virtual BOOL OnScrollBy(
    CSize sizeScroll,  
    BOOL bDoScroll = TRUE);
```  
  
### <a name="parameters"></a>Параметры  
 `sizeScroll`  
 Число пикселей прокручиваться по горизонтали и вертикали.  
  
 `bDoScroll`  
 Определяет, происходит ли прокрутка представления. Если **задано значение TRUE,** затем прокрутки имело место; Если **FALSE**, то прокрутка не возникает.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если представление не удалось выполнить прокрутку; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 В производных классах этот метод проверяет ли представление является прокручиваемым в направлении пользователь запросил и обновляет новую область при необходимости. Эта функция вызывается автоматически [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) для выполнения фактического запроса прокрутки.  
  
 Реализация по умолчанию этот метод не изменяет представление, но если он не вызывается, представление не будет прокрутки в `CScrollView`-производного класса.  
  
 Если документ ширина или высота превышает 32767 пикселей, прокручивать за 32767 завершится ошибкой, так как `OnScrollBy` вызывается с недопустимым `sizeScroll` аргумент.  
  
##  <a name="onupdate"></a>  CView::OnUpdate  
 Вызывается платформой, после этого представления документа был изменен; Эта функция вызывается [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) и позволяет представлению обновления его отображения, чтобы отразить эти изменения.  
  
```  
virtual void OnUpdate(
    CView* pSender,  
    LPARAM lHint,  
    CObject* pHint);
```  
  
### <a name="parameters"></a>Параметры  
 `pSender`  
 Указывает представление, которое изменение в документ или **NULL** Если все представления должны быть обновлены.  
  
 `lHint`  
 Содержит сведения об изменениях.  
  
 `pHint`  
 Указывает на объект хранения информации об изменениях.  
  
### <a name="remarks"></a>Примечания  
 Также вызывается реализация по умолчанию [OnInitialUpdate](#oninitialupdate). Реализация по умолчанию делает недействительной всю клиентскую область, помечая его для прорисовки при следующем `WM_PAINT` сообщение. Переопределите эту функцию, если вы хотите обновлять только области, сопоставленные им измененные части документа. Для этого необходимо передать сведения об изменениях, с помощью подсказки параметров.  
  
 Чтобы использовать `lHint`, определить специальное Указание значения, обычно битовую маску, позволяющую или перечисляемый тип, и иметь документа передайте одно из следующих значений. Для использования `pHint`, являются производными от класса указание [CObject](../../mfc/reference/cobject-class.md) и иметь документ передать указатель на объект указание; при переопределении метода `OnUpdate`, используйте [CObject::IsKindOf](../../mfc/reference/cobject-class.md#iskindof) функция-член Определите тип времени выполнения объекта подсказку.  
  
 Обычно не следует выполнять любой Рисование непосредственно из `OnUpdate`. Вместо этого определите прямоугольник, описывающий координаты устройства область, которая требует обновления; Передайте этот прямоугольник для [CWnd::InvalidateRect](../../mfc/reference/cwnd-class.md#invalidaterect). В результате рисования для проведена при следующем запуске [WM_PAINT](http://msdn.microsoft.com/library/windows/desktop/dd145213) сообщение.  
  
 Если `lHint` равно 0 и `pHint` — **NULL**, документ отправлено уведомление универсального обновления. Если представление получает уведомление об универсальных обновления или он не может декодировать подсказки, необходимо сделать недействительным всей клиентской области.  
  
## <a name="see-also"></a>См. также  
 [Пример MFC MDIDOCVW](../../visual-cpp-samples.md)   
 [CWnd-класс](../../mfc/reference/cwnd-class.md)   
 [Диаграмма иерархии](../../mfc/hierarchy-chart.md)   
 [CWnd-класс](../../mfc/reference/cwnd-class.md)   
 [CFrameWnd-класс](../../mfc/reference/cframewnd-class.md)   
 [Класса CSplitterWnd](../../mfc/reference/csplitterwnd-class.md)   
 [CDC-класс](../../mfc/reference/cdc-class.md)   
 [CDocTemplate-класс](../../mfc/reference/cdoctemplate-class.md)   
 [Класс CDocument](../../mfc/reference/cdocument-class.md)
