---
title: "CView-класс | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-cpp
ms.tgt_pltfrm: 
ms.topic: reference
f1_keywords:
- CView
- AFXWIN/CView
- AFXWIN/CView::CView
- AFXWIN/CView::DoPreparePrinting
- AFXWIN/CView::GetDocument
- AFXWIN/CView::IsSelected
- AFXWIN/CView::OnDragEnter
- AFXWIN/CView::OnDragLeave
- AFXWIN/CView::OnDragOver
- AFXWIN/CView::OnDragScroll
- AFXWIN/CView::OnDrop
- AFXWIN/CView::OnDropEx
- AFXWIN/CView::OnInitialUpdate
- AFXWIN/CView::OnPrepareDC
- AFXWIN/CView::OnScroll
- AFXWIN/CView::OnScrollBy
- AFXWIN/CView::OnActivateFrame
- AFXWIN/CView::OnActivateView
- AFXWIN/CView::OnBeginPrinting
- AFXWIN/CView::OnDraw
- AFXWIN/CView::OnEndPrinting
- AFXWIN/CView::OnEndPrintPreview
- AFXWIN/CView::OnPreparePrinting
- AFXWIN/CView::OnPrint
- AFXWIN/CView::OnUpdate
dev_langs:
- C++
helpviewer_keywords:
- views [C++], view classes
- multiple views
- CView class
- document/view architecture
- input, and view class
- MDI [C++], view windows
- print preview, view windows
- windows [C++], views
- child windows, views
- frame windows [C++], views
- user input [C++], interpreting through view class
ms.assetid: 9cff3c56-7564-416b-b9a4-71a9254ed755
caps.latest.revision: 25
author: mikeblome
ms.author: mblome
manager: ghogen
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
translationtype: Machine Translation
ms.sourcegitcommit: 0e0c08ddc57d437c51872b5186ae3fc983bb0199
ms.openlocfilehash: ce5100a9ee4a1c20df04f79f0c8cd645ae3afce7
ms.lasthandoff: 02/24/2017

---
# <a name="cview-class"></a>CView-класс
Предоставляет базовую функциональность для определяемых пользователем классов представления.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
class AFX_NOVTABLE CView : public CWnd  
```  
  
## <a name="members"></a>Члены  
  
### <a name="protected-constructors"></a>Защищенные конструкторы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CView::CView](#cview)|Создает объект `CView`.|  
  
### <a name="public-methods"></a>Открытые методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CView::DoPreparePrinting](#doprepareprinting)|Отображает диалоговое окно «Печать» и создает контекст устройства принтера; При переопределении вызывать `OnPreparePrinting` функции-члена.|  
|[CView::GetDocument](#getdocument)|Возвращает документ, связанный с представлением.|  
|[CView::IsSelected](#isselected)|Проверяет, является ли выбран элемент документа. Требуется для поддержки OLE.|  
|[CView::OnDragEnter](#ondragenter)|Вызывается, когда элемент сначала перетаскивается в область и перетащите представления.|  
|[CView::OnDragLeave](#ondragleave)|Вызывается, когда перетаскиваемый элемент покидает область и перетащите представления.|  
|[CView::OnDragOver](#ondragover)|Вызывается, когда элемент перетаскивается в область и перетаскивания элемента представления.|  
|[CView::OnDragScroll](#ondragscroll)|Вызывается, чтобы определить, является ли курсор перетаскивается в область прокрутки окна.|  
|[CView::OnDrop](#ondrop)|Вызывается, когда элемент был удален в области и перетащите представления, обработчик по умолчанию.|  
|[CView::OnDropEx](#ondropex)|Вызывается, когда элемент был удален в области и перетащите представление первичного обработчика.|  
|[CView::OnInitialUpdate](#oninitialupdate)|Вызывается после представления впервые присоединяется к документу.|  
|[CView::OnPrepareDC](#onpreparedc)|Вызывается перед `OnDraw` функция-член вызывается для просмотра на экране или `OnPrint` функция-член вызывается для предварительного просмотра печати или печати.|  
|[CView::OnScroll](#onscroll)|Вызывается при перетаскивании OLE-элементы за пределами границ в представлении.|  
|[CView::OnScrollBy](#onscrollby)|Вызывается, когда представление, содержащее активные элементы на месте OLE может прокручиваться.|  
  
### <a name="protected-methods"></a>Защищенные методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CView::OnActivateFrame](#onactivateframe)|Вызывается, когда рамка окна, содержащего представление, активируется или деактивируется.|  
|[CView::OnActivateView](#onactivateview)|Вызывается при активации представления.|  
|[CView::OnBeginPrinting](#onbeginprinting)|Вызывается, когда начинается выполнение задания печати; Переопределение позволяет выделить графических устройств (GDI) ресурсов.|  
|[CView::OnDraw](#ondraw)|Вызывается для отображения изображения экрана, печати и предварительного просмотра документа. Требуется реализация.|  
|[CView::OnEndPrinting](#onendprinting)|Вызывается при завершении задания печати; переопределение для освобождения ресурсов GDI.|  
|[CView::OnEndPrintPreview](#onendprintpreview)|Вызывается при выходе из режима предварительного просмотра.|  
|[CView::OnPreparePrinting](#onprepareprinting)|Вызывается до печати документа или просмотра; переопределение для инициализации диалогового окна печати.|  
|[CView::OnPrint](#onprint)|Вызывается для печати или просмотра страницы документа.|  
|[CView::OnUpdate](#onupdate)|Вызывается для оповещения представление, которое его документ был изменен.|  
  
## <a name="remarks"></a>Примечания  
 Представление, прикрепленной к документу и действует как посредник между документом и пользователь: представление выводит на экран изображение документа на экран или принтер и интерпретирует как операции после документа ввод данных пользователем.  
  
 Представление — дочерние окна фрейма. Несколько представлений могут совместно использовать окно, как и в случае окна-разделителя. Отношение между классом просмотра, класс фреймового окна и класс документа обеспечивается `CDocTemplate` объекта. Когда пользователь открывает новое окно или разбивает существующий один, платформа создает новое представление и присоединяет его к документу.  
  
 Представление можно добавить только один документ, но документ может иметь несколько представлений, присоединенные к нему одновременно — например, если документ отображается в разделяемом окне или в нескольких дочерних окон в приложении несколько интерфейса (MDI) документа. Приложение может поддерживать различные типы представлений для типа данного документа; например текстовый процессор может предоставить полный текст представления документа и режим структуры, который показывает только заголовки разделов. Различных типов представлений, можно поместить в отдельный фрейм windows или в отдельных областях окна один кадр при использовании окна-разделителя.  
  
 Представление может быть ответственность за обработку несколько различных типов входных данных, например ввода с клавиатуры, мыши или ввода через и перетаскивания, а также команды из меню, панели инструментов и полосы прокрутки. Представление получает команды, направляемые его фрейм окна. Если представление не обрабатывает данной команды, она передает команду, чтобы его связанный документ. Как и все целевые объекты команд представления обрабатывает сообщения через схему сообщений.  
  
 Представление отвечает для отображения и изменения данных документа, но не для ее хранения. Документ предоставляет необходимые сведения о его данных в представление. Можно разрешить доступ к представление документа члены данных напрямую, или можно предоставить функции-члены в класс документа для класса представления для вызова.  
  
 При изменении данных документа, ответственный за изменения представления обычно вызывает [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) для документа, который уведомляет другие представления, вызвав функцию `OnUpdate` для каждой функции-члена. Реализация по умолчанию `OnUpdate` делает недействительной всю клиентскую область представления. Вы можете переопределить его, чтобы сделать недействительными только этих областей клиентской области, которые сопоставляются с измененной части документа.  
  
 Для использования `CView`, создайте класс, производный от него и реализации `OnDraw` функции-члена для выполнения изображения на экране. Можно также использовать `OnDraw` для выполнения печати и предварительного просмотра. Платформа framework обрабатывает цикла печати для печати и предварительного просмотра документа.  
  
 Представление обрабатывает сообщения полосы прокрутки с [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) функции-члены. Полоса прокрутки обработку сообщений в эти функции можно реализовать, или можно использовать `CView` производный класс [CScrollView](../../mfc/reference/cscrollview-class.md) для обработки прокрутки для вас.  
  
 Помимо `CScrollView`, библиотеки классов Microsoft Foundation предоставляет девять классы, производные от `CView`:  
  
- [CCtrlView](../../mfc/reference/cctrlview-class.md), представление, которое позволяет документ - представление архитектуры с помощью дерева, список и широкие возможности редактирования элементов управления.  
  
- [CDaoRecordView](../../mfc/reference/cdaorecordview-class.md), представление, которое отображает записи базы данных в элементах управления диалоговых окон.  
  
- [CEditView](../../mfc/reference/ceditview-class.md), представление, которое предоставляет простой многострочном текстовом редакторе. Можно использовать `CEditView` объект как элемент управления в диалоговое окно, а также просмотр документа.  
  
- [CFormView](../../mfc/reference/cformview-class.md), прокручиваемое представление, содержащее элементы управления диалоговых окон и основан на ресурсе шаблона диалогового окна.  
  
- [CListView](../../mfc/reference/clistview-class.md), представление, которое позволяет документ - представление архитектуры с элементами списка.  
  
- [CRecordView](../../mfc/reference/crecordview-class.md), представление, которое отображает записи базы данных в элементах управления диалоговых окон.  
  
- [CRichEditView](../../mfc/reference/cricheditview-class.md), представление, которое позволяет документ - представление архитектуры с широкими возможностями редактирования элементов управления.  
  
- [CScrollView](../../mfc/reference/cscrollview-class.md), представление, которое автоматически предоставляет поддержку прокрутки.  
  
- [CTreeView](../../mfc/reference/ctreeview-class.md), представление, которое позволяет документ - представление архитектуры с помощью дерева элементов управления.  
  
 `CView` Классе имеется реализация производного класса с именем **CPreviewView**, который используется платформой для выполнения просмотра печати. Этот класс обеспечивает поддержку функций, уникальных для предварительного окна, например панель инструментов, просмотр одного или двойной страницы и масштабирования, который увеличить изображение. Не нужно вызывать или переопределять какие-либо **CPreviewView**Если нужно реализовать собственный интерфейс для предварительного просмотра (например, если требуется поддержка редактирования в режиме предварительного просмотра) функции-члены. Дополнительные сведения об использовании `CView`, в разделе [архитектуры документ/представление](../../mfc/document-view-architecture.md) и [печать](../../mfc/printing.md). Кроме того, в разделе [Технические заметки 30](../../mfc/tn030-customizing-printing-and-print-preview.md) Дополнительные сведения о настройке предварительного просмотра.  
  
## <a name="inheritance-hierarchy"></a>Иерархия наследования  
 [CObject](../../mfc/reference/cobject-class.md)  
  
 [CCmdTarget](../../mfc/reference/ccmdtarget-class.md)  
  
 [CWnd](../../mfc/reference/cwnd-class.md)  
  
 `CView`  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** afxwin.h  
  
##  <a name="cview"></a>CView::CView  
 Создает объект `CView`.  
  
```  
CView();
```  
  
### <a name="remarks"></a>Примечания  
 Платформа вызывает конструктор при создании нового окна области или разбить окно. Переопределение [OnInitialUpdate](#oninitialupdate) функции-члена для инициализации представления после присоединения документа.  
  
##  <a name="doprepareprinting"></a>CView::DoPreparePrinting  
 Эта функция вызывается из переопределение метода [OnPreparePrinting](#onprepareprinting) для вызова диалогового окна «Печать» и создать принтер контекста устройства.  
  
```  
BOOL DoPreparePrinting(CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pInfo`  
 Указывает [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если можно начать предварительный просмотр печати или печати; 0, если операция была отменена.  
  
### <a name="remarks"></a>Примечания  
 Эта функция поведение зависит от того, является ли он вызывается для предварительного просмотра печати или печати (определяется **m_bPreview** членом `pInfo` параметр). Если файл печатается, эта функция вызывает диалоговое окно печати, используя значения в [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, в которой `pInfo` указывает; после пользователь закрыл диалоговое окно, функция создает контекст устройства принтера на основе параметров пользователя в диалоговом окне и возвращает этот контекст устройства через `pInfo` параметр. Этот контекст устройства используется для печати документа.  
  
 При просмотре файла, эта функция создает контекст устройства принтера с использованием текущих параметров печати; Этот контекст устройства используется для имитации принтер во время предварительного просмотра.  
  
##  <a name="getdocument"></a>CView::GetDocument  
 Эта функция вызывается для получения указателя на просмотр документа.  
  
```  
CDocument* GetDocument() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на [CDocument](../../mfc/reference/cdocument-class.md) объект, связанный с представлением. **NULL** Если представление не присоединен к документу.  
  
### <a name="remarks"></a>Примечания  
 Это позволяет вызывать функции-члены документа.  
  
##  <a name="isselected"></a>CView::IsSelected  
 Вызывается платформой для проверки того, выбран ли элемент указанного документа.  
  
```  
virtual BOOL IsSelected(const CObject* pDocItem) const;  
```  
  
### <a name="parameters"></a>Параметры  
 `pDocItem`  
 Указывает элемент документа.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если выбран элемент указанного документа; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция возвращает **FALSE**. Переопределить эту функцию, если вы реализуете выделения с помощью [CDocItem](../../mfc/reference/cdocitem-class.md) объектов. Необходимо переопределить эту функцию, если представление содержит OLE-элементы.  
  
##  <a name="onactivateframe"></a>CView::OnActivateFrame  
 Вызывается платформой, когда рамка окна, содержащего представление, активируется или деактивируется.  
  
```  
virtual void OnActivateFrame(
    UINT nState,  
    CFrameWnd* pFrameWnd);
```  
  
### <a name="parameters"></a>Параметры  
 `nState`  
 Указывает, выполняется ли окно активируется или деактивируется. Он может принимать одно из следующих значений:  
  
- **WA_INACTIVE** выключается фрейме окна.  
  
- **WA_ACTIVE** окна фрейма активируется через какой-нибудь способ, отличные от нажатия кнопки мыши (например, с помощью интерфейса клавиатуры для выбора окна).  
  
- **WA_CLICKACTIVE** окна фрейма активируется по щелчку мыши  
  
 `pFrameWnd`  
 Указатель на окно, которое необходимо активировать.  
  
### <a name="remarks"></a>Примечания  
 Переопределите эту функцию-член, если требуется выполнять специальную обработку при окна фрейма, связанный с представлением, активируется или деактивируется. Например [CFormView](../../mfc/reference/cformview-class.md) выполняет это переопределение, когда он сохраняет и восстанавливает элемент управления, имеющий фокус.  
  
##  <a name="onactivateview"></a>CView::OnActivateView  
 Вызывается платформой, когда представление активируется или деактивируется.  
  
```  
virtual void OnActivateView(
    BOOL bActivate,  
    CView* pActivateView,  
    CView* pDeactiveView);
```  
  
### <a name="parameters"></a>Параметры  
 `bActivate`  
 Указывает, является ли представление активируется или деактивируется.  
  
 `pActivateView`  
 Указывает объект представления, активируется.  
  
 `pDeactiveView`  
 Указывает объект представления, перестает быть активным.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция устанавливает фокус на представлении активируется. Переопределите эту функцию, если вы хотите выполнять специальную обработку, когда представление активируется или деактивируется. Например, для предоставления специальных визуальных подсказок, которые отличают активное представление от неактивные представления будет анализировать `bActivate` параметр и соответствующим образом обновлять внешний вид.  
  
 `pActivateView` И `pDeactiveView` пункт Параметры тем же самым представлением при активации без изменения в активном окне фрейма главного окна приложения — например, если фокус передается из другого приложения с данным, а не от одного представления к другому в рамках приложения или при переключении между дочерними окнами MDI. Это позволяет представление повторно реализовать палитру его при необходимости.  
  
 Эти параметры отличаются при [CFrameWnd::SetActiveView](../../mfc/reference/cframewnd-class.md#setactiveview) вызывается с представлением, отличается от что [CFrameWnd::GetActiveView](../../mfc/reference/cframewnd-class.md#getactiveview) вернет. Чаще всего это происходит с помощью окна-разделители.  
  
##  <a name="onbeginprinting"></a>CView::OnBeginPrinting  
 Вызывается платформой в начале задания печати или предварительного просмотра после вызова `OnPreparePrinting` .  
  
```  
virtual void OnBeginPrinting(
    CDC* pDC,  
    CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию этой функции не выполняет никаких действий. Переопределите эту функцию, чтобы выделить все ресурсы GDI, такие как перья или шрифты, специально для печати. Выберите объекты GDI в контекст устройства изнутри [OnPrint](#onprint) функция-член для каждой страницы, использующий их. Если вы применяете один и тот же объект представления для вывода изображения на экран и печати, используйте отдельные переменные для ресурсов GDI, необходимых для каждого отображения. Это позволит обновлять экран во время печати.  
  
 Эту функцию также можно использовать для инициализаций, которые зависят от свойств контекста принтера. Например, число страниц, необходимых для печати документа, может зависеть от параметров, заданных пользователем в диалоговом окне печати (например, длина страницы). В таком случае нельзя указать длине документа в [OnPreparePrinting](#onprepareprinting) функция-член, где это обычно делается так, дождитесь, пока контекст устройства принтера был создан на основе параметров поля диалогового окна. [OnBeginPrinting](#onbeginprinting) Первая функция overridable, предоставляющий доступ к [CDC](../../mfc/reference/cdc-class.md) объект, представляющий контекст устройства принтера, чтобы длина документа можно задать из данной функции. Обратите внимание, что если к этому моменту длина документа не указана, во время предварительного просмотра полоса прокрутки отображаться не будет.  
  
##  <a name="ondragenter"></a>CView::OnDragEnter  
 Вызывается платформой, когда указатель мыши впервые входит области без прокрутки окна цели перетаскивания.  
  
```  
virtual DROPEFFECT OnDragEnter(
    COleDataObject* pDataObject,  
    DWORD dwKeyState,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает [COleDataObject](../../mfc/reference/coledataobject-class.md) , перетаскиваемого в область представления.  
  
 `dwKeyState`  
 Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: **MK_CONTROL**, **MK_SHIFT**, **MK_ALT**, **MK_LBUTTON**, **MK_MBUTTON**, и **MK_RBUTTON**.  
  
 `point`  
 Текущее положение мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение из `DROPEFFECT` перечислимый тип, который указывает тип перетаскивания, что произойдет, если пользователь удален объект в этой позиции. Тип удаления обычно зависит текущее состояние клавиш, определяется `dwKeyState`. Стандартная сопоставление ключевые для `DROPEFFECT` значений:  
  
- `DROPEFFECT_NONE`В этом окне невозможно удалить объект данных.  
  
- `DROPEFFECT_LINK`для **MK_CONTROL | MK_SHIFT** создает связь между объектом и его сервер.  
  
- `DROPEFFECT_COPY`для **MK_CONTROL** создает копию перетаскиваемый объект.  
  
- `DROPEFFECT_MOVE`для **MK_ALT** создает копию перетаскиваемый объект и удаления исходного объекта. Обычно это эффект перетаскивания по умолчанию, при представлении может принимать объект данных.  
  
 Дополнительные сведения см. в образце Дополнительные понятия MFC [OCLIENT](../../visual-cpp-samples.md).  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию — ничего не делать и вернуться `DROPEFFECT_NONE`.  
  
 Переопределить эту функцию для подготовки для будущих вызовов [OnDragOver](#ondragover) функции-члена. Все данные, необходимые из объекта данных, которые должны быть получены в данный момент для последующего использования в `OnDragOver` функции-члена. Представления также должны обновляться в данный момент, чтобы дать пользователю визуальную обратную связь. Дополнительные сведения см. в статье [перетаскивание: реализация объекта-приемника](../../mfc/drag-and-drop-implementing-a-drop-target.md).  
  
##  <a name="ondragleave"></a>CView::OnDragLeave  
 Вызывается средой во время операции перетаскивания при перемещении указателя мыши за пределы допустимой области для этого окна.  
  
```  
virtual void OnDragLeave();
```  
  
### <a name="remarks"></a>Примечания  
 Переопределить эту функцию, если требуется очистить все действия, предпринятые во время текущего представления [OnDragEnter](#ondragenter) или [OnDragOver](#ondragover) вызовам, такие как удаление любые отзывы пользователей visual, пока объект был перетаскивать.  
  
##  <a name="ondragover"></a>CView::OnDragOver  
 Вызывается средой во время операции перетаскивания при перемещении указателя мыши по окна цели перетаскивания.  
  
```  
virtual DROPEFFECT OnDragOver(
    COleDataObject* pDataObject,  
    DWORD dwKeyState,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает [COleDataObject](../../mfc/reference/coledataobject-class.md) , перетаскиваемый над цели перетаскивания.  
  
 `dwKeyState`  
 Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: **MK_CONTROL**, **MK_SHIFT**, **MK_ALT**, **MK_LBUTTON**, **MK_MBUTTON**, и **MK_RBUTTON**.  
  
 `point`  
 Текущая позиция мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение из `DROPEFFECT` перечислимый тип, который указывает тип перетаскивания, что произойдет, если пользователь удален объект в этой позиции. Тип удаления часто зависит от текущего состояния ключа, обозначенный `dwKeyState`. Стандартная сопоставление ключевые для `DROPEFFECT` значений:  
  
- `DROPEFFECT_NONE`В этом окне невозможно удалить объект данных.  
  
- `DROPEFFECT_LINK`для **MK_CONTROL | MK_SHIFT** создает связь между объектом и его сервер.  
  
- `DROPEFFECT_COPY`для **MK_CONTROL** создает копию перетаскиваемый объект.  
  
- `DROPEFFECT_MOVE`для **MK_ALT** создает копию перетаскиваемый объект и удаления исходного объекта. Обычно это эффект перетаскивания по умолчанию, при представлении может принимать объект данных.  
  
 Дополнительные сведения см. в образце Дополнительные понятия MFC [OCLIENT](../../visual-cpp-samples.md).  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию является не выполняют никаких действий и вернуть `DROPEFFECT_NONE`.  
  
 Переопределите эту функцию, чтобы дать пользователю визуальную обратную связь во время операции перетаскивания. Так как эта функция вызывается непрерывно, любой код, содержащийся в ней необходимо оптимизировать максимальной. Дополнительные сведения см. в статье [перетаскивание: реализация объекта-приемника](../../mfc/drag-and-drop-implementing-a-drop-target.md).  
  
##  <a name="ondragscroll"></a>CView::OnDragScroll  
 Вызывается средой перед вызовом метода [OnDragEnter](#ondragenter) или [OnDragOver](#ondragover) для определения, является ли точка находится в области прокрутки.  
  
```  
virtual DROPEFFECT OnDragScroll(
    DWORD dwKeyState,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `dwKeyState`  
 Содержит состояние клавиши-модификаторы. Это сочетание любое количество следующих: **MK_CONTROL**, **MK_SHIFT**, **MK_ALT**, **MK_LBUTTON**, **MK_MBUTTON**, и **MK_RBUTTON**.  
  
 `point`  
 Содержит расположение курсора в пикселях, относительно экрана.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение из `DROPEFFECT` перечислимый тип, который указывает тип перетаскивания, что произойдет, если пользователь удален объект в этой позиции. Тип удаления обычно зависит текущее состояние клавиш, определяется `dwKeyState`. Стандартная сопоставление ключевые для `DROPEFFECT` значений:  
  
- `DROPEFFECT_NONE`В этом окне невозможно удалить объект данных.  
  
- `DROPEFFECT_LINK`для **MK_CONTROL | MK_SHIFT** создает связь между объектом и его сервер.  
  
- `DROPEFFECT_COPY`для **MK_CONTROL** создает копию перетаскиваемый объект.  
  
- `DROPEFFECT_MOVE`для **MK_ALT** создает копию перетаскиваемый объект и удаления исходного объекта.  
  
- `DROPEFFECT_SCROLL`Указывает, что операция перетаскивания прокрутки о или происходит в целевое представление.  
  
 Дополнительные сведения см. в образце Дополнительные понятия MFC [OCLIENT](../../visual-cpp-samples.md).  
  
### <a name="remarks"></a>Примечания  
 Переопределите эту функцию, если вы хотите предоставить специальное поведение для данного события. Реализация по умолчанию автоматически прокручивается windows, когда курсор перетаскивается в область прокрутки по умолчанию внутри границы каждого окна. Дополнительные сведения см. в статье [перетаскивание: реализация объекта-приемника](../../mfc/drag-and-drop-implementing-a-drop-target.md).  
  
##  <a name="ondraw"></a>CView::OnDraw  
 Вызывается платформой для визуализации изображения документа.  
  
```  
virtual void OnDraw(CDC* pDC) = 0;  
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст устройства для подготовки к просмотру изображения документа.  
  
### <a name="remarks"></a>Примечания  
 Платформа вызывает эту функцию для выполнения экрана, печати и предварительного просмотра и передает контекст различные устройства в каждом случае. Реализация по умолчанию отсутствует.  
  
 Необходимо переопределить эту функцию, чтобы отобразить представление документа. Можно вызывать графических устройств (GDI) интерфейса с помощью [CDC](../../mfc/reference/cdc-class.md) объекта, на который указывает `pDC` параметр. Можно выбрать ресурсов GDI, таких как перьев или шрифты, в контекст устройства перед рисованием и отменить их позже. Часто код рисования может быть аппаратно независимые; то есть он не требует сведения о каком типе устройства отображается изображение.  
  
 Чтобы оптимизировать Рисование, вызовите [RectVisible](../../mfc/reference/cdc-class.md#rectvisible) контекст устройства, чтобы узнать, является ли данный прямоугольник будет отображаться функцию-член. Если необходимо различать отображения стандартного экрана и печати, вызвать [IsPrinting](../../mfc/reference/cdc-class.md#isprinting) функцию-член контекст устройства.  
  
##  <a name="ondrop"></a>CView::OnDrop  
 Вызывается платформой, когда пользователь отпускает объект данных через является допустимой целью перетаскивания.  
  
```  
virtual BOOL OnDrop(
    COleDataObject* pDataObject,  
    DROPEFFECT dropEffect,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает [COleDataObject](../../mfc/reference/coledataobject-class.md) , попадает в цели перетаскивания.  
  
 `dropEffect`  
 Пользователь запросил влияния перетаскивания.  
  
- `DROPEFFECT_COPY`Создает копию объекта данных в процессе удаления.  
  
- `DROPEFFECT_MOVE`Перемещение объекта данных в текущем положении мыши.  
  
- `DROPEFFECT_LINK`Создает связь между объектом данных и сервером.  
  
 `point`  
 Текущая позиция мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если освобождение прошло успешно; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию не выполняет никаких действий и возвращает **FALSE**.  
  
 Переопределите эту функцию, чтобы реализовать клиентскую область представления эффект перетаскивания OLE. Можно проверить объект данных через `pDataObject` для данных из буфера обмена форматы и данные удаляются в заданной точке.  
  
> [!NOTE]
>  Платформа не вызывайте эту функцию, если существует переопределение, чтобы [OnDropEx](#ondropex) в этом классе представления.  
  
##  <a name="ondropex"></a>CView::OnDropEx  
 Вызывается платформой, когда пользователь отпускает объект данных через является допустимой целью перетаскивания.  
  
```  
virtual DROPEFFECT OnDropEx(
    COleDataObject* pDataObject,  
    DROPEFFECT dropDefault,  
    DROPEFFECT dropList,  
    CPoint point);
```  
  
### <a name="parameters"></a>Параметры  
 `pDataObject`  
 Указывает [COleDataObject](../../mfc/reference/coledataobject-class.md) , попадает в цели перетаскивания.  
  
 `dropDefault`  
 Эффект, который пользователь выбрал для операции удаления по умолчанию, исходя из текущего состояния ключа. Это может быть `DROPEFFECT_NONE`. Эффектов перетаскивания рассматриваются в разделе «Примечания».  
  
 `dropList`  
 Список эффектов перетаскивания, которые поддерживает источника перетаскивания. Значения эффект перетаскивания можно объединить с помощью побитового или ( **|**) операции. Эффектов перетаскивания рассматриваются в разделе «Примечания».  
  
 `point`  
 Текущая позиция мыши относительно клиентской области представления.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Эффект, полученным в результате попытки удаления в расположении, заданном по `point`. Это должно быть одно из значений, обозначенными *dropEffectList*. Эффектов перетаскивания рассматриваются в разделе «Примечания».  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию — ничего не делать и вернуться фиктивное значение (-1), чтобы указать, что платформа должна вызывать [OnDrop](#ondrop) обработчика.  
  
 Переопределите эту функцию для реализации эффект правой кнопки мыши операции перетаскивания. Перетаскивание правой кнопки мыши обычно отображается меню вариантов при отпускании правой кнопки мыши.  
  
 Переопределение метода `OnDropEx` необходимо запросить правой кнопки мыши. Можно вызвать [GetKeyState](http://msdn.microsoft.com/library/windows/desktop/ms646301) или сохранять состояние правой кнопки мыши от вашего [OnDragEnter](#ondragenter) обработчика.  
  
-   Если правой кнопки мыши не работает, переопределение должно отображаться в контекстном меню, которая предлагает поддержку эффектов перетаскивания источника перетаскивания.  
  
    -   Изучите `dropList` для определения возможных эффектов перетаскивания, поддерживаемые источником перетаскивания. Включите эти действия во всплывающем меню.  
  
    -   Используйте [SetMenuDefaultItem](http://msdn.microsoft.com/library/windows/desktop/ms647996) для задания действия по умолчанию, на основе `dropDefault`.  
  
    -   Наконец выполните действие определяется выбором из всплывающего меню.  
  
-   Если правой кнопки мыши не нажата, переопределение должно обрабатывать это как стандартная drop запрос. Эффект перетаскивания, указанного в `dropDefault`. Кроме того, переопределение может возвращать фиктивное значение (-1), чтобы указать, что `OnDrop` обработки этой операции перетаскивания.  
  
 Используйте `pDataObject` для изучения `COleDataObject` для данных из буфера обмена данные и формат удален в заданной точке.  
  
 Эффекты перетаскивания описаны действия, связанные с операцией перетаскивания. Следующий список эффектов перетаскивания см.:  
  
- `DROPEFFECT_NONE`Удаление не допускается.  
  
- `DROPEFFECT_COPY`Операция копирования будет выполнена.  
  
- `DROPEFFECT_MOVE`Будет выполнена операция перемещения.  
  
- `DROPEFFECT_LINK`Ссылка из перетаскиваемых данных с исходными данными будет установлено.  
  
- `DROPEFFECT_SCROLL`Указывает, что операция перетаскивания прокрутки о или происходит в целевой базе данных.  
  
 Дополнительные сведения о задании команду меню по умолчанию в разделе [SetMenuDefaultItem](http://msdn.microsoft.com/library/windows/desktop/ms647996) в [!INCLUDE[winSDK](../../atl/includes/winsdk_md.md)] и [CMenu::GetSafeHmenu](../../mfc/reference/cmenu-class.md#getsafehmenu) в этом томе.  
  
##  <a name="onendprinting"></a>CView::OnEndPrinting  
 Вызывается платформой после документа печати или предварительном просмотре.  
  
```  
virtual void OnEndPrinting(
    CDC* pDC,  
    CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию этой функции не выполняет никаких действий. Переопределить эту функцию для освобождения любых ресурсов GDI, выделенных в [OnBeginPrinting](#onbeginprinting) функции-члена.  
  
##  <a name="onendprintpreview"></a>CView::OnEndPrintPreview  
 Вызывается платформой, когда пользователь выходит из режима предварительного просмотра.  
  
```  
virtual void OnEndPrintPreview(
    CDC* pDC,  
    CPrintInfo* pInfo,  
    POINT point,  
    CPreviewView* pView);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати.  
  
 `point`  
 Задает точку на странице, предыдущей в режиме предварительного просмотра.  
  
 `pView`  
 Указывает объект представления, используемые для предварительного просмотра.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция вызывает [OnEndPrinting](#onendprinting) функции-члена и восстанавливает фрейма главного окна в состояние, существовавшее до предварительного начала. Переопределите эту функцию, чтобы выполнять специальную обработку при завершении режим предварительного просмотра. Например, если вы хотите сохранить положение пользователя в документе при переходе из режима предварительного просмотра в обычный режим, прокрутить до позиции, описываемых `point` параметр и `m_nCurPage` членом `CPrintInfo` структуру, в которой `pInfo` указывает параметр.  
  
 Всегда вызывайте метод версию базового класса `OnEndPrintPreview` из переопределения, обычно в конце функции.  
  
##  <a name="oninitialupdate"></a>CView::OnInitialUpdate  
 Вызывается платформой после представления впервые присоединяется к документу, но до первоначального отображения представления.  
  
```  
virtual void OnInitialUpdate();
```  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию эта функция вызывает [OnUpdate](#onupdate) функции-члена без указания информации (то есть, используя значения по умолчанию 0 `lHint` параметр и **NULL** для `pHint` параметр). Переопределите эту функцию, чтобы выполнить однократную инициализацию, которая требует сведений о документе. Например если приложение содержит документы фиксированного размера, можно использовать эту функцию для инициализации представления прокрутки ограничения, исходя из размера документа. Если приложение поддерживает документы переменного размера, используйте [OnUpdate](#onupdate) обновление прокрутки ограничивает каждый раз изменения документа.  
  
##  <a name="onpreparedc"></a>CView::OnPrepareDC  
 Вызывается средой перед [OnDraw](#ondraw) для просмотра на экране и перед вызовом функции-члена [OnPrint](#onprint) функция-член вызывается для каждой страницы во время предварительного просмотра печати или печати.  
  
```  
virtual void OnPrepareDC(
    CDC* pDC,  
    CPrintInfo* pInfo = NULL);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст устройства для подготовки к просмотру изображения документа.  
  
 `pInfo`  
 Указывает [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати, если `OnPrepareDC` вызывается для предварительного просмотра печати или печати; `m_nCurPage` член определяет страницу готов к печати. Этот параметр является **NULL** Если `OnPrepareDC` вызывается для просмотра на экране.  
  
### <a name="remarks"></a>Примечания  
 Если функция вызывается для просмотра на экране, реализация по умолчанию эта функция не выполняет никаких действий. Однако эта функция переопределяется в производных классах, таких как [CScrollView](../../mfc/reference/cscrollview-class.md), для настройки атрибутов контекста устройства; следовательно, следует всегда вызывать реализацию базового класса в начале переопределения.  
  
 Если функция вызывается для печати, реализация по умолчанию проверяет страницу сведений, хранящихся в `pInfo` параметр. Если длина документа не указан, `OnPrepareDC` предполагается возможность одной страницей документа и останавливает печати цикла после печати одной страницы. Функции печати цикла останавливается, задав `m_bContinuePrinting` член структуры **FALSE**.  
  
 Переопределение `OnPrepareDC` по любой из следующих причин:  
  
-   Для настройки атрибутов контекста устройства, необходимые для указанной страницы. Например если необходимо задать режим сопоставления и других характеристик контекста устройства, сделать в этой функции.  
  
-   Чтобы выполнить разбиение на страницы во время печати. Обычно указывается длина документа при печати начинается с помощью [OnPreparePrinting](#onprepareprinting) функции-члена. Тем не менее, если вы не знаете заранее документа (например, при печати неопределенное количество записей из базы данных), переопределите `OnPrepareDC` для проверки конца документа во время его вывода на печать. В случае больше документа на печать, установите `m_bContinuePrinting` членом `CPrintInfo` структуру **FALSE**.  
  
-   Чтобы отправить escape-кодами принтер на основе страницу по. Для отправки escape-кодами `OnPrepareDC`, вызовите **Escape** функцию-член `pDC` параметр.  
  
 Вызовите версию базового класса `OnPrepareDC` в начале переопределения.  
  
### <a name="example"></a>Пример  
 [!code-cpp[NVC_MFCDocView&#183;](../../mfc/codesnippet/cpp/cview-class_1.cpp)]  
  
##  <a name="onprepareprinting"></a>CView::OnPreparePrinting  
 Вызывается платформой до печати или просмотра документа.  
  
```  
virtual BOOL OnPreparePrinting(CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pInfo`  
 Указывает [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, описывающую текущее задание печати.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение для начала печати. 0, если задание было отменено.  
  
### <a name="remarks"></a>Примечания  
 Реализация по умолчанию не выполняет никаких действий.  
  
 Необходимо переопределить эту функцию, чтобы включить печать и предварительный просмотр. Вызов [DoPreparePrinting](#doprepareprinting) функция-член, передавая ему `pInfo` параметра и возвращать его возвращаемое значение; `DoPreparePrinting` отображает диалоговое окно печати и создает контекст устройства принтера. Если требуется инициализировать диалоговое окно печати с помощью значения, отличного от значения по умолчанию, присвоения значений членам `pInfo`. Например, если вы знаете длина документа, значение передается методу [SetMaxPage](../../mfc/reference/cprintinfo-structure.md#setmaxpage) функцию-член `pInfo` перед вызовом метода `DoPreparePrinting`. Это значение отображается в поле Кому: поле в диапазоне части диалогового окна «Печать».  
  
 `DoPreparePrinting`не отображать диалоговое окно печати для просмотра задания. Если вы хотите пропустить диалоговое окно печати задания печати, убедитесь, что **m_bPreview** членом `pInfo` — **FALSE** и установите его в **TRUE** перед его передачей `DoPreparePrinting`; сбросить его, чтобы **FALSE** позже.  
  
 Требуется для выполнения инициализации, которым требуется доступ к `CDC` объект, представляющий контекст устройства принтера (например, необходимо знать размер страницы перед указанием длина документа), переопределите `OnBeginPrinting` функции-члена.  
  
 Если вы хотите задать значение **m_nNumPreviewPages** или **m_strPageDesc** члены `pInfo` параметр, сделать после вызова метода `DoPreparePrinting`. `DoPreparePrinting` Функция наборы элементов **m_nNumPreviewPages** значение, найденное в приложении. INI-файл и задает **m_strPageDesc** значение по умолчанию.  
  
### <a name="example"></a>Пример  
  Переопределение `OnPreparePrinting` и вызвать `DoPreparePrinting` из переопределение, чтобы платформа будет отображаться диалоговое окно печати и создать для вас принтер контроллера домена.  
  
 [!code-cpp[NVC_MFCDocView&#184;](../../mfc/codesnippet/cpp/cview-class_2.cpp)]  
  
 Если вы знаете, сколько страниц, документ содержит, задать максимальное страниц `OnPreparePrinting` перед вызовом метода `DoPreparePrinting`. Платформа будет отображаться номер страницы в поле «к» диалогового окна «Печать».  
  
 [!code-cpp[NVC_MFCDocView&#185;](../../mfc/codesnippet/cpp/cview-class_3.cpp)]  
  
##  <a name="onprint"></a>CView::OnPrint  
 Вызывается платформой для печати или просмотра страницы документа.  
  
```  
virtual void OnPrint(
    CDC* pDC,  
    CPrintInfo* pInfo);
```  
  
### <a name="parameters"></a>Параметры  
 `pDC`  
 Указывает на контекст принтера.  
  
 `pInfo`  
 Указывает `CPrintInfo` структуру, описывающую текущее задание печати.  
  
### <a name="remarks"></a>Примечания  
 Для каждой страницы Печать, платформа вызывает эту функцию сразу после вызова [OnPrepareDC](#onpreparedc) функции-члена. Печать страницы определяется `m_nCurPage` членом [CPrintInfo](../../mfc/reference/cprintinfo-structure.md) структуру, в которой `pInfo` указывает. Реализация по умолчанию вызывает [OnDraw](#ondraw) функция-член и передает его в контекст устройства принтера.  
  
 Переопределите эту функцию для любой из следующих причин:  
  
-   Чтобы разрешить печать многостраничных документов. Отображать только часть документа, который соответствует странице в настоящее время печатается. Если вы используете `OnDraw` выполнять рендеринг, начало координат окна просмотра можно настроить таким образом, выведено соответствующую часть документа.  
  
-   Чтобы сделать печатной отличался от изображения на экране (то есть, если приложение не WYSIWYG). Вместо передачи контекста устройства для принтера `OnDraw`, использовать контекст устройства для отображения изображения с помощью атрибутов не отображается на экране.  
  
     Если требуется ресурсов GDI для печати, не используйте для просмотра на экране, выберите их в контекст устройства перед рисованием и затем снимите флажок. Эти ресурсы GDI необходимо выделить в [OnBeginPrinting](#onbeginprinting) и выпуска в [OnEndPrinting](#onendprinting).  
  
-   Чтобы реализовать верхние и нижние колонтитулы. Вы можете использовать `OnDraw` делать отрисовки путем ограничения области печати.  
  
 Обратите внимание, что **m_rectDraw** членом `pInfo` параметр описывает области печати страницы в логических единицах.  
  
 Не следует вызывать `OnPrepareDC` в переопределении `OnPrint`, платформа вызывает функцию `OnPrepareDC` автоматически перед вызовом метода `OnPrint`.  
  
### <a name="example"></a>Пример  
 Ниже приведен каркас для переопределенный `OnPrint` функции:  
  
 [!code-cpp[NVC_MFCDocView&#186;](../../mfc/codesnippet/cpp/cview-class_4.cpp)]  
  
 Еще один пример см. в разделе [CRichEditView::PrintInsideRect](../../mfc/reference/cricheditview-class.md#printinsiderect).  
  
##  <a name="onscroll"></a>CView::OnScroll  
 Вызывается средой, чтобы определить, является ли прокрутка возможна.  
  
```  
virtual BOOL OnScroll(
    UINT nScrollCode,  
    UINT nPos,  
    BOOL bDoScroll = TRUE);
```  
  
### <a name="parameters"></a>Параметры  
 `nScrollCode`  
 Полоса прокрутки код, который указывает пользователь прокрутка запроса. Этот параметр состоит из двух частей: младший байт, который определяет тип возникновения прокрутки по горизонтали, а старший байт, который определяет тип возникновения прокрутки по вертикали:  
  
- **SB_BOTTOM** выполняет прокрутку вниз.  
  
- **SB_LINEDOWN** прокручивает одну строку вниз.  
  
- **SB_LINEUP** прокручивает одну строку вверх.  
  
- **SB_PAGEDOWN** прокручивании одной страницы.  
  
- **SB_PAGEUP** прокручивает одну страницу вверх.  
  
- **SB_THUMBTRACK** перетаскивания ползунка в указанной позиции. Текущее положение указывается в `nPos`.  
  
- **SB_TOP** прокручивается в начало.  
  
 `nPos`  
 Содержит текущее положение ползунка полосы прокрутки, если код полосы прокрутки **SB_THUMBTRACK**; в противном случае он не используется. В зависимости от диапазона исходного прокрутки `nPos` может быть отрицательным и должен быть приведен к `int` при необходимости.  
  
 `bDoScroll`  
 Определяет ли его реального выполнения указанного действия прокрутки. Если **значение TRUE,** то прокрутка должно быть выполнено, если **FALSE**, прокрутка не должно выполняться.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Если `bDoScroll` — **TRUE** и фактически прокрутке представления, возвращается ненулевое значение; в противном случае — 0. Если `bDoScroll` — **FALSE**, возвращается значение, которое вы возвращала бы при `bDoScroll` были **TRUE**, даже если этого не сделать фактически прокрутки.  
  
### <a name="remarks"></a>Примечания  
 В первом случае эта функция вызывается платформой с `bDoScroll` значение **TRUE** когда представление получает сообщение полосы прокрутки. В этом случае следует фактически прокрутки представления. В другом случае эта функция вызывается с `bDoScroll` значение **FALSE** при элемент OLE изначально перетаскивается в область автоматическая прокрутка конечного места перетаскивания до выполнения прокрутки на самом деле. В этом случае вы должны не прокрутки на самом деле.  
  
##  <a name="onscrollby"></a>CView::OnScrollBy  
 Вызывается инфраструктурой при просмотре пользователем область за пределами имеется представление документа, либо путем перетаскивания объекта OLE с границами текущего представления, управляя вертикальной или горизонтальной полосы прокрутки.  
  
```  
virtual BOOL OnScrollBy(
    CSize sizeScroll,  
    BOOL bDoScroll = TRUE);
```  
  
### <a name="parameters"></a>Параметры  
 `sizeScroll`  
 Число пикселей прокрутки по горизонтали и вертикали.  
  
 `bDoScroll`  
 Определяет, происходит ли прокрутка представления. Если **значение TRUE,** затем прокрутки происходит, если **FALSE**, то прокрутка не происходит.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Ненулевое значение, если представление не удалось выполнить прокрутку; в противном случае — 0.  
  
### <a name="remarks"></a>Примечания  
 В производном классе этот метод проверяет ли представление прокрутки в направлении пользователь запросил и обновляет новую область при необходимости. Эта функция вызывается автоматически [CWnd::OnHScroll](../../mfc/reference/cwnd-class.md#onhscroll) и [CWnd::OnVScroll](../../mfc/reference/cwnd-class.md#onvscroll) для выполнения фактического запроса прокрутки.  
  
 Реализация по умолчанию этого метода не изменяет представление, но если не вызывается, представление не выполнять прокрутку в `CScrollView`-производного класса.  
  
 Если высота или ширина документа превышает 32767 пикселов, прокручивать за 32767 завершится ошибкой, поскольку `OnScrollBy` вызван с недопустимым `sizeScroll` аргумент.  
  
##  <a name="onupdate"></a>CView::OnUpdate  
 Вызывается платформой после изменения просмотр документа; Эта функция вызывается [CDocument::UpdateAllViews](../../mfc/reference/cdocument-class.md#updateallviews) и позволяет представлению обновления экрана для отражения этих изменений.  
  
```  
virtual void OnUpdate(
    CView* pSender,  
    LPARAM lHint,  
    CObject* pHint);
```  
  
### <a name="parameters"></a>Параметры  
 `pSender`  
 Указывает представление, изменение в документ или **NULL** Если все представления должны быть обновлены.  
  
 `lHint`  
 Содержит сведения об изменениях.  
  
 `pHint`  
 Указывает на объект хранения информации об изменениях.  
  
### <a name="remarks"></a>Примечания  
 Он также вызывается реализация по умолчанию [OnInitialUpdate](#oninitialupdate). Реализация по умолчанию делает недействительной всю клиентскую область, пометив его рисования при следующем `WM_PAINT` сообщение. Переопределите эту функцию, если нужно обновить только области, которые сопоставляются с измененной части документа. Для этого необходимо передать сведения об изменениях, с помощью указания параметров.  
  
 Для использования `lHint`, определить специальные Указание значения, обычно битовую маску или перечисляемого типа и документов, передайте одно из следующих значений. Для использования `pHint`, являются производными от класса указание [CObject](../../mfc/reference/cobject-class.md) и документов, передать указатель на объект подсказки; при переопределении метода `OnUpdate`, используйте [CObject::IsKindOf](../../mfc/reference/cobject-class.md#iskindof) функции-члена для определения типа времени выполнения объекта подсказку.  
  
 Как правило, не следует выполнять любой документ напрямую из `OnUpdate`. Вместо этого определения прямоугольника, описывающий координаты устройства область, которая требует обновления; Передайте этот прямоугольник для [CWnd::InvalidateRect](../../mfc/reference/cwnd-class.md#invalidaterect). В результате рисования, чтобы при следующем [WM_PAINT](http://msdn.microsoft.com/library/windows/desktop/dd145213) сообщение.  
  
 Если `lHint` равно 0 и `pHint` — **NULL**, документ отправил уведомление универсального обновления. Если представление получает уведомление об универсальных обновления, или он не может декодировать подсказки, необходимо сделать недействительным всей клиентской области.  
  
## <a name="see-also"></a>См. также  
 [MFC примера MDIDOCVW](../../visual-cpp-samples.md)   
 [CWnd-класс](../../mfc/reference/cwnd-class.md)   
 [Диаграмма иерархии](../../mfc/hierarchy-chart.md)   
 [CWnd-класс](../../mfc/reference/cwnd-class.md)   
 [CFrameWnd-класс](../../mfc/reference/cframewnd-class.md)   
 [Класс CSplitterWnd](../../mfc/reference/csplitterwnd-class.md)   
 [CDC-класс](../../mfc/reference/cdc-class.md)   
 [CDocTemplate-класс](../../mfc/reference/cdoctemplate-class.md)   
 [CDocument-класс](../../mfc/reference/cdocument-class.md)

