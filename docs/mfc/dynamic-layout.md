---
title: Динамический макет | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: 8598cfb2-c8d4-4f5a-bf2b-59dc4653e042
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 7518e2fdd07254b8b1991fae8a41f26058920858
ms.sourcegitcommit: 76b7653ae443a2b8eb1186b789f8503609d6453e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33350853"
---
# <a name="dynamic-layout"></a>Динамический макет
С помощью MFC в Visual Studio 2015 можно создавать диалоговые окна, которые пользователь может изменять размеры и можно контролировать способ макета изменяется так, чтобы изменения в размере. Например, можно присоединить кнопки, которые находятся в нижней части диалогового окна, к нижней границе, чтобы они всегда находились в нижней части окна. Также можно настроить некоторые элементы управления, например списки, поля ввода и текстовые поля, таким образом, чтобы они расширялись, когда пользователь увеличивает размер диалогового окна.  
  
## <a name="specifying-dynamic-layout-settings-for-an-mfc-dialog-box"></a>Задание параметров динамического макета в диалоговом окне MFC  
 Если пользователь изменяет размер диалогового окна, элементы управления в диалоговом окне могут изменить свой размер или перемещаться в направлении осей X и Y. Изменение размера или положения элемента управления, когда пользователь изменяет размер диалогового окна, называется динамическим макетом. Например, ниже показано диалоговое окно до изменения его размера.  
  
 ![Диалоговое окно до изменения его размера. ] (../mfc/media/mfcdynamiclayout4.png "mfcdynamiclayout4")  
  
 После изменения размера область списка увеличивается для отображения большего количества элементов, а кнопки перемещаются вместе с правым нижним углом.  
  
 ![Диалоговое окно после изменения размера. ] (../mfc/media/mfcdynamiclayout5.png "mfcdynamiclayout5")  
  
 Для управления динамическим макетом можно указать подробные сведения для каждого элемента управления в редакторе ресурсов в интегрированной среде разработки, или это можно сделать программным образом путем организации доступа к объекту CMFCDynamicLayout для конкретного элемента управления, после чего задать его свойства.  
  
### <a name="setting-dynamic-layout-properties-in-the-resource-editor"></a>Задание свойств динамического макета в редакторе ресурсов  
 Поведение динамического макета для диалогового окна можно задать без написания кода, а с помощью редактора ресурсов.  
  
##### <a name="to-set-dynamic-layout-properties-in-the-resource-editor"></a>Задание свойств динамического макета в редакторе ресурсов  
  
1.  Откройте проект MFC, затем откройте диалоговое окно, с которым необходимо работать в редакторе диалоговых окон.  
  
     ![Откройте диалоговое окно в редакторе ресурсов. ] (../mfc/media/mfcdynamiclayout3.png "mfcdynamiclayout3")  
  
2.  Выберите элемент управления и в окне свойств задайте для него свойства динамического макета. **Динамический макет** в окне «Свойства» содержит свойства **тип перемещения**, **тип изменения размера**и, в зависимости от значений, выбранных для этих свойств определенные свойства, определяющие, сколько элементов управления перемещаются или изменяют размер. **Тип перемещения** определяет, как элемент управления перемещается при изменении размера диалогового окна; **Тип изменения размера** определяет способ изменения размеров элемента управления при изменении размера диалогового окна. **Тип перемещения** и **тип изменения размера** может быть **горизонтальной**, **вертикальной**, **оба**, или **нет**в зависимости от измерений, которые вы хотите изменить динамически. «Горизонтально» относится к оси X, а «Вертикально» — к оси Y.  
  
3.  Если требуется, чтобы элемент управления, например кнопку, чтобы быть на фиксированный размер и останутся в силе в нижнем правом углу, как часто **ОК** или **отменить** набор кнопок, **тип изменения размера** для  **Нет**и задайте **тип перемещения** для **оба**. Для **перемещение по X** и **перемещение по Y** значения в разделе **тип перемещения**, значение 100%, чтобы для оставаться на фиксированном расстоянии в нижнем правом углу элемента управления.  
  
     ![Динамический макет](../mfc/media/mfcdynamiclayout1.png "mfcdynamiclayout1")  
  
4.  Предположим, что у вас также есть элемент управления, который должен увеличиваться при расширении диалогового окна. Как правило, пользователь может развернуть диалоговое окно для увеличения размера многострочного поля ввода, чтобы увеличить размер текстового поля, или же развернуть элемент управления списком, чтобы увидеть больше данных. В этом случае задайте **тип изменения размера** к обеим версиям и задайте **тип перемещения** значение none. Затем задайте **изменение размера по X** и **изменение размера по Y** значения до 100.  
  
     ![Параметры динамического макета](../mfc/media/mfcdynamiclayout2.png "mfcdynamiclayout2")  
  
5.  Попробуйте ввести другие значения, которые могут быть применимы для элементов управления. Диалоговое окно с текстовым полем одна строка может иметь **тип изменения размера** значение **горизонтальной** исключительно для примера.  
  
### <a name="setting-dynamic-layout-properties-programmatically"></a>Задание свойств динамического макета программным образом  
 Описанную выше процедуру можно использовать для задания свойств динамического макета диалогового окна на этапе разработки. Но, если вы хотите управлять динамическим макетом во время выполнения, свойства динамического макета можно задавать программным образом.  
  
##### <a name="to-set-dynamic-layout-properties-programmatically"></a>Задание свойств динамического макета программным образом  
  
1.  Найдите или создайте место в коде реализации класса своего диалогового окна, где необходимо задать динамический макет для диалогового окна. Например, можно добавить метод, например `AdjustLayout` в диалоговом окне, и вызывать его из тех мест, где будет необходимо изменять макет. Можно выполнить вызов из конструктора сначала или же после внесения изменений в диалоговое окно.  
  
2.  Для диалогового окна, вызовите [GetDynamicLayout](../mfc/reference/cwnd-class.md#getdynamiclayout), метод класса CWnd. GetDynamicLayout возвращает указатель на объект CMFCDynamicLayout.  
  
 ```  
    CMFCDynamicLayout* dynamicLayout = pDialog->GetDynamicLayout();

 ```  
  
3.  Для первого элемента управления, к которому требуется добавить динамическое поведение, использовать статические методы в классе динамического макета для создания [MoveSettings](../mfc/reference/cmfcdynamiclayout-class.md#movesettings_structure) структуру, которая кодирует способ корректировки элемента управления. Это делается выбрав соответствующий статический метод: [CMFCDynamicLayout::MoveHorizontal](../mfc/reference/cmfcdynamiclayout-class.md#movehorizontal), [CMFCDynamicLayout::MoveVertical](../mfc/reference/cmfcdynamiclayout-class.md#movevertical), [CMFCDynamicLayout::MoveNone](../mfc/reference/cmfcdynamiclayout-class.md#movenone), или [CMFCDynamicLayout::MoveHorizontalAndVertical](../mfc/reference/cmfcdynamiclayout-class.md#movehorizontalandvertical). Вы передаете процентное соотношение для перемещения по горизонтали или по вертикали. Эти статические методы возвращают вновь созданный объект MoveSettings, который можно использовать для задания поведения перемещения элемента управления.  
  
     Помните, что 100 означает перемещение на столько же, на сколько диалоговое окно изменяет свой размер. При этом край элемента управления будет оставаться на фиксированном расстоянии от новой границы.  
  
 ```  
    MoveSettings moveSettings = CMFCDynamicLayout::MoveHorizontal(100);

 ```  
  
4.  Выполните ту же процедуру для поведения размера, который использует [SizeSettings](../mfc/reference/cmfcdynamiclayout-class.md#sizesettings_structure) типа. Например, чтобы указать, что элемент управления не изменяет размер при изменении размера диалогового окна, используйте следующий код:  
  
 ```  
    SizeSettings sizeSettings = CMFCDynamicLayout::SizeNone();

 ```  
  
5.  Добавьте элемент управления в диспетчер динамического макета с помощью [CMFCDynamicLayout::AddItem](../mfc/reference/cmfcdynamiclayout-class.md#additem) метод. Для различных способов указания требуемого элемента управления предусмотрены две перегрузки. Одна использует дескриптор окна элемента управления (HWND), а другая — идентификатор элемента управления.  
  
 ```  
    dynamicLayout->AddItem(hWndControl,
    moveSettings,
    sizeSettings);

 ```  
  
6.  Повторите для каждого элемента управления, который нужно переместить или для которого нужно изменить размер.  
  
7.  При необходимости можно использовать [CMFCDynamicLayout::HasItem](../mfc/reference/cmfcdynamiclayout-class.md#hasitem) метод для определения, если элемент управления в списке элементов управления, для которых макет будет изменен, или [CMFCDynamicLayout::IsEmpty](../mfc/reference/cmfcdynamiclayout-class.md#isempty) метод, чтобы определить, если все элементы управления, которые подлежат изменению.  
  
8.  Чтобы включить макет диалогового окна, вызовите [CWnd::EnableDynamicLayout](../mfc/reference/cwnd-class.md#enabledynamiclayout) метод.  
  
 ```  
    pDialog->EnableDynamicLayout(TRUE);

 ```  
  
9. В следующий раз при изменении размера диалогового окна [CMFCDynamicLayout::Adjust](../mfc/reference/cmfcdynamiclayout-class.md#adjust) вызывается метод, который фактически применяет параметры.  
  
10. Если вы хотите отключить динамический макет, вызовите [CWnd::EnableDynamicLayout](../mfc/reference/cwnd-class.md#enabledynamiclayout) с `FALSE` как для `bEnabled` параметра.  
  
 ```  
    pDialog->EnableDynamicLayout(FALSE);

 ```  
  
##### <a name="to-set-the-dynamic-layout-programmatically-from-a-resource-file"></a>Задание динамического макета программным образом из файла ресурсов  
  
1.  Используйте [CMFCDynamicLayout::MoveHorizontalAndVertical](../mfc/reference/cmfcdynamiclayout-class.md#movehorizontalandvertical) метод, чтобы указать имя ресурса в файле скрипта соответствующих ресурсов (RC-файл), указывающее сведения о динамическом макете, как показано в следующем примере:  
  
 ```  
    dynamicLayout->LoadResource("IDD_DIALOG1");

 ```  
  
     Именованный ресурс должен ссылаться на диалоговое окно, содержащее сведения о макете в форме записи AFX_DIALOG_LAYOUT в файле ресурсов, как показано в следующем примере:  
  
 "" * / / / * / / * / / AFX_DIALOG_LAYOUT * / /  
 
    IDD_MFCAPPLICATION1_DIALOG AFX_DIALOG_LAYOUT  
    НАЧАТЬ 0X0000, 0X6400, 0X0028 –, 0X643C, 0X0028 –  
    END 
 
    IDD_DIALOG1 AFX_DIALOG_LAYOUT  
    НАЧАТЬ 0X0000, 0X6464, 0X0000, 0X6464, 0X0000, 0X0000, 0X6464, 0X0000, 0X0000  
 
    END 
 ```  
  
## See Also  
 [CMFCDynamicLayout Class](../mfc/reference/cmfcdynamiclayout-class.md)   
 [Control Classes](../mfc/control-classes.md)   
 [Dialog Box Classes](../mfc/dialog-box-classes.md)   
 [Dialog Editor](../windows/dialog-editor.md)

