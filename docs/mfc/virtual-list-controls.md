---
title: "Элементы управления виртуального списка | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs: C++
helpviewer_keywords:
- cache, virtual list control item data
- list controls [MFC], virtual
- list controls [MFC], List view
- virtual list controls
ms.assetid: 319f841f-e426-423a-8276-d93f965b0b45
caps.latest.revision: "13"
author: mikeblome
ms.author: mblome
manager: ghogen
ms.openlocfilehash: 2853c40a5eaa3ccb8dbbf5855b92b4cba9b3a140
ms.sourcegitcommit: ebec1d449f2bd98aa851667c2bfeb7e27ce657b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/24/2017
---
# <a name="virtual-list-controls"></a>Элементы управления виртуального списка
Элемент управления виртуального списка — элемент управления представления списка, имеющий **LVS_OWNERDATA** стиля. Этот стиль включает элемент управления для поддержки количество элементов до `DWORD` (число элементов по умолчанию распространяется только на `int`). Тем не менее предоставляемые этот стиль главным преимуществом является возможность имеют только подмножество элементов данных в памяти в любой момент времени. Это позволяет элементу управления представления виртуального списка будет недоступно для использования с большими базами данных сведений, где конкретные методы доступа к данным уже используется.  
  
> [!NOTE]
>  Помимо списка виртуальных функций в `CListCtrl`, MFC также предоставляет те же функциональные возможности в [CListView](../mfc/reference/clistview-class.md) класса.  
  
 Существуют некоторые проблемы совместимости, которые следует иметь в виду при разработке элементов управления виртуального списка. Дополнительные сведения см. в разделе проблемы совместимости раздела представление списка элементов управления в Windows SDK.  
  
## <a name="handling-the-lvngetdispinfo-notification"></a>Обработка уведомления LVN_GETDISPINFO  
 Элементы управления виртуального списка Ведение очень мало сведений об элементе. За исключением Выбор элементов и сведения о фокус владельцу элемента управления управляет все сведения об элементе. Запрошены сведения платформой через **LVN_GETDISPINFO** сообщение уведомления. Чтобы обеспечить требуемую информацию, владелец управления виртуального списка (или самого элемента управления) должен обрабатывать это уведомление. Это можно легко сделать с помощью окна свойств (в разделе [сопоставление сообщений с функциями](../mfc/reference/mapping-messages-to-functions.md)). Итоговый код должен выглядеть как в следующем примере (где `CMyDialog` является владельцем объекта управления виртуального списка и диалогового окна обрабатывает уведомления):  
  
 [!code-cpp[NVC_MFCControlLadenDialog#23](../mfc/codesnippet/cpp/virtual-list-controls_1.cpp)]  
  
 В обработчике **LVN_GETDISPINFO** сообщение уведомления, вам необходимо проверить данные запрашиваются. Допустимые значения:  
  
-   `LVIF_TEXT``pszText` Элемента должно быть заполнено.  
  
-   `LVIF_IMAGE``iImage` Элемента должно быть заполнено.  
  
-   **LVIF_INDENT** *iIndent* элемента должно быть заполнено.  
  
-   `LVIF_PARAM`*LParam* элемента должно быть заполнено. (Нет для вложенных элементов.)  
  
-   `LVIF_STATE`*Состояние* элемента должно быть заполнено.  
  
 Затем необходимо предоставить любое запросил платформу.  
  
 В следующем примере, (взято из теле обработчика уведомлений для объекта списка элемента управления) показано одно из возможных способов путем передачи сведений о буферов текста и изображений элемента:  
  
 [!code-cpp[NVC_MFCControlLadenDialog#24](../mfc/codesnippet/cpp/virtual-list-controls_2.cpp)]  
  
## <a name="caching-and-virtual-list-controls"></a>Списки кэширования и виртуальным  
 Так как этот тип элемента управления "список" предназначен для больших наборов данных, рекомендуется кэшировать запрашиваемый элемент данных для повышения производительности извлечения. Платформа предоставляет механизм кэша подсказки для помощи в оптимизации кэша путем отправки **LVN_ODCACHEHINT** сообщение уведомления.  
  
 В следующем примере обновляется кэш с диапазоном, передаваемый в функцию-обработчик.  
  
 [!code-cpp[NVC_MFCControlLadenDialog#25](../mfc/codesnippet/cpp/virtual-list-controls_3.cpp)]  
  
 Дополнительные сведения о подготовке и сохранения кэша см. раздел управления кэша раздела представление списка элементов управления в Windows SDK.  
  
## <a name="finding-specific-items"></a>Поиск определенных элементов  
 **LVN_ODFINDITEM** отправляется уведомление с помощью элемента управления виртуального списка когда элемент управления списка должен быть найден. Уведомление отправляется при получении элементом управления представление списка быстрый доступ к разделу или при получении **LVM_FINDITEM** сообщения. Поиск сведений о отправляется в виде **LVFINDINFO** структуру, которая является членом объекта **NMLVFINDITEM** структуры. Обработать это сообщение, переопределив `OnChildNotify` функция списка объект элемента управления и в теле обработчика искать **LVN_ODFINDITEM** сообщения. Если найдено, выполните необходимые действия.  
  
 Следует быть готовым для поиска элементов, которые соответствуют сведениям, заданному элементом управления представление списка. Должно возвращаться индекс элемента в случае успешного выполнения или значение -1, если соответствующий элемент не найден.  
  
## <a name="see-also"></a>См. также  
 [Использование CListCtrl](../mfc/using-clistctrl.md)   
 [Элементы управления](../mfc/controls-mfc.md)

