---
title: "Элементы управления виртуального списка | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "кэш, данные элементов управления виртуального списка"
  - "Список - элементы управления, представления списков"
  - "Список - элементы управления, виртуальные"
  - "элементы управления виртуального списка"
ms.assetid: 319f841f-e426-423a-8276-d93f965b0b45
caps.latest.revision: 13
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 9
---
# Элементы управления виртуального списка
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Виртуальный элемент управления "Список" управление список, который имеет стиль **LVS\_OWNERDATA**.  Этот подход позволяет элемент управления должен поддерживать число элементов до `DWORD` \(количество элемента по умолчанию только до `int`\).  Однако наибольшее преимущество, этим стилем возможность иметь только подмножество элементов данных в памяти одновременно.  Это позволяет виртуальное управляет списком, чтобы одолжить для использования с большими базами данных сведения, где определенные методы доступа к данным уже на месте.  
  
> [!NOTE]
>  Кроме того, что виртуальную функцию списка в `CListCtrl`, MFC также предоставляет те же функциональные возможности в классе [CListView](../mfc/reference/clistview-class.md).  
  
 Некоторые проблемы совместимости следует иметь в виду развивая виртуальные элементы управления "Список".  Дополнительные сведения см. в разделе проблем совместимости раздела список элементов управления в [!INCLUDE[winSDK](../atl/includes/winsdk_md.md)].  
  
## Обработка уведомления LVN\_GETDISPINFO  
 Виртуальные элементы управления поддерживают Список очень маленькие данные элемента.  За исключением выделения элемента и данные фокуса, все данные элемента управляемых владельцем элемента управления.  Данные запрашиваются платформой через сообщение уведомления **LVN\_GETDISPINFO**.  Чтобы обеспечить требуемую информацию, владелец виртуального элемента управления "Список" \(или элемент управления сам\) необходимо обрабатывать это уведомление.  Это легко сделать с помощью окна свойств \(см. [Сообщения сопоставления в функции](../Topic/Mapping%20Messages%20to%20Functions.md)\).  Результирующий код должен выглядеть примерно так, как в следующем примере \(где `CMyDialog` имеет виртуальный объект элемента управления "Список" и диалоговое окно обрабатывает уведомление\).  
  
 [!code-cpp[NVC_MFCControlLadenDialog#23](../mfc/codesnippet/CPP/virtual-list-controls_1.cpp)]  
  
 В обработчике сообщения уведомления **LVN\_GETDISPINFO**, необходимо проверить, чтобы узнать, какой тип данных был запрошен.  Возможны следующие значения.  
  
-   `LVIF_TEXT` член `pszText` необходимо заполнить.  
  
-   `LVIF_IMAGE` член `iImage` необходимо заполнить.  
  
-   **LVIF\_INDENT** *iIndent*  член необходимо заполнить.  
  
-   `LVIF_PARAM` член *lParam*  необходимо заполнить. \(Отсутствующего для дополнительных элементов\).  
  
-   `LVIF_STATE` *член приоритетов*  необходимо заполнить.  
  
 Затем необходимо указать все, что угодновсе, что любые данные запрашиваются обратно в платформе.  
  
 В следующем примере \(принятия из тела обработчика уведомлений для объекта элемента управления "Список"\) показан один из возможных метод, указав сведения для текстовых буферов и образа элемента:  
  
 [!code-cpp[NVC_MFCControlLadenDialog#24](../mfc/codesnippet/CPP/virtual-list-controls_2.cpp)]  
  
## Кэширование и виртуальные элементы управления "Список"  
 Поскольку этот тип элемента управления "Список" предназначен для больших наборов данных, рекомендуется кэшировать запрашиваемую информацию о элемента, чтобы улучшить производительность считывания.  Платформа предоставляет механизм кэш\- намекая помочь оптимизировать в кэш, отправляя сообщение уведомления **LVN\_ODCACHEHINT**.  
  
 Следующий пример обновляет кэш с диапазон, переданный функции обработчика.  
  
 [!code-cpp[NVC_MFCControlLadenDialog#25](../mfc/codesnippet/CPP/virtual-list-controls_3.cpp)]  
  
 Дополнительные сведения о подготовки и поддержании кэш см. раздел " управление кэша раздела список элементов управления в [!INCLUDE[winSDK](../atl/includes/winsdk_md.md)].  
  
## Найти определенные элементы  
 Сообщение уведомления **LVN\_ODFINDITEM** передается виртуальным элементом управления Список по определенному элементу элемента управления "Список" должен быть уже.  Отправляется уведомление, когда элемент управления получает список быстрый доступ ключевой или при получении сообщения **LVM\_FINDITEM**.  Поиск данные отправляются в форме структуры **LVFINDINFO**, которая является членом структуры **NMLVFINDITEM**.  Данное сообщение путем переопределения функция `OnChildNotify` ваших объектов и внутри элемента управления "Список" тело обработчика, проверка сообщения **LVN\_ODFINDITEM**.  Если найдено выполните соответствующие действия.  
  
 Необходимо быть подготовлены для поиска элемента, который соответствует сведениям, определяемого управляет списком.  Необходимо вернуть индекс элемента в случае успеха или \-1, если элемент не найден.  
  
## См. также  
 [Использование CListCtrl](../Topic/Using%20CListCtrl.md)   
 [Элементы управления](../mfc/controls-mfc.md)