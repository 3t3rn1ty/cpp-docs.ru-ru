---
title: "Наследование класса от CObject | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "CObject"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "CObject - класс, производное из"
  - "CObject - класс, наследование сериализуемых классов"
  - "DECLARE_DYNAMIC - макрос"
  - "DECLARE_DYNCREATE - макрос"
  - "DECLARE_SERIAL - макрос"
  - "производные классы, из CObject"
  - "макросы [C++], сериализация"
  - "сериализация [C++], макросы"
ms.assetid: 5ea4ea41-08b5-4bd8-b247-c5de8c152a27
caps.latest.revision: 11
caps.handback.revision: 7
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Наследование класса от CObject
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

В этом разделе описываются минимальных шаги, которые, производном от класса [CObject](../Topic/CObject%20Class.md).  Другие статьи класса `CObject` описываются шаги, необходимые для использования определенных функций `CObject`, например сериализация и диагностическая поддержка отладки.  
  
 Для обсуждения потребностей `CObject`, термин «файл интерфейса» и «файл реализации» используются.  Часто вызываемый файл интерфейса \(или файлом заголовка. Файл H\) содержит объявление класса и другие сведения, необходимые для использования класса.  Файл реализации \(или cpp\-файл\) содержит определение класса, а также код, который реализует функции членов класса.  Например, для класс с именем `CPerson`, вы можете создать файл интерфейса PERSON.H и файл реализации с PERSON.CPP.  Однако для нескольких небольших классов, не будут совместно используются всеми приложений, иногда удобнее объединить интерфейс и реализацию в один cpp\-файл.  
  
 Можно выбрать один из 4 уровней функции производный класс из `CObject`:  
  
-   Основная функция: Не поддерживается для данных или сериализации класса среды выполнения, но не включает диагностические управления памятью.  
  
-   Основная функция и поддержка данных класса среды выполнения.  
  
-   Основная функция и поддержка данных класса среды выполнения и динамического создания.  
  
-   Основная функция и поддержка данных класса среды выполнения, динамического создания и сериализации.  
  
 Классы, созданные для повторного использования \(генераторов, далее будет использоваться как базовые классы\) необходимо по крайней мере включения поддержки класса среды выполнения и поддержку сериализации, если какая\-либо будущая необходимость сериализации предвидится.  
  
 Выбрать уровень функции с использованием определенных макросов объявления и реализации в объявлении и реализации классов, производных от `CObject`.  
  
 В следующей таблице показана связь между используемых макросов с сериализацией и сведений о среде выполнения поддержки.  
  
### Макросы, используемые для сериализации и сведений о среде выполнения  
  
|Используется макрос|CObject::IsKindOf|CRuntimeClass::<br /><br /> CreateObject|CArchive::operator\>\><br /><br /> CArchive::operator\<\<|  
|-------------------------|-----------------------|--------------------------------------|-------------------------------------------------------|  
|Основная функция `CObject`|Нет|Нет|Нет|  
|`DECLARE_DYNAMIC`|Да|Нет|Нет|  
|`DECLARE_DYNCREATE`|Да|Да|Нет|  
|`DECLARE_SERIAL`|Да|Да|Да|  
  
#### Использовать базовую функциональность CObject  
  
1.  Используйте обычный синтаксис C\+\+ создать производный класс от `CObject` \(или из производного класса из `CObject`\).  
  
     В следующем примере показана самая простая вариантом, наследование класса из `CObject`:  
  
     [!code-cpp[NVC_MFCCObjectSample#1](../mfc/codesnippet/CPP/deriving-a-class-from-cobject_1.h)]  
  
 Как правило, однако может потребоваться переопределить некоторые функции\-члены `CObject` для обработки для нового класса.  Например, может потребоваться переопределить обычно функция `Dump``CObject` для предоставления выходные данные отладки для содержимого класса.  Дополнительные сведения о том, как переопределить `Dump` см. в статье [Диагностика: Сохранение содержимого объекта](http://msdn.microsoft.com/ru-ru/727855b1-5a83-44bd-9fe3-f1d535584b59).  Кроме того, можно переопределить функцию `AssertValid``CObject` для предоставления настраиванное тестирование, чтобы проверить согласованность элементов данных объектов класса.  Описание, как переопределить `AssertValid` см. в разделе [ASSERT\_VALID MFC и CObject::AssertValid](http://msdn.microsoft.com/ru-ru/7654fb75-9e9a-499a-8165-0a96faf2d5e6).  
  
 Раздел [Определение слои функциональности](../mfc/specifying-levels-of-functionality.md) описывает, как указать другие слои функциональности, включая данные класса среды выполнения, динамическое создание объектов и сериализации.  
  
## См. также  
 [Использование CObject](../mfc/using-cobject.md)