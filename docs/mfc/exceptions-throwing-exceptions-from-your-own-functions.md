---
title: "Исключения: Создание исключений из собственных функций | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
helpviewer_keywords:
- throwing exceptions [MFC], from functions
- functions [MFC], throwing exceptions
- exceptions [MFC], throwing
ms.assetid: 492976e8-8804-4234-8e8f-30dffd0501be
caps.latest.revision: 
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 15aeb1af7f41cf2df8be3f69657ec6870c55ab34
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="exceptions-throwing-exceptions-from-your-own-functions"></a>Исключения. Создание исключений из собственных функций
Можно использовать исключительно для перехвата исключений, вызванных функций в MFC или других библиотеках парадигма обработки исключений MFC. Помимо перехват исключения, создаваемые библиотеки кода, может вызывать исключения из собственного кода при написании функции, которые могут возникнуть исключительных условиях.  
  
 При возникновении исключения выполнение текущей функции останавливается и переходит непосредственно к **перехватывать** блок кадра внутреннего исключения. Механизм обработки исключений обходит нормального завершения путь из функции. Таким образом Будьте внимательны, чтобы удалить эти блоки памяти, которые будут удалены в нормального завершения.  
  
#### <a name="to-throw-an-exception"></a>Для создания исключения  
  
1.  Используйте один из вспомогательных функций MFC, такие как `AfxThrowMemoryException`. Эти функции создают объект предварительно выделенной исключение соответствующего типа.  
  
     В следующем примере функция пытается выделить двух блоков памяти и вызывает исключение, если происходит сбой выделения либо:  
  
     [!code-cpp[NVC_MFCExceptions#17](../mfc/codesnippet/cpp/exceptions-throwing-exceptions-from-your-own-functions_1.cpp)]  
  
     В случае первого сбоя, можно просто создайте исключение памяти. Если указанное выделение будет успешной, а вторая завершился неудачно, необходимо освободить первого блока распределения до создания исключения. В случае успешного выполнения обоих выделений можно продолжают выполнение и освободить блокировки при выходе из функции.  
  
     - или  
  
2.  Чтобы указать условие проблемы используйте пользовательского исключения. Можно создать исключение элемент любого типа, даже всего класса исключений.  
  
     В следующем примере предпринимается попытка звуковой сигнал через звуковое устройство и вызывает исключение, если происходит сбой.  
  
     [!code-cpp[NVC_MFCExceptions#18](../mfc/codesnippet/cpp/exceptions-throwing-exceptions-from-your-own-functions_2.cpp)]  
  
> [!NOTE]
>  MFC обработку исключений по умолчанию применяется только к указатели на `CException` объектов (и объектов `CException`-производные классы). В приведенном выше примере обходит механизм исключений MFC.  
  
## <a name="see-also"></a>См. также  
 [Обработка исключений](../mfc/exception-handling-in-mfc.md)

