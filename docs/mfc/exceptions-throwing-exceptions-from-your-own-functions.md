---
title: "Исключения. Создание исключений из собственных функций | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "исключения, создание"
  - "функции [C++], создание исключений"
  - "создание исключений, from - функции"
ms.assetid: 492976e8-8804-4234-8e8f-30dffd0501be
caps.latest.revision: 10
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 6
---
# Исключения. Создание исключений из собственных функций
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Можно использовать парадигму обработки исключений MFC исключительно для перехвата исключения, созданные функциями в MFC или других библиотек.  Помимо перехватам исключений выданным этим кодом библиотеки можно создавать исключения или из собственного кода при записи функции, которые могут возникнуть исключительных условий.  
  
 При возникновении исключения, среда выполнения текущей функции остановлено и скачет непосредственно в блоке **catch** самого внутреннего кадра исключения.  Механизм исключения обходит нормальный путь выхода из функции.  Поэтому необходимо убедиться удалять эти блоки памяти, будут удалены в обычном выходе.  
  
#### Исключения  
  
1.  Используйте одну из вспомогательных функций MFC, например `AfxThrowMemoryException`.  Эти функции создают preallocated объект исключения соответствующего типа.  
  
     В следующем примере функция пытается выделить 2 блоков памяти и создает исключение при сбое любое выделение:,  
  
     [!code-cpp[NVC_MFCExceptions#17](../mfc/codesnippet/CPP/exceptions-throwing-exceptions-from-your-own-functions_1.cpp)]  
  
     Если первое выделение завершается ошибкой, можно просто ход исключение памяти.  Если первое выделение успешно, а второй неудачным необходимо освобождать первый блок выделения до возникновения исключения.  Если оба выделения выполняются успешно, можно продолжить обычно и оставить блоки две функции.  
  
     либо  
  
2.  Используйте определенное пользователем исключение, указывающее условие проблемы.  Можно запускать элемент любого типа, даже всего класса, в качестве исключение.  
  
     В следующем примере предпринимается попытка воспроизведения звука с помощью звуковое устройство и методе исключение в случае сбоя.  
  
     [!code-cpp[NVC_MFCExceptions#18](../mfc/codesnippet/CPP/exceptions-throwing-exceptions-from-your-own-functions_2.cpp)]  
  
> [!NOTE]
>  Обработка исключений MFC по умолчанию применяется только к указателю на объекты `CException` \(и объектов `CException`\- производных классов\).  В примере выше обходит механизм исключения MFC.  
  
## См. также  
 [Обработка исключений](../mfc/exception-handling-in-mfc.md)