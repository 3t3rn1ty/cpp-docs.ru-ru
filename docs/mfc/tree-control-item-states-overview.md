---
title: "Общие сведения о состояниях элемента древовидного элемента управления | Microsoft Docs"
ms.custom: ""
ms.date: "12/14/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "CTreeCtrl - класс, состояния элементов"
  - "состояния, CTreeCtrl - элементы"
  - "элементы управления "дерево", обзор состояний элементов"
ms.assetid: 2db11ae0-0d87-499d-8c1f-5e0dbe9e94c8
caps.latest.revision: 14
caps.handback.revision: 10
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Общие сведения о состояниях элемента древовидного элемента управления
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Каждый элемент в элементе управления дерева \([CTreeCtrl](../mfc/reference/ctreectrl-class.md)\) имеет текущее состояние.  Например, элемент может быть выбран, запрещено, развернутый и т д  В большинстве случаев элемент управления "Дерево" автоматически устанавливает состояние элемента, чтобы отразить действий пользователя, например выделение элемента.  Однако можно задать состояние элемента с помощью функции\-члена [SetItemState](../Topic/CTreeCtrl::SetItemState.md) и извлечь текущее состояние элемента с помощью функции\-члена [GetItemState](../Topic/CTreeCtrl::GetItemState.md).  Полный список состояний элемента см. в разделе [Константы элемента управления иерархического представления](http://msdn.microsoft.com/library/windows/desktop/bb759985) в [!INCLUDE[winSDK](../atl/includes/winsdk_md.md)].  
  
 Текущее состояние элемента определяется параметром `nState`.  Элемент управления "Дерево" может изменить состояние элемента управления, чтобы отразить действий пользователя, например выбора элемента или установить фокус на элемент.  Кроме того, приложение может изменить состояние элемента управления, чтобы отключить или скрыть элемент или определить образ перекрытия или изображение состояния.  
  
 При определении или изменить состояние элемента, параметр `nStateMask` указывает, что биты состояния к набору, а параметр `nState` содержат новые значения для этих битов.  Например, в следующем примере изменяется текущее состояние родительского элемента ,определенное `hParentItem`\) в объекте `CTreeCtrl` \(`m_treeCtrl`\) в **TVIS\_EXPANDPARTIAL**:  
  
 [!code-cpp[NVC_MFCControlLadenDialog#71](../mfc/codesnippet/CPP/tree-control-item-states-overview_1.cpp)]  
  
 Другой пример изменения состояния будет задать изображение перекрытия элементов.  Для этого `nStateMask` должно включать `TVIS_OVERLAYMASK` значение и `nState` должно включать индекс единицы образа перекрытия сдвиганного налево 8 бит с помощью макроса [INDEXTOOVERLAYMASK](http://msdn.microsoft.com/library/windows/desktop/bb761408).  Индекс может быть 0, чтобы не указывать какой\-либо образ перекрытия.  Изображение перекрытия необходимо добавить в список элемента управления "Дерево" образов перекрытия предыдущим вызовом функции [CImageList::SetOverlayImage](../Topic/CImageList::SetOverlayImage.md).  Функция определяет индекс единицы образа для добавления; это индекс, используемый с макросом **INDEXTOOVERLAYMASK**.  Элемент управления "Дерево" может содержать до 4 накладываться на образа.  
  
 Чтобы задать изображение состояния элемента, `nStateMask` должно включать `TVIS_STATEIMAGEMASK` значение и `nState` должно включать индекс единицы бит 12 состояния сдвиганных образом левого с помощью макроса [INDEXTOSTATEIMAGEMASK](http://msdn.microsoft.com/library/windows/desktop/bb775597).  Индекс может быть 0, чтобы не указывать ни один изображение состояния.  Изображений состояния и перекрытия Дополнительные сведения о см. в разделе [Списки изображений элемента управления "Дерево"](../mfc/tree-control-image-lists.md).  
  
## См. также  
 [Использование CTreeCtrl](../Topic/Using%20CTreeCtrl.md)   
 [Элементы управления](../mfc/controls-mfc.md)