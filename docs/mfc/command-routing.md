---
title: Маршрутизация команд | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- MFC, command routing
- command handling [MFC], routing commands
- handlers [MFC]
- handlers, command [MFC]
- command routing
ms.assetid: 9393a956-bdd4-47c5-9013-dbd680433f93
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 543b9e34c881285c295fb7ab7ee2107e36c99a9c
ms.sourcegitcommit: 799f9b976623a375203ad8b2ad5147bd6a2212f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/19/2018
ms.locfileid: "46418324"
---
# <a name="command-routing"></a>маршрутизация команд

Ваши действия при работе с командами ограничиваются установкой связей между командами и их функциями обработчиков на схеме сообщений — задачей, для выполнения которой используется окно свойств. Вам также необходимо написать большинство обработчиков команд.

Сообщения Windows обычно отправляются в основную область окна, однако командные сообщения затем направляются в другие объекты. Платформа перенаправляет команды через стандартную последовательность целевых объектов команд, один из которых должен иметь обработчик команды. Каждый целевой объект команды проверяет схему сообщений, чтобы определить возможность обработки входящих сообщений.

Разные целевые классы команд проверяют свои схемы сообщений в разное время. Как правило, класс направляет команду в определенные другие объекты, чтобы дать им первый шанс обработки команды. Если ни один из этих объектов не может обработать команду, исходный класс проверяет собственную схему сообщений. Затем, если он не может предоставить обработчик, оно может перенаправить команду в другие объекты. В приведенной ниже таблице [Стандартная маршрутизация команды](#_core_standard_command_route) показано, как каждый из классов формирует эту последовательность. Общая последовательность маршрутизации команды выглядит следующим образом.

1. К текущему активному дочернему целевому объекту команды.

1. К себе.

1. К другим целевым объектам команды.

Как дорогостоящие механизме маршрутизации по сравнению, чтобы действиями обработчика в ответ на команду, затраты на маршрутизацию недостаточно. Следует иметь в виду, что платформа создает команды только в том случае, когда пользователь взаимодействует с объектами пользовательского интерфейса.

### <a name="_core_standard_command_route"></a> Стандартная маршрутизация команды

|Когда объект этого типа получает команду. . .|Он и другие целевые объекты команды сначала пытаются самостоятельно обработать команду в следующем порядке:|
|----------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|Окно области MDI (`CMDIFrameWnd`)|1.  Active `CMDIChildWnd`<br />2.  Это окно области<br />3.  Приложение (`CWinApp` объекта)|
|Окно области документа (`CFrameWnd`, `CMDIChildWnd`)|1.  Активное представление<br />2.  Это окно области<br />3.  Приложение (`CWinApp` объекта)|
|Просмотр|1.  Это представление<br />2.  Документ, прикрепленный к представлению|
|Document|1.  Этот документ<br />2.  Шаблон документа, прикрепленный к документу|
|Диалоговое окно|1.  Это диалоговое окно<br />2.  Окно, которому принадлежит это диалоговое окно<br />3.  Приложение (`CWinApp` объекта)|

Если пронумерованные элементы во втором столбце таблицы указывают на другие объекты, например документ, см. соответствующий элемент в первом столбце. Например, если во втором столбце говорится, что представление перенаправляет команду в документ, см. запись "Документ" в первом столбце, чтобы отследить дальнейшую маршрутизацию.

## <a name="see-also"></a>См. также

[Вызовы обработчика со стороны платформы](../mfc/how-the-framework-calls-a-handler.md)

