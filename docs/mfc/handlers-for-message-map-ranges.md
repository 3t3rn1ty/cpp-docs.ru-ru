---
title: "Обработчики для диапазонов схем сообщений | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "обработка команд, обработчики обновления команд"
  - "идентификаторы команд, сопоставление сообщений"
  - "маршрутизация команд, обработчики обновления команд"
  - "обработчики обновления команд"
  - "уведомляющие сообщения элементов управления"
  - "элементы управления [MFC], уведомления"
  - "функции обработчика"
  - "функции обработчика, объявление"
  - "функции обработчика, диапазоны схемы сообщений"
  - "обработчики"
  - "обработчики, диапазоны схемы сообщений"
  - "сопоставления, диапазоны сообщений"
  - "обработчики сообщений"
  - "обработка сообщений, функции обработчиков сообщений"
  - "схемы сообщений, функции обработчиков сообщений"
  - "схемы сообщений, диапазоны"
  - "диапазоны сообщений"
  - "диапазоны сообщений, сопоставление"
  - "диапазоны схемы сообщений"
ms.assetid: a271478b-5e1c-46f5-9f29-e5be44b27d08
caps.latest.revision: 11
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 7
---
# Обработчики для диапазонов схем сообщений
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

В этой статье описывается, как сопоставить диапазон сообщений в одной функции обработчика сообщений \(вместо сопоставления одного сообщения только к одной функции\).  
  
 Случаи, когда требуется процесс более одного сообщения уведомления или элемента управления точно так же.  В таких случаях, может потребоваться сопоставить все сообщения в одной функции обработчика.  Диапазоны сопоставления сообщений позволяющих для этого диапазона для сопредельного сообщений:  
  
-   Сопоставления можно диапазоны идентификаторов команд:  
  
    -   Функции обработчика команды.  
  
    -   Функции обработчика команды обновления.  
  
-   Элемент управления можно сообщения уведомления сопоставления для диапазона идентификаторов элементов управления в функцию обработчика сообщений.  
  
 Разделы описанные в этой статье:  
  
-   [Создание схемы запись сообщений](#_core_writing_the_message.2d.map_entry)  
  
-   [Объявление функции обработчика](#_core_declaring_the_handler_function)  
  
-   [Пример для диапазона идентификаторов команд](#_core_example_for_a_range_of_command_ids)  
  
-   [Пример для диапазона идентификаторов элементов управления](#_core_example_for_a_range_of_control_ids)  
  
##  <a name="_core_writing_the_message.2d.map_entry"></a> Создание схемы запись сообщений  
 В cpp\-файле, добавьте записи сопоставления сообщений, как показано в следующем примере:  
  
 [!CODE [NVC_MFCMessageHandling#6](../CodeSnippet/VS_Snippets_Cpp/NVC_MFCMessageHandling#6)]  
  
 Запись сопоставления сообщений состоит из следующих элементов:  
  
-   Макрос диапазона сопоставления сообщений:  
  
    -   [ON\_COMMAND\_RANGE](../Topic/ON_COMMAND_RANGE.md)  
  
    -   [ON\_UPDATE\_COMMAND\_UI\_RANGE](../Topic/ON_UPDATE_COMMAND_UI_RANGE.md)  
  
    -   [ON\_CONTROL\_RANGE](../Topic/ON_CONTROL_RANGE.md)  
  
-   Параметры макросу:  
  
     Первые 2 3 макроса принимают два параметра.  
  
    -   Идентификатор команды, начинающимся диапазон  
  
    -   Идентификатор команды, завершает диапазон  
  
    -   Имя функции обработчика сообщений  
  
     Диапазон идентификаторов команд должен быть не прерывается.  
  
     Третий макрос, `ON_CONTROL_RANGE`, принимает дополнительный первый параметр. в элементе управления сообщение уведомления, например **EN\_CHANGE**.  
  
##  <a name="_core_declaring_the_handler_function"></a> Объявление функции обработчика  
 Добавьте в объявление функции обработчика в. Файл H.  В следующем коде показано, как это может выглядеть, как показано ниже:  
  
 [!CODE [NVC_MFCMessageHandling#7](../CodeSnippet/VS_Snippets_Cpp/NVC_MFCMessageHandling#7)]  
  
 Функции обработчика для единственных команд обычно не принимает параметры.  За исключением функций механизма обновления, функции обработчика диапазонов для сопоставления сообщений требуют дополнительного параметра, `nID`, типа **uint**.  Этот параметр первый параметр.  Дополнительный параметр адаптирует дополнительное идентификатор команды, необходимый для определения команду, которую пользователь не выбрал.  
  
 Требования к параметра Дополнительные сведения о функции обработчика для обновления см. в разделе [Пример для диапазона идентификаторов команд](#_core_example_for_a_range_of_command_ids).  
  
##  <a name="_core_example_for_a_range_of_command_ids"></a> Пример для диапазона идентификаторов команд  
 Когда могут использовать диапазоны?  В качестве примера в обработке команды как команда увеличения в примере MFC [HIERSVR](../top/visual-cpp-samples.md).  Эта команда увеличивает представление, время ее от 25% до 300% — его размера.  Класс HIERSVR представления используется диапазон для обработки команд увеличения с записью сопоставления сообщений, сходный с этого:  
  
 [!CODE [NVC_MFCMessageHandling#8](../CodeSnippet/VS_Snippets_Cpp/NVC_MFCMessageHandling#8)]  
  
 При создании схемы запись сообщений, необходимо указать следующее.  
  
-   2 Идентификаторов, начала и завершения команды представляет собой непрерывный диапазон.  
  
     Здесь они `ID_VIEW_ZOOM25` и `ID_VIEW_ZOOM300`.  
  
-   Имя функции обработчиков команд.  
  
     Здесь это `OnZoom`.  
  
 Объявление функции походило бы следующим образом:  
  
 [!CODE [NVC_MFCMessageHandling#9](../CodeSnippet/VS_Snippets_Cpp/NVC_MFCMessageHandling#9)]  
  
 Случай функций механизма обновления аналогичен и, как правило, чтобы быть более широко используется.  Он часто приходится писать обработчики `ON_UPDATE_COMMAND_UI` для нескольких команд и найти запись или копирования, один и тот же код снова и снова.  Решение сопоставления диапазон идентификаторов команд одной функции обработчика обновления с помощью макроса `ON_UPDATE_COMMAND_UI_RANGE`.  Идентификаторы команд формы представляет собой непрерывный диапазон.  Пример см. в разделе обработчик **OnUpdateZoom** и его запись сопоставления сообщений `ON_UPDATE_COMMAND_UI_RANGE` в классе представления образца HIERSVR.  
  
 Функции обработчика обновления для единственных команд обычно принимает один параметр, `pCmdUI`, типа **CCmdUI\***.  В отличие от функции обработчика, функции обработчика обновления диапазонов для сопоставления сообщений не требуют дополнительного параметра, `nID`, типа **uint**.  Идентификатор команды, которая необходима для определения команду, которую пользователь не выбрал, найдено в объекте `CCmdUI`.  
  
##  <a name="_core_example_for_a_range_of_control_ids"></a> Пример для диапазона идентификаторов элементов управления  
 Это руководство интересным регистр сопоставляет сообщения в элементе управления уведомления для диапазона идентификаторов элементов управления к одному обработчику.  Предположим, что пользователь может щелкнуть любую из 10 кнопок.  Сопоставляла все 10 кнопок к один обработчик, записи сопоставления сообщений какTfи будет выглядеть так, как это:  
  
 [!CODE [NVC_MFCMessageHandling#10](../CodeSnippet/VS_Snippets_Cpp/NVC_MFCMessageHandling#10)]  
  
 При записи макроса `ON_CONTROL_RANGE` в схеме сообщений, необходимо указать следующее.  
  
-   Указанное сообщение в элементе управления уведомления.  
  
     Здесь значение **BN\_CLICKED**.  
  
-   Значения идентификатора элемента управления, связанные с сопредельным диапазоном элементов управления.  
  
     Далее эти `IDC_BUTTON1` и `IDC_BUTTON10`.  
  
-   Имя функции обработчика сообщений.  
  
     Здесь это `OnButtonClicked`.  
  
 При написании функцию обработчика событий, определить дополнительный параметр **uint**, как показано в следующем примере:  
  
 [!CODE [NVC_MFCMessageHandling#11](../CodeSnippet/VS_Snippets_Cpp/NVC_MFCMessageHandling#11)]  
  
 Обработчик `OnButtonClicked` для одного сообщения **BN\_CLICKED** не принимает параметров.  Один и тот же обработчик для кнопок диапазона принимает одно **uint**.  Позволяет дополнительный параметр для указания конкретного элемента управления ответственный создания сообщение **BN\_CLICKED**.  
  
 Код, показанный в этом примере является типичным. преобразование значения, передаваемым на `int` внутри диапазона и подтверждение сообщения, в этом случае.  Затем можно выполнить какое\-либо другое действие в зависимости от того, какая кнопка была нажата.  
  
## См. также  
 [Объявление функций обработчиков сообщений](../mfc/declaring-message-handler-functions.md)