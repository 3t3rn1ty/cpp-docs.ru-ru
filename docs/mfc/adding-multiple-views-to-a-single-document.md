---
title: "Добавление нескольких представлений одного документа | Документы Microsoft"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology: cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs: C++
helpviewer_keywords:
- multiple views [MFC], SDI applications
- documents [MFC], multiple views
- single document interface (SDI), adding views
- views [MFC], SDI applications
ms.assetid: 86d0c134-01d5-429c-b672-36cfb956dc01
caps.latest.revision: "13"
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload: cplusplus
ms.openlocfilehash: 865b30ac7b4c8910e92d14274f1224c25e7f74d8
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="adding-multiple-views-to-a-single-document"></a>Добавление нескольких представлений в один документ
В приложении однооконный интерфейс (SDI), созданные с помощью библиотеки Microsoft Foundation Class (MFC) каждого типа документа связан с типом единое представление. В некоторых случаях желательно иметь возможность переключения текущего представления документа с помощью нового представления.  
  
> [!TIP]
>  Дополнительные инструкции по реализации несколько представлений для одного документа см. в разделе [CDocument::AddView](../mfc/reference/cdocument-class.md#addview) и [СБОРА](../visual-cpp-samples.md) пример MFC.  
  
 Эту функцию можно реализовать путем добавления нового `CView`-производного класса, а также дополнительный код для переключения представлений динамически в существующее приложение MFC.  
  
 Существуют следующие шаги.  
  
-   [Изменение существующего класса приложения](#vcconmodifyexistingapplicationa1)  
  
-   [Создавать и изменять новый класс представления](#vcconnewviewclassa2)  
  
-   [Создание и присоединение нового представления](#vcconattachnewviewa3)  
  
-   [Реализация функции переключения](#vcconswitchingfunctiona4)  
  
-   [Добавление поддержки для переключения представления](#vcconswitchingtheviewa5)  
  
 В оставшейся части этого раздела предполагается следующее:  
  
-   Имя `CWinApp`-производный объект `CMyWinApp`, и `CMyWinApp` объявлен и определен в MYWINAPP. H и MYWINAPP. CPP.  
  
-   `CNewView`имя нового `CView`-производного объекта, и `CNewView` объявлен и определен в NEWVIEW. H и NEWVIEW. CPP.  
  
##  <a name="vcconmodifyexistingapplicationa1"></a>Изменение существующего класса приложения  
 Для приложения, для переключения между представлениями необходимо изменить класс приложения, добавив переменные-члены для сохранения представлений и способ их переключения.  
  
 Добавьте следующий код к объявлению `CMyWinApp` в MYWINAPP. H:  
  
 [!code-cpp[NVC_MFCDocViewSDI#1](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_1.h)]  
  
 Новые переменные-члены, `m_pOldView` и `m_pNewView`, наведите указатель на текущее представление и только что созданной. Метод new (`SwitchView`) переключения представлений при запросе пользователем. Тело метода рассматривается далее в этом разделе в [реализации функции переключения](#vcconswitchingfunctiona4).  
  
 Последнее изменение, класс приложений требует включения файл заголовка, определяющий сообщение Windows (**WM_INITIALUPDATE**), используемый в функции переключения.  
  
 Вставьте следующую строку в разделе include MYWINAPP. CPP:  
  
 [!code-cpp[NVC_MFCDocViewSDI#2](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_2.cpp)]  
  
 Сохранить изменения и продолжить к следующему шагу.  
  
##  <a name="vcconnewviewclassa2"></a>Создавать и изменять новый класс представления  
 Создание нового класса представления легко выполняется с помощью **новый класс** команд, доступных из представления классов. Для этого класса единственное требование заключается в том, что он является производным от `CView`. Добавьте этот новый класс в приложение. Дополнительные сведения о добавлении нового класса в проект см. в разделе [Добавление класса](../ide/adding-a-class-visual-cpp.md).  
  
 После добавления класса в проект, необходимо изменить доступность некоторых членов класса представления.  
  
 Измените NEWVIEW. H, изменив спецификатор доступа из `protected` для **открытый** для конструктора и деструктора. Это позволяет класса, чтобы быть динамически создаваться и уничтожаться и изменять внешний вид, прежде чем он станет видимым.  
  
 Сохранить изменения и продолжить к следующему шагу.  
  
##  <a name="vcconattachnewviewa3"></a>Создание и присоединение нового представления  
 Чтобы создать и подключить новое представление, необходимо изменить `InitInstance` функция класса приложения. Изменение добавляет новый код, который создает новый объект представления и инициализирует обе `m_pOldView` и `m_pNewView` с двумя объектами существующие представления.  
  
 Так как в создается новое представление `InitInstance` функции, новые и существующие представления сохраняются в течение времени существования приложения. Однако приложение может легко создать новое представление динамически.  
  
 Вставьте этот код после вызова `ProcessShellCommand`:  
  
 [!code-cpp[NVC_MFCDocViewSDI#3](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_3.cpp)]  
  
 Сохранить изменения и продолжить к следующему шагу.  
  
##  <a name="vcconswitchingfunctiona4"></a>Реализация функции переключения  
 На предыдущем шаге добавить код, который создается и инициализируется новый объект представления. Последний элемент основных заключается в реализации метода переключения `SwitchView`.  
  
 В конце файла реализации класса приложения (MYWINAPP. CPP) добавьте следующее определение метода:  
  
 [!code-cpp[NVC_MFCDocViewSDI#4](../mfc/codesnippet/cpp/adding-multiple-views-to-a-single-document_4.cpp)]  
  
 Сохранить изменения и продолжить к следующему шагу.  
  
##  <a name="vcconswitchingtheviewa5"></a>Добавление поддержки для переключения представления  
 Последний шаг включает добавление кода, который вызывает `SwitchView` метод, когда приложению для переключения между представлениями. Это можно сделать несколькими способами: путем добавления нового пункта меню для пользователя выбрать или переключения представлений внутренне, при выполнении определенных условий.  
  
 Дополнительные сведения о добавлении новых элементов меню и функции обработчика команд см. в разделе [обработчики для команд и уведомлений элементов управления](../mfc/handlers-for-commands-and-control-notifications.md).  
  
## <a name="see-also"></a>См. также  
 [Архитектура документа/обзора](../mfc/document-view-architecture.md)

