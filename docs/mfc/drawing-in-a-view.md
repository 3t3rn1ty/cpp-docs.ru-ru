---
title: "Рисование в представлении | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "контексты устройств, рисунки экрана"
  - "рисование, в представлениях"
  - "рисование сообщений в классе представления"
  - "печать [MFC], представления"
  - "представления печати"
  - "представления, печать"
  - "представления, отрисовка"
  - "представления, обновление"
ms.assetid: e3761db6-0f19-4482-a4cd-ac38ef7c4d3a
caps.latest.revision: 11
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
caps.handback.revision: 7
---
# Рисование в представлении
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Почти все изображение в приложении происходит в функции\-члене `OnDraw` представления, которые необходимо переопределить по в представлении класс. \(Исключение рисование мышь, обсуженное в [Интерпретация введенные пользователем данные через представление](../mfc/interpreting-user-input-through-a-view.md)\). Переопределенный `OnDraw`:  
  
1.  Получает данные путем вызова функции\-члены документа предоставляется.  
  
2.  Отображает данные путем вызова функции\-члены объекта контекста устройства, что платформа передаче `OnDraw`.  
  
 Если данные документа изменяется каким\-либо образом, представление следует перерисовать для отражения изменений.  Обычно это происходит, когда пользователь вносит изменения через представление в документе.  В этом случае представление функции\-члена [UpdateAllViews](../Topic/CDocument::UpdateAllViews.md) документа, чтобы уведомить всех представления в одном документе для обновления.  `UpdateAllViews` функции\-члена [OnUpdate](../Topic/CView::OnUpdate.md) каждого представления.  Реализация по умолчанию `OnUpdate` что всю клиентскую область представления.  Можно переопределить, чтобы сделать только те области клиентской области, которые сопоставляют измененных части документа.  
  
 Функция\-член `UpdateAllViews` класса **CDocument**, а функция\-член `OnUpdate` класса `CView` позволяют передавать сведения, какие части документа было изменено.  Этот механизм «подсказки» позволяет ограничить область, представление должно redraw.  `OnUpdate` принимает 2 аргумента «подсказки».  Во\-первых, `lHint`, тип **LPARAM**, позволяет передавать любые данные, чтобы позже, а второй, `pHint`, типа `CObject`\*, позволяет передавать указатель на любой объект, производный от `CObject`.  
  
 Если представление будет недопустимым Windows, он отправляет сообщение `WM_PAINT`.  Функции обработчика [OnPaint](../Topic/CWnd::OnPaint.md) представления отвечает на сообщение путем создания объекта контекста устройства класса [CPaintDC](../mfc/reference/cpaintdc-class.md) и вызывает функцию\-член `OnDraw` данного представления.  Обычно писать при переопределении функции обработчика `OnPaint`.  
  
 [контекст устройства](../Topic/Device%20Contexts.md) — это структура данных Windows, которая содержит сведения об атрибутах рисования устройствах, таких как отображение или принтер.  Все выполненные рисования с помощью объекта контекста устройства.  Для рисования на экране `OnDraw` передается объект `CPaintDC`.  Для рисования на принтер он передается объектом [CDC](../Topic/CDC%20Class.md) настроено для текущего принтера.  
  
 Код для рисования в представлении сначала получает указатель на объект document, затем осуществляет рисования через контекст устройства.  В следующем примере `OnDraw` показан процесс:  
  
 [!code-cpp[NVC_MFCDocView#1](../mfc/codesnippet/CPP/drawing-in-a-view_1.cpp)]  
  
 В этом примере выполняется были бы функции `GetData` как член производного класса документа.  
  
 Пример выводит любая строка получает из документа, центрированного в представлении.  Если вызов `OnDraw` для рисования экрана, объект `CDC`, в `pDC``CPaintDC` конструктор которого уже, `BeginPaint`.  К функциям рисования выполненные с помощью указателя контекста устройства.  Дополнительные сведения о контекстах устройства и вызовах рисования см. в описании класса [CDC](../Topic/CDC%20Class.md) и [Работа с объектами окна](../Topic/Working%20with%20Window%20Objects.md) в справочнике по *MFC*.  
  
 Дополнительные примеры создания `OnDraw` см. в разделе [Примеры MFC](../top/visual-cpp-samples.md).  
  
## См. также  
 [Использование представлений](../mfc/using-views.md)