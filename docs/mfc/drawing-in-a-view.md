---
title: Рисование в представлении | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- drawing [MFC], in views
- views [MFC], printing
- views [MFC], updating
- printing [MFC], views
- views [MFC], rendering
- printing views [MFC]
- paint messages in view class [MFC]
- device contexts, screen drawings
ms.assetid: e3761db6-0f19-4482-a4cd-ac38ef7c4d3a
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: bc716800c35aa922f7912f586d6e5b8429593615
ms.sourcegitcommit: 76b7653ae443a2b8eb1186b789f8503609d6453e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="drawing-in-a-view"></a>Рисование в представлении
Почти все рисования в приложении происходит в режиме `OnDraw` функция-член, который необходимо переопределить в классе представления. (Исключением является мыши рисования, рассматриваемые в [Интерпретация ввода пользователя через представление](../mfc/interpreting-user-input-through-a-view.md).) Ваш `OnDraw` переопределения:  
  
1.  Получает данные путем вызова функции-члены вами в документе.  
  
2.  Отображает данные путем вызова функции-члены объекта контекста устройства, который передает платформа `OnDraw`.  
  
 При изменении данных документа иным образом, требуется перерисовка представления для отражения изменений. Как правило это происходит, когда пользователь вносит изменения в виде документа. В этом случае представление вызывает документа [UpdateAllViews](../mfc/reference/cdocument-class.md#updateallviews) известить всех представлений в том же документе для обновления сами функции-члена. `UpdateAllViews` вызывает каждый вид [OnUpdate](../mfc/reference/cview-class.md#onupdate) функции-члена. Реализация по умолчанию `OnUpdate` делает недействительной всю клиентскую область представления. Его можно переопределить переводимого только этих областей клиентской области, сопоставленные им измененные части документа.  
  
 `UpdateAllViews` Функции-члена класса **CDocument** и `OnUpdate` функции-члена класса `CView` позволяют передавать сведения, описывающие, какие части документа были изменены. Этот механизм «подсказка» позволяет ограничить область, необходимо перерисовать представления. `OnUpdate` принимает два аргумента «подсказка». Первый, `lHint`, типа **LPARAM**, позволяет передавать данные, вам нравится, а для второго `pHint`, типа `CObject`*, позволяет передать указатель на объект, производный от `CObject`.  
  
 Когда представление становится недействительным, Windows отправляет его `WM_PAINT` сообщения. Представление [OnPaint](../mfc/reference/cwnd-class.md#onpaint) функция-обработчик отвечает на сообщение, создав объект контекста устройства класса [CPaintDC](../mfc/reference/cpaintdc-class.md) и вызывает этого представления `OnDraw` функции-члена. У вас обычно для написания переопределяющего `OnPaint` функция-обработчик.  
  
 Объект [контекст устройства](../mfc/device-contexts.md) — это структура данных Windows, содержащий сведения о замене атрибутов рисования устройства, такие как экран или принтер. Все вызовы рисования выполняются через объект контекста устройства. Для изображения на экране, `OnDraw` передается `CPaintDC` объекта. Для рисования на принтере передается [CDC](../mfc/reference/cdc-class.md) объект для текущего принтера.  
  
 Рисование в представлении кода сначала извлекает указатель на документ, а затем выполняет вызовы рисования через контекст устройства. Следующий простой `OnDraw` пример иллюстрирует этот процесс:  
  
 [!code-cpp[NVC_MFCDocView#1](../mfc/codesnippet/cpp/drawing-in-a-view_1.cpp)]  
  
 В этом примере потребуется определить `GetData` членов, документ производного класса.  
  
 В этом примере выводится любых строк, он получает из документа, по центру представления. Если `OnDraw` будет на рисование экрана `CDC` переданный объект `pDC` — `CPaintDC` , конструктор которого уже вызван `BeginPaint`. Рисование функции вызовы осуществляются через указатель контекст устройства. Сведения о контекстах устройств и вызовы рисования, см. класс [CDC](../mfc/reference/cdc-class.md) в *Справочник по библиотеке MFC* и [работа с объектами окон](../mfc/working-with-window-objects.md).  
  
 Дополнительные примеры создания `OnDraw`, в разделе [примеры MFC](../visual-cpp-samples.md).  
  
## <a name="see-also"></a>См. также  
 [Использование представлений](../mfc/using-views.md)

