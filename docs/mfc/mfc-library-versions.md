---
title: Версии библиотек MFC | Документы Microsoft
ms.custom: ''
ms.date: 1/09/2018
ms.technology:
- cpp-mfc
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- class libraries [MFC], building versions
- version information [MFC], MFC library
- MFC class library
- MFC class library, building
- MFC libraries
- MFC, library versions
- libraries [MFC], versions
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 92568f61bb1ea219ab3ddc96f4c4687dec157c9a
ms.sourcegitcommit: 060f381fe0807107ec26c18b46d3fcb859d8d2e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2018
ms.locfileid: "36931769"
---
# <a name="mfc-library-versions"></a>Версии библиотек MFC

Библиотека MFC доступна в версиях, которые поддерживают однобайтовые ANSI и многобайтовая кодировка (MBCS) код, а также версий, которые поддерживают Юникод (кодировке UTF-16LE, набор символов Windows в собственном коде). Каждой версии MFC доступна в качестве статической библиотеки или общей библиотеки DLL. Имеется также меньшего размера версией статической библиотеки MFC, который оставляет элементов управления MFC для диалоговых окон для приложений, которые очень чувствительны к размер и не нужны эти элементы управления. Библиотеки MFC, доступны в отладочную и окончательную версию для поддерживаемых архитектур, которые включают x86, x64 и процессоров ARM. Можно создать оба приложения (файлы .exe) и библиотеки DLL с помощью любой версии библиотеки MFC. Имеется также ряд библиотеки MFC, скомпилированную для взаимодействия с управляемым кодом. MFC общих библиотек DLL номер версии для указания библиотеки совместимости с двоичными данными.

## <a name="automatic-linking-of-mfc-library-versions"></a>Автоматическая компоновка версии библиотеки MFC

Файлы заголовков MFC автоматически определить правильную версию библиотеки MFC для связи, на основе значений, заданных в среде построения. Файлы заголовков MFC добавьте компилятора директивы для ссылок в определенной версии библиотеки MFC.

Например AFX. Файл заголовка указывает компоновщику на необходимость ссылку в полной статические, ограниченные статического или общего версия библиотеки DLL MFC; ANSI/MBCS или Юникода версии; и отладки или розничной версии, в зависимости от конфигурации сборки:

```cpp
#ifndef _AFXDLL
    #ifdef _AFX_NO_MFC_CONTROLS_IN_DIALOGS
        #ifdef _DEBUG
            #pragma comment(lib, "afxnmcdd.lib")
        #else
            #pragma comment(lib, "afxnmcd.lib")
        #endif
        #pragma comment(linker, "/include:__afxNoMFCControlSupportInDialogs")
        #pragma comment(linker, "/include:__afxNoMFCControlContainerInDialogs")
    #endif
    #ifndef _UNICODE
        #ifdef _DEBUG
            #pragma comment(lib, "nafxcwd.lib")
        #else
            #pragma comment(lib, "nafxcw.lib")
        #endif
    #else
        #ifdef _DEBUG
            #pragma comment(lib, "uafxcwd.lib")
        #else
            #pragma comment(lib, "uafxcw.lib")
        #endif
    #endif
#else
    #ifndef _UNICODE
        #ifdef _DEBUG
            #pragma comment(lib, "mfc" _MFC_FILENAME_VER "d.lib")
            #pragma comment(lib, "mfcs" _MFC_FILENAME_VER "d.lib")
        #else
            #pragma comment(lib, "mfc" _MFC_FILENAME_VER ".lib")
            #pragma comment(lib, "mfcs" _MFC_FILENAME_VER ".lib")
        #endif
    #else
        #ifdef _DEBUG
            #pragma comment(lib, "mfc" _MFC_FILENAME_VER "ud.lib")
            #pragma comment(lib, "mfcs" _MFC_FILENAME_VER "ud.lib")
        #else
            #pragma comment(lib, "mfc" _MFC_FILENAME_VER "u.lib")
            #pragma comment(lib, "mfcs" _MFC_FILENAME_VER "u.lib")
        #endif
    #endif
#endif
```

Файлы заголовков MFC также директивы #include в ссылку в всех необходимых библиотек, в том числе библиотеки MFC, библиотеками Win32, библиотеки OLE, построенная образцы библиотеки OLE, ODBC библиотеки и т. д. 

## <a name="ansi-mbcs-and-unicode"></a>ANSI, многобайтовой Кодировки и Юникода

Версии библиотек MFC ANSI/MBCS поддерживает оба набора однобайтовых символов, например ASCII, и многобайтовые кодировки, такие как Shift-JIS. Версии библиотек MFC Юникода в его в кодировке Юникода UTF-16LE, поддерживают Юникод. Используйте ANSI/MBCS версии библиотеки MFC для поддержки Юникода в кодировке UTF-8.

Чтобы задать конфигурацию проекта для использования однобайтовых, многобайтовых или расширенных символов строковых и символьных поддержка Юникода в Интегрированной среде разработки, используйте **свойства проекта** диалогового окна. В **свойства конфигурации** > **Общие** задайте **кодировки** свойства **не задано** для использования набор однобайтовых символов. Это свойство равно **использовать многобайтовую кодировку** использовать многобайтовая кодировка или **использовать набор символов Юникода** использование Юникода в кодировке UTF-16.

Проекты MFC используют символ препроцессора \_ЮНИКОДА для указания поддержки Юникода UTF-16 расширенных символов, и \_поддержка MBCS, чтобы указать MBCS. Эти параметры являются взаимно исключают друг друга в проекте.

## <a name="mfc-static-library-naming-conventions"></a>Соглашения об именовании MFC в статической библиотеке

Статические библиотеки для MFC, используйте следующие соглашения об именовании. Имена библиотек имеют форму

> *u*AFX*c ** d*. LIB

где курсивом строчные буквы являются заполнителями для спецификаторы, чьи значения показаны в следующей таблице:

|Описатель|Значения и значения|
|---------------|-------------------------|
|*u*|(N) ANSI/MBCS или Юникода (U); исключить версии без элементов управления MFC в диалоговых окнах|
|*c*|Версии с помощью элементов управления MFC в диалоговых окнах (CW) или без (NMCD)|
|*d*|Отладка или выпуск: D = Debug; пропущен спецификатор для выпуска|

Включаются все библиотеки, которые перечислены в следующей таблице готовых \atlmfc\lib каталога, поддерживаемая версия построения архитектур.

|Библиотека|Описание:|
|-------------|-----------------|
|NAFXCW.LIB|Статическая библиотека MFC, версии|
|NAFXCWD.LIB|Статическая библиотека MFC, отладочная версия|
|UAFXCW. LIB|Статическая библиотека MFC с поддержкой Юникода, в окончательной версии|
|UAFXCWD. LIB|Статическая библиотека MFC с поддержкой Юникода, отладочная версия|
|AFXNMCD.LIB|Статическая библиотека MFC без элементов управления диалоговых окон MFC, версии|
|AFXNMCDD. LIB|Статическая библиотека MFC без элементов управления диалоговых окон MFC, отладочная версия|

Отладчик файлы, имеющие такое же базовое имя и расширение PDB также доступны для каждого из статических библиотек.

## <a name="mfc-shared-dll-naming-conventions"></a>Соглашения об именовании DLL общих MFC

MFC общих библиотек DLL также выполните структурированных соглашение об именовании. Это упрощает знать, какие библиотеки DLL или библиотеки следует использовать для какой цели.

Библиотеки DLL MFC имеют *версии* номер, указывающий совместимости с двоичными данными. Использование библиотеки DLL MFC, имеют ту же версию, как к библиотекам и набор инструментов компилятора, чтобы обеспечить совместимость в рамках проекта.

|DLL|Описание:|
|---------|-----------------|
|MFC*версии*. БИБЛИОТЕКИ DLL|Версия библиотеки DLL MFC, ANSI или MBCS выпуска|
|MFC*версии*U.DLL|Библиотека DLL MFC, версия Юникод для выпуска|
|MFC*версии*D.DLL|Версии библиотеки DLL MFC, ANSI или отладка многобайтовой Кодировки|
|MFC*версии*UD. БИБЛИОТЕКИ DLL|Библиотека DLL MFC, отладочная версия Юникод|
|MFCM*версии*. БИБЛИОТЕКИ DLL|Библиотека DLL MFC с элементами управления Windows Forms, ANSI или MBCS окончательной версии|
|MFCM*версии*U.DLL|С помощью элементов управления Windows Forms, Юникода версии DLL [MFC]|
|MFCM*версии*D.DLL|Библиотека DLL MFC с элементами управления Windows Forms, версия ANSI и MBCS отладки|
|MFCM*версии*UD. БИБЛИОТЕКИ DLL|Библиотека DLL MFC с элементами управления Windows Forms, отладочная версия Юникод|

Импорт библиотеки, необходимые для построения приложений или библиотеки, использующие эти общие библиотеки DLL расширения MFC имеют такое же базовое имя, что и библиотека DLL, но имеют расширение имени файла LIB-файл. При использовании общих библиотек DLL, небольшой статическая библиотека, по-прежнему должны быть связаны с коде; Эта библиотека имеет имя MFCS*версии*.lib {U} {D}.

Если динамически связываемых в общедоступную версию библиотеки DLL MFC, будь то из приложения или из библиотеки DLL расширения MFC, необходимо включить соответствующий MFC*версии*. Библиотеки DLL или MFC*версии*U.DLL при развертывании продукта.

Список библиотек DLL Visual C++, которые можно использовать с приложениями см. в разделе [распространяемый код для 2017 г. Microsoft Visual Studio и Microsoft Visual Studio 2017 г. пакета SDK (включает служебные программы и файлы BuildServer)](http://go.microsoft.com/fwlink/p/?LinkId=823098).

Дополнительные сведения о поддержке многобайтовой Кодировки и Юникода в MFC см. в разделе [задать многобайтовых символов (MBCS) поддержка Юникода и](../atl-mfc-shared/unicode-and-multibyte-character-set-mbcs-support.md).

## <a name="dynamic-link-library-support"></a>Поддержка библиотек динамической компоновки

Можно использовать либо статического или общего динамической библиотеки MFC для создания библиотек DLL, которые могут использоваться MFC и не MFC исполняемые файлы. Это называется «обычные библиотеки DLL» или «обычные библиотеки DLL MFC», чтобы отличать их от расширения MFC библиотеки DLL, которые могут быть только используемые приложениями MFC и MFC библиотеки DLL. Библиотеки DLL, построенных с использованием статических библиотек MFC в иногда называют USRDLL старые ссылки, поскольку проектов MFC DLL определен символ препроцессора  **\_USRDLL**. Библиотеки DLL, использующий MFC общие библиотеки DLL в иногда называют AFXDLL старые ссылки, так как она определяет символ препроцессора  **\_AFXDLL**.

При создании проекта DLL, устанавливая связь с статические библиотеки MFC, библиотеки DLL можно развертывать без MFC общих библиотек DLL. Если проекта DLL ссылки на библиотеки импорта MFC*версии*. LIB или MFC*версии*U.LIB, необходимо развернуть сопоставления MFC общей библиотеки DLL MFC*версии*. Библиотеки DLL или MFC*версии*U.DLL вместе с DLL-Библиотеку. Дополнительные сведения см. в разделе [DLL](../build/dlls-in-visual-cpp.md).

## <a name="see-also"></a>См. также

[Общие разделы по MFC](../mfc/general-mfc-topics.md)  
