---
title: Управление данными состояния модулей MFC | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- global state [MFC]
- data management [MFC], MFC modules
- window procedure entry points [MFC]
- exported interfaces and global state [MFC]
- module states [MFC], saving and restoring
- data management [MFC]
- MFC, managing state data
- multiple modules [MFC]
- module state restored [MFC]
ms.assetid: 81889c11-0101-4a66-ab3c-f81cf199e1bb
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 9d87b2a601e6e25d61de6ca6ad639ac6a62861ac
ms.sourcegitcommit: 76b7653ae443a2b8eb1186b789f8503609d6453e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="managing-the-state-data-of-mfc-modules"></a>Управление данными состояния модулей MFC
В этой статье рассматриваются данные состояния модулей MFC и обновление это состояние при хода выполнения (в коде объекта path принимает с помощью приложения при выполнении) и покидает модуля. Переключение состояния модулей с `AFX_MANAGE_STATE` и `METHOD_PROLOGUE` также рассматривается макросы.  
  
> [!NOTE]
>  Термин «модуль» здесь — исполняемую программу или DLL (или набор библиотек DLL), независимо от остальной части приложения, но использует общий копию библиотеки DLL MFC. Элемент управления ActiveX — типичный пример использования модуля.  
  
 Как показано на следующем рисунке, MFC предоставляет данные о состоянии для каждого модуля, используемые в приложениях. Эти данные примеры дескрипторы экземпляров Windows (используется для загрузки ресурсов), указатели на текущий `CWinApp` и `CWinThread` объектов приложения, счетчики ссылок модуля OLE и набор схем, которые поддерживают соединение между Windows объектов дескрипторов и соответствующие экземпляры объектов MFC. Однако, если приложение использует несколько модулей, данные о состоянии каждого модуля не приложение шириной. Вместо этого каждый модуль имеет собственную частную копию данных состояния в MFC.  
  
 ![Состояние данных одного модуля &#40;приложения&#41;](../mfc/media/vc387n1.gif "vc387n1")  
Данные состояния для одного модуля (приложение)  
  
 Данные о состоянии модуля содержится в структуре и всегда доступен через указатель на этой структуре. Когда поток выполнения входит определенного модуля, как показано на следующем рисунке, состояние этого модуля должно быть состояние «текущая» или «действующие». Таким образом каждый поток объект имеет указатель на структуру эффективное состояние этого приложения. Поддержание этот указатель обновлен во всех раз крайне важно для управления глобальное состояние приложения и обеспечение целостности состояния каждого модуля. Неверный управления глобальное состояние может вызвать непредсказуемое поведение приложения.  
  
 ![Состояние данных из нескольких модулей](../mfc/media/vc387n2.gif "vc387n2")  
Данные о состоянии из нескольких модулей  
  
 Другими словами каждый модуль отвечает за правильно переключение между состояниями модуля для всех его точки входа. «Точка входа» будет везде, где поток выполнения можно ввести код модуля. Следующие точки входа.  
  
-   [Экспортированные функции в библиотеке DLL](../mfc/exported-dll-function-entry-points.md)  
  
-   [Функции-члены интерфейсов COM](../mfc/com-interface-entry-points.md)  
  
-   [Процедуры окна](../mfc/window-procedure-entry-points.md)  
  
## <a name="see-also"></a>См. также  
 [Общие разделы по MFC](../mfc/general-mfc-topics.md)

