---
title: "Управление данными состояния модулей MFC | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "управление данными [C++]"
  - "управление данными [C++], MFC-модули"
  - "экспортированные интерфейсы и глобальное состояние [C++]"
  - "глобальное состояние [C++]"
  - "MFC [C++], управление данными состояния"
  - "состояние модуля восстановлено"
  - "состояния модулей, сохранение и возобновление"
  - "множественные модули"
  - "точки входа процедуры окна [C++]"
ms.assetid: 81889c11-0101-4a66-ab3c-f81cf199e1bb
caps.latest.revision: 9
caps.handback.revision: 5
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# Управление данными состояния модулей MFC
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Этот раздел описывает данными состояния модулей MFC и как это обновленное состояние, когда поток выполнения \(код принимает пути с помощью приложения при выполнении\) вводит и оставляет модуль.  Переключение состояния модуля с макросами `AFX_MANAGE_STATE` и `METHOD_PROLOGUE` также рассматривается.  
  
> [!NOTE]
>  Термин «модуль» здесь ссылается на выполняемая программе, или к библиотеке DLL \(или набор библиотек DLL\), которая работает независимо от остальной части приложения, но используется общее копию библиотеки DLL MFC.  Элемент управления ActiveX типичный пример модуля.  
  
 Как показано на следующем рисунке, MFC имеет данные состояния для каждого модуля, используемых в приложении.  Примеры этих данных включают дескрипторы экземпляров Windows, используемые для загрузки ресурсов\), указателей в текущих `CWinApp` и объектам `CWinThread` приложения, OLE счетчиков ссылок модуля и различные сопоставления, которые поддерживаются дескрипторы объекта Windows связей между и соответствующие экземпляры объектов MFC.  Однако если приложение использует несколько модулей, данные состояния каждого модуля нет широко приложения.  Вместо этого каждый модуль имеет свой закрытая копия данных состояния MFC.  
  
 ![Данные о состоянии для отдельного модуля &#40;приложение&#41;](../mfc/media/vc387n1.png "vc387N1")  
Данные состояния приложения одного модуля \(\)  
  
 Данные состояния модуля содержится в структуре и всегда доступен через указатель на этой структуре.  Если поток выполнения входит в указанный модуль, как показано на следующем рисунке, состояние которого модуля должно быть «текущие» или «эффективным» состоянием.  Поэтому каждый объект потока имеет указатель на эффективной структуры состояния этого приложения.  Сохранить этот указатель обновлен во все время крайне важен для управления глобального состояния приложения и поддержанию целостности состояния каждого модуля.  Неправильное управление глобального состояния может привести к непрогнозируемому расширение функциональности приложения.  
  
 ![Данные состояния для нескольких модулей](../mfc/media/vc387n2.png "vc387N2")  
Данные состояния нескольких модулей  
  
 Другими словами, каждый модуль отвечает за правильно переключение между состояниями модуля во всей его точки входа.  «Точка входа» любое место, где поток выполнения может ввести код модуля.  Точки входа:  
  
-   [Экспортированные функции из библиотеки DLL](../mfc/exported-dll-function-entry-points.md)  
  
-   [Функции\-члены интерфейсов модели COM](../mfc/com-interface-entry-points.md)  
  
-   [Оконные процедуры](../Topic/Window%20Procedure%20Entry%20Points.md)  
  
## См. также  
 [Общие разделы по MFC](../mfc/general-mfc-topics.md)