---
title: "Класс basic_streambuf | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "basic_streambuf"
  - "streambuf/std::basic_streambuf"
  - "std.basic_streambuf"
  - "std::basic_streambuf"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "basic_streambuf - класс"
ms.assetid: 136af6c3-13bf-4501-9288-b93da26efac7
caps.latest.revision: 27
caps.handback.revision: 15
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# Класс basic_streambuf
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

Описывает абстрактный базовый класс для получения буфера потока, который управляет передачей элементов в определенное представление потока и из него.  
  
## Синтаксис  
  
```  
template<class Elem, class Tr = char_traits<Elem> >  
   class basic_streambuf;  
```  
  
#### Параметры  
 `Elem`  
 Объект [char\_type](../Topic/basic_streambuf::char_type.md).  
  
 `Tr`  
 Символ [traits\_type](../Topic/basic_streambuf::traits_type.md).  
  
## Заметки  
 Этот класс шаблона описывает абстрактный базовый класс для получения буфера потока, который управляет передачей элементов в определенное представление потока и из него.  Объект класса `basic_streambuf` помогает управлять потоком с элементами типа `Tr`, также называемого [char\_type](../Topic/basic_streambuf::char_type.md), у которого признаки символа определяются классом [char\_traits](../standard-library/char-traits-struct.md), также известным как [traits\_type](../Topic/basic_streambuf::traits_type.md).  
  
 В теории каждый буфер потока управляет двумя независимыми потоками: один для извлечения \(ввод\) и один для вставки \(вывод\).  Однако конкретное представление может запретить один или оба эти потока.  Обычно он поддерживает определенные связи между двумя потоками.  Например, то, что вы вставляете в выходной поток объекта [basic\_stringbuf](../Topic/basic_stringbuf%20Class.md)\<`Elem`, `Tr`\>, позднее извлекаете из входного потока.  При размещении одного потока объекта [basic\_filebuf](../standard-library/basic-filebuf-class.md)\<`Elem`, `Tr`\> вы размещаете второй поток для образования тандема.  
  
 Общий интерфейс для класса шаблона `basic_streambuf` предоставляет операции, которые являются общими для всех буферов потока, однако имеют специализацию.  Защищенный интерфейс предоставляет операции, необходимые конкретному представлению потока для выполнения назначенной ему работы.  Защищенная виртуальная функция\-член позволяет точно настроить поведение производного буфера потока для конкретного представления потока.  Каждый производный буфер потока в этой библиотеке описывает, как он специализирует поведение его защищенных виртуальных функций\-членов.  Поведение по умолчанию для базового класса, которое обычно заключается в бездействии, описано в этом разделе.  
  
 Оставшиеся защищенные функции\-члены управляют копированием в любое хранилище, предоставленное для буферизации операций обмена данными с потоками, и из него.  Входной буфер, например, характеризуется следующим:  
  
-   [eback](../Topic/basic_streambuf::eback.md) — указатель на начало буфера;  
  
-   [gptr](../Topic/basic_streambuf::gptr.md) — указатель на следующий элемент для чтения;  
  
-   [egptr](../Topic/basic_streambuf::egptr.md) — указатель на позицию сразу после конца буфера.  
  
 Аналогичным образом выходной буфер характеризуется следующим:  
  
-   [pbase](../Topic/basic_streambuf::pbase.md) — указатель на начало буфера;  
  
-   [pptr](../Topic/basic_streambuf::pptr.md) — указатель на следующий элемент для записи;  
  
-   [epptr](../Topic/basic_streambuf::epptr.md) — указатель на позицию сразу после конца буфера.  
  
 Для любого буфера применяется следующий протокол.  
  
-   Если следующий указатель имеет значение NULL, буфер не существует.  В противном случае все три указателя указывают на одну и ту же последовательность.  Их можно безопасно сравнивать с точки зрения порядка.  
  
-   Если для выходного буфера следующий указатель при сравнении дает значение меньше конечного указателя, можно сохранить элемент в позиции записи, обозначенной следующим указателем.  
  
-   Если для входного буфера следующий указатель при сравнении дает значение меньше конечного указателя, можно считать элемент в позиции чтения, обозначенной следующим указателем.  
  
-   Если для входного буфера начальный указатель при сравнении дает значение меньше следующего указателя, можно возвратить элемент в позицию возврата, обозначенную следующим указателем, значение которого уменьшено.  
  
 Все защищенные виртуальные функции\-члены, записываемые для класса, являющегося производным от `basic_streambuf`\<`Elem`, `Tr`\>, должны взаимодействовать в соответствии с этим протоколом.  
  
 Объект класса `basic_streambuf`\<`Elem`, `Tr`\> хранит шесть описанных выше указателей.  Он также хранит объект языкового стандарта в объекте типа [locale](../standard-library/locale-class.md), чтобы им при необходимости мог воспользоваться производный буфер потока.  
  
### Конструкторы  
  
|||  
|-|-|  
|[basic\_streambuf](../Topic/basic_streambuf::basic_streambuf.md)|Создает объект типа `basic_streambuf`.|  
  
### Typedefs  
  
|||  
|-|-|  
|[char\_type](../Topic/basic_streambuf::char_type.md)|Связывает имя типа с параметром шаблона `Elem`.|  
|[int\_type](../Topic/basic_streambuf::int_type.md)|Сопоставляет имя типа в области `basic_streambuf` с параметром шаблона `Elem`.|  
|[off\_type](../Topic/basic_streambuf::off_type.md)|Сопоставляет имя типа в области `basic_streambuf` с параметром шаблона `Elem`.|  
|[pos\_type](../Topic/basic_streambuf::pos_type.md)|Сопоставляет имя типа в области `basic_streambuf` с параметром шаблона `Elem`.|  
|[traits\_type](../Topic/basic_streambuf::traits_type.md)|Связывает имя типа с параметром шаблона `Tr`.|  
  
### Функции\-члены  
  
|||  
|-|-|  
|[eback](../Topic/basic_streambuf::eback.md)|Защищенная функция, возвращающая указатель на начало входного буфера.|  
|[egptr](../Topic/basic_streambuf::egptr.md)|Защищенная функция, возвращающая указатель на позицию сразу после конца входного буфера.|  
|[epptr](../Topic/basic_streambuf::epptr.md)|Защищенная функция, возвращающая указатель на позицию сразу после конца выходного буфера.|  
|[gbump](../Topic/basic_streambuf::gbump.md)|Защищенная функция, которая добавляет `_Count` в следующий указатель для входного буфера.|  
|[getloc](../Topic/basic_streambuf::getloc.md)|Возвращает языковой стандарт объекта `basic_streambuf`.|  
|[gptr](../Topic/basic_streambuf::gptr.md)|Защищенная функция, возвращающая указатель на следующий элемент входного буфера.|  
|[imbue](../Topic/basic_streambuf::imbue.md)|Защищенная виртуальная функция, вызываемая [pubimbue](../Topic/basic_streambuf::pubimbue.md).|  
|[in\_avail](../Topic/basic_streambuf::in_avail.md)|Возвращает количество элементов, готовых к считыванию из буфера.|  
|[переполнение](../Topic/basic_streambuf::overflow.md)|Защищенная виртуальная функция, которая может вызываться при вставке нового символа в полный буфер.|  
|[pbackfail](../Topic/basic_streambuf::pbackfail.md)|Защищенная виртуальная функция\-член, которая пытается поместить элемент обратно во входной поток, а затем делает его текущим \(на него указывает следующий указатель\).|  
|[pbase](../Topic/basic_streambuf::pbase.md)|Защищенная функция, возвращающая указатель на начало выходного буфера.|  
|[pbump](../Topic/basic_streambuf::pbump.md)|Защищенная функция, которая добавляет `count` в следующий указатель для выходного буфера.|  
|[pptr](../Topic/basic_streambuf::pptr.md)|Защищенная функция, возвращающая указатель на следующий элемент выходного буфера.|  
|[pubimbue](../Topic/basic_streambuf::pubimbue.md)|Задает языковой стандарт объекта `basic_streambuf`.|  
|[pubseekoff](../Topic/basic_streambuf::pubseekoff.md)|Вызывает [seekoff](../Topic/basic_streambuf::seekoff.md) — защищенную виртуальную функцию, которая переопределяется в производном классе.|  
|[pubseekpos](../Topic/basic_streambuf::pubseekpos.md)|Вызывает [seekpos](../Topic/basic_streambuf::seekpos.md) — защищенную виртуальную функцию, которая переопределяется в производном классе, и выполняет сброс текущего положения указателя.|  
|[pubsetbuf](../Topic/basic_streambuf::pubsetbuf.md)|Вызывает [setbuf](../Topic/basic_streambuf::setbuf.md) — защищенную виртуальную функцию, которая переопределяется в производном классе.|  
|[pubsync](../Topic/basic_streambuf::pubsync.md)|Вызывает [sync](../Topic/basic_streambuf::sync.md) — защищенную виртуальную функцию, которая переопределяется в производном классе и обновляет внешний поток, сопоставленный с данным буфером.|  
|[sbumpc](../Topic/basic_streambuf::sbumpc.md)|Считывает и возвращает текущий элемент, перемещая указатель потока.|  
|[seekoff](../Topic/basic_streambuf::seekoff.md)|Защищенная виртуальная функция\-член пытается изменить текущие положения управляемых потоков.|  
|[seekpos](../Topic/basic_streambuf::seekpos.md)|Защищенная виртуальная функция\-член пытается изменить текущие положения управляемых потоков.|  
|[setbuf](../Topic/basic_streambuf::setbuf.md)|Защищенная виртуальная функция\-член выполняет операции, относящиеся непосредственно к каждому производному буферу потока.|  
|[setg](../Topic/basic_streambuf::setg.md)|Защищенная функция, которая сохраняет `_Gbeg` в начальном указателе, `_Gnext` в следующем указателе и `_Gend` в конечном указателе для входного буфера.|  
|[setp](../Topic/basic_streambuf::setp.md)|Защищенная функция, которая сохраняет `_Pbeg` в начальном указателе и `_Pend` в конечном указателе для входного буфера.|  
|[sgetc](../Topic/basic_streambuf::sgetc.md)|Возвращает текущий элемент без изменения положения в потоке.|  
|[sgetn](../Topic/basic_streambuf::sgetn.md)|Возвращает количество считанных элементов.|  
|[showmanyc](../Topic/basic_streambuf::showmanyc.md)|Защищенная виртуальная функция\-член, возвращающая число символов, которые могут быть извлечены из входного потока, и обеспечивает отсутствие бесконечного времени ожидания в программе.|  
|[snextc](../Topic/basic_streambuf::snextc.md)|Считывает текущий элемент и возвращает следующий элемент.|  
|[sputbackc](../Topic/basic_streambuf::sputbackc.md)|Помещает `char_type` в поток.|  
|[sputc](../Topic/basic_streambuf::sputc.md)|Помещает символ в поток.|  
|[sputn](../Topic/basic_streambuf::sputn.md)|Помещает строку символов в поток.|  
|[stossc](../Topic/basic_streambuf::stossc.md)|Переходит за текущий элемент в потоке.|  
|[sungetc](../Topic/basic_streambuf::sungetc.md)|Получает символ из потока.|  
|[swap](../Topic/basic_streambuf::swap.md)|Меняет местами значения в этом объекте и значения предоставленного параметра объекта `basic_streambuf`.|  
|[sync](../Topic/basic_streambuf::sync.md)|Защищенная виртуальная функция, которая пытается синхронизировать управляемые потоки с любыми связанными внешними потоками.|  
|[uflow](../Topic/basic_streambuf::uflow.md)|Защищенная виртуальная функция, которая извлекает текущий элемент из входного потока.|  
|[underflow](../Topic/basic_streambuf::underflow.md)|Защищенная виртуальная функция, которая извлекает текущий элемент из входного потока.|  
|[xsgetn](../Topic/basic_streambuf::xsgetn.md)|Защищенная виртуальная функция, которая извлекает элементы из входного потока.|  
|[xsputn](../Topic/basic_streambuf::xsputn.md)|Защищенная виртуальная функция, которая вставляет элементы в выходной поток.|  
  
### Операторы  
  
|||  
|-|-|  
|[operator \=](../Topic/basic_streambuf::operator=.md)|Присваивает значения этому объекту из другого объекта `basic_streambuf`.|  
  
## Требования  
 **Заголовок:** \<streambuf\>  
  
 **Пространство имен:** std  
  
## См. также  
 [Потокобезопасность в стандартной библиотеке C\+\+](../standard-library/thread-safety-in-the-cpp-standard-library.md)   
 [Программирование iostream](../Topic/iostream%20Programming.md)   
 [Соглашения iostreams](../standard-library/iostreams-conventions.md)