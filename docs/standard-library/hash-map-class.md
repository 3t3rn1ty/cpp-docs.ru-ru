---
title: "Класс hash_map | Microsoft Docs"
ms.custom: ""
ms.date: "12/05/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "stdext::hash_map"
  - "hash_map/stdext::hash_map"
  - "std.hash_map"
  - "stdext.hash_map"
  - "std::hash_map"
  - "hash_map"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "hash_map - класс"
ms.assetid: 40879dfc-51ba-4a59-9f9e-26208de568a8
caps.latest.revision: 25
caps.handback.revision: 16
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# Класс hash_map
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

> [!NOTE]
>  Этот API устарел.  Вместо него следует использовать [Класс unordered\_map](../standard-library/unordered-map-class.md).  
  
 Быстро сохраняет и возвращает данные из коллекции, в которой каждый элемент является парой, содержащей уникальный ключ сортировки и связанное с ним значение.  
  
## Синтаксис  
  
```  
template <  
   class Key,   
   class Type,   
   class Traits=hash_compare<Key, less<Key> >,   
   class Allocator=allocator<pair <const Key, Type> >   
>  
class hash_map  
```  
  
#### Параметры  
 `Key`  
 Тип данных ключа для сохранения в hash\_map.  
  
 `Type`  
 Тип данных элемента для сохранения в hash\_map.  
  
 `Traits`  
 Тип, который включает два объекта\-функции, один из классов compare, который может сравнить значения двух элементов как ключей сортировки, чтобы определить их относительный порядок, и хэш\-функцию, которая является унарным предикатом, который сопоставляет значения ключей элементов с целыми числами без знака типа `size_t`.  Этот аргумент является необязательным, а hash\_compare\<`Key`, less\<`Key`\> \> является значением по умолчанию.  
  
 `Allocator`  
 Тип, представляющий сохраненный объект распределителя, который инкапсулирует сведения о выделении и освобождении памяти для hash\_map.  Этот аргумент является необязательным, а значение по умолчанию — allocator\<pair \<const `Key`, `Type`\>\>.  
  
## Заметки  
 hash\_map:  
  
-   Ассоциативный контейнер, который является контейнером переменного размера, поддерживающим эффективное получение значений элементов на основе значения соответствующего ключа.  
  
-   Является реверсивным, поскольку предоставляет двунаправленный итератор для получения доступа к его элементам.  
  
-   Хэшируется, поскольку его элементы группируются в сегменты на основе значения хэш\-функции, применяемой к значениям ключей элементов.  
  
-   Является уникальным, поскольку каждый его элемент должен обладать уникальным ключом.  
  
-   Является контейнером ассоциативной пары, поскольку его значения данных элементов отличаются от его значений ключей.  
  
-   Шаблонный класс шаблона, поскольку функции, которые он предоставляет, являются универсальными и, соответственно, не зависят от конкретного типа данных, содержащихся в виде элементов или ключей.  Типы данных, используемые для элементов и ключей, вместо этого определяются как параметры в шаблоне класса вместе с функцией и распределителем сравнения.  
  
 Главным преимуществом хэширования по сравнению с сортировкой является повышенная эффективность; при успешном хэшировании вставка, удаление и поиск выполняются за константный средний промежуток времени по сравнению со временем, пропорциональным логарифму числа элементов в контейнере, для методов сортировки.  Значение элемента в hash\_map, но не связанное с ним значение ключа можно изменить напрямую.  Значения ключей, связанные со старыми элементами, необходимо удалить и вставить новые значения ключей, связанные с новыми элементами.  
  
 Выбор типа контейнера должен в общем случае производиться на основе типа поиска и вставки, который требуется приложению.  Хэшированные ассоциативные контейнеры оптимизированы для операций поиска, вставки и удаления.  Функции\-члены, которые явно поддерживают эти операции, эффективны при использовании совместно с правильно разработанной хэш\-функцией, в результате чего они имеют постоянное среднее время выполнения и не зависят от числа элементов в контейнере.  Правильно разработанная хэш\-функция обеспечивает равномерное распределение хэшированных значений и сводит к минимуму количество конфликтов, когда разные значения ключей сопоставляются с одним хэшированным значением.  В худшем случае, когда применяется наиболее неоптимальная хэш\-функция, количество операций пропорционально количеству элементов в последовательности \(линейное время\).  
  
 Класс hash\_map должен быть используемым ассоциативным контейнером, если условия, связывающие значения с ключами, удовлетворяются приложением.  Модель этого типа структуры представляет собой упорядоченный список уникальных ключевых слов со связанными строковыми значениями, предоставляющими, к примеру, определения.  Если вместо этого для слов существует несколько правильных определений и ключи не являются уникальными, предпочтительным контейнером будет hash\_multimap.  Если же сохранен только список слов, то в качестве контейнера необходимо выбрать набор hash\_set.  Если допускается многократное использование слов, то подходящей структурой контейнера будет hash\_multiset.  
  
 Объект hash\_map упорядочивает последовательность, которую он контролирует, путем вызова сохраненного объекта хэша `Traits` класса [value\_compare](../Topic/value_compare%20Class.md).  Доступ к этому сохраненному объекту осуществляется путем вызова функции\-члена [key\_comp](../Topic/hash_map::key_comp.md).  Такой объект\-функция должен функционировать так же, как и объект класса [hash\_compare](../standard-library/hash-compare-class.md)\<Key, less\<Key\>\>.  В частности, для значений `Key` типа `Key` вызов `Traits`\(`Key` \) создает распределение значений типа `size_t`.  
  
 В целом упорядочиваемые элементы должны лишь подлежать сравнению «меньше чем» для установления такого порядка, чтобы, имея любые два элемента, можно было определить, что они равны \(ни один не меньше другого\) или что один меньше другого.  Это приводит к упорядочению неравнозначных элементов.  С более технической точки зрения, функция сравнения является бинарным предикатом, который вызывает строгого слабое упорядочение в стандартном математически смысле.  Бинарный предикат f\(x y\) является объектом\-функцией, которая содержит два объекта аргументов `x` и `y`, а также возвращаемое значение `true` или `false`.  Порядок, заданный для hash\_map, является строгим слабым порядком, если бинарный предикат является нерефлексивным, антисимметричным и переходящим и если эквивалентность является переходящей, где два объекта x и y определяются как эквивалентные, когда оба параметра f\(x,y\) и f\(y,x\) имеют значение false.  Если более строгое условие равенства между ключами заменяет условие эквивалентности, порядок становится общим \(т.е. все элементы упорядочиваются относительно друг друга\), и сопоставленные ключи будут неотличимы друг от друга.  
  
 Фактический порядок элементов в управляемой последовательности зависит от хэш\-функции, функции упорядочения и текущего размера хэш\-таблицы, хранимой в объекте контейнера.  Текущий размер хэш\-таблицы определить нельзя, поэтому обычно невозможно предсказать порядок элементов в управляемой последовательности.  Вставка элементов не делает итераторы недействительными, а при удалении элементов недействительными становятся только итераторы, которые ранее указывали конкретно на удаленные элементы.  
  
 Итератор, предоставляемый классом hash\_map, является двусторонним итератором, но функции — члены класса [insert](../Topic/hash_map::insert.md) и [hash\_map](../Topic/hash_map::hash_map.md) обладают версиями, принимающими в качестве параметров шаблона более слабый итератор ввода, чьи функциональные требования ниже, чем гарантированные классом двунаправленных итераторов.  Различные концепции итераторов образуют семейство, связанное уточнениями функциональности.  Каждая концепция итератора имеет собственный набор требований, а алгоритмы, работающие с ними, должны ограничивать свои предположения согласно требованиям, предоставляемым этим типом итератора.  Можно предположить, что итератор ввода может быть разыменован для обращения к определенному объекту и инкрементирован до следующего итератора в последовательности.  Это минимальный набор функциональных возможностей, но его достаточно, чтобы иметь возможность осмысленно говорить о диапазоне итераторов `[First, Last)`, в контексте функций — членов класса.  
  
 В Visual C\+\+ .NET 2003 члены файлов заголовков [\<hash\_map\>](../standard-library/hash-map.md) и [\<hash\_set\>](../standard-library/hash-set.md) больше не находятся в пространстве имен std. Они перемещены в пространство имен stdext.  Дополнительные сведения см. в разделе [Пространство имен stdext](../Topic/stdext%20Namespace.md).  
  
### Конструкторы  
  
|||  
|-|-|  
|[hash\_map](../Topic/hash_map::hash_map.md)|Создает контейнер `hash_map`, который является пустым или копией части или целого другого контейнера `hash_map`.|  
  
### Typedefs  
  
|||  
|-|-|  
|[allocator\_type](../Topic/hash_map::allocator_type.md)|Тип, представляющий класс `allocator` для объекта `hash_map`.|  
|[const\_iterator](../Topic/hash_map::const_iterator.md)|Тип, предоставляющий двунаправленный итератор, который может считывать тот или иной элемент `const` в контейнере `hash_map`.|  
|[const\_pointer](../Topic/hash_map::const_pointer.md)|Тип, предоставляющий указатель на элемент `const` в контейнере `hash_map`.|  
|[const\_reference](../Topic/hash_map::const_reference.md)|Тип, предоставляющий ссылку на элемент `const`, сохраненный в контейнере `hash_map` для чтения и выполнения операций `const`.|  
|[const\_reverse\_iterator](../Topic/hash_map::const_reverse_iterator.md)|Тип, предоставляющий двунаправленный итератор, который может считывать любой элемент `const` в контейнере `hash_map`.|  
|[difference\_type](../Topic/hash_map::difference_type.md)|Тип целого числа со знаком, пригодный для представления количества элементов в контейнере `hash_map` в диапазоне между элементами, на которые указывают итераторы.|  
|[iterator](../Topic/hash_map::iterator.md)|Тип, предоставляющий двунаправленный итератор, который может считывать или изменять любой элемент в `hash_map`.|  
|[key\_compare](../Topic/hash_map::key_compare.md)|Тип, предоставляющий объект функции, который может сравнить два ключа сортировки для определения относительного порядка двух элементов в контейнере `hash_map`.|  
|[key\_type](../Topic/hash_map::key_type.md)|Тип описывает объект ключа сортировки, составляющий каждый элемент `hash_map`.|  
|[mapped\_type](../Topic/hash_map::mapped_type.md)|Тип, который представляет тип данных, хранящийся в контейнере `hash_map`.|  
|[pointer](../Topic/hash_map::pointer.md)|Тип, предоставляющий указатель на элемент в `hash_map`.|  
|[ссылка](../Topic/hash_map::reference.md)|Тип, предоставляющий ссылку на элемент, хранящийся в контейнере `hash_map`.|  
|[reverse\_iterator](../Topic/hash_map::reverse_iterator.md)|Тип, предоставляющий двунаправленный итератор, который может считывать или изменять элемент в обращенном контейнере `hash_map`.|  
|[size\_type](../Topic/hash_map::size_type.md)|Целочисленный Typedef без знака, который может представлять число элементов в `hash_map`.|  
|[value\_type](../Topic/hash_map::value_type.md)|Тип, предоставляющий объект функции, который может сравнить два элемента в качестве ключей сортировки для определения их относительного порядка в контейнере `hash_map`.|  
  
### Функции\-члены  
  
|||  
|-|-|  
|[hash\_map::at](../Topic/hash_map::at.md)|Находит элемент в `hash_map` с указанным значением ключа.|  
|[begin](../Topic/hash_map::begin.md)|Возвращает итератор, обращающийся к первый элемент в контейнере `hash_map`.|  
|[hash\_map::cbegin](../Topic/hash_map::cbegin.md)|Возвращает итератор const, обращающийся к первому элементу в `hash_map`.|  
|[hash\_map::cend](../Topic/hash_map::cend.md)|Возвращает итератор const, который обращается к месту, следующему за последним элементом в `hash_map`.|  
|[очистить](../Topic/hash_map::clear.md)|Стирает все элементы в `hash_map`.|  
|[count](../Topic/hash_map::count.md)|Возвращает число элементов в контейнере `hash_map`, ключи которых соответствуют ключу, заданному параметром.|  
|[hash\_map::crbegin](../Topic/hash_map::crbegin.md)|Возвращает итератор const, который обращается к первому элементу в обращенном контейнере `hash_map`.|  
|[hash\_map::crend](../Topic/hash_map::crend.md)|Возвращает итератор const, который обращается к месту, следующему за последним элементом в обращенном контейнере `hash_map`.|  
|[hash\_map::emplace](../Topic/hash_map::emplace.md)|Вставляет созданный на месте элемент в `hash_map`.|  
|[hash\_map::emplace\_hint](../Topic/hash_map::emplace_hint.md)|Вставляет созданный на месте элемент в `hash_map` с подсказкой о размещении.|  
|[пустой](../Topic/hash_map::empty.md)|Проверяет, пуст ли `hash_map`.|  
|[end](../Topic/hash_map::end.md)|Возвращает итератор, который обращается к месту, следующему за последним элементом в контейнере `hash_map`.|  
|[equal\_range](../Topic/hash_map::equal_range.md)|Возвращает пару итераторов соответственно на первый элемент в наборе `hash_map` с ключом, который больше, чем указанный ключ, и на первый элемент в наборе `hash_map` с ключом, который больше или равен данному ключу.|  
|[erase](../Topic/hash_map::erase.md)|Удаляет элемент или диапазон элементов с указанных положений в `hash_map`.|  
|[find](../Topic/hash_map::find.md)|Возвращает итератор, адресующий расположение элемента в наборе `hash_map` с ключом, эквивалентным указанному ключу.|  
|[get\_allocator](../Topic/hash_map::get_allocator.md)|Возвращает копию объекта `allocator`, который используется для создания контейнера `hash_map`.|  
|[вставить](../Topic/hash_map::insert.md)|Вставляет элемент или диапазон элементов в `hash_map`.|  
|[key\_comp](../Topic/hash_map::key_comp.md)|Возвращает итератор, указывающий на первый элемент в `hash_map` с ключом, который больше или равен указанному ключу.|  
|[lower\_bound](../Topic/hash_map::lower_bound.md)|Возвращает итератор, указывающий на первый элемент в `hash_map` с ключом, который больше или равен указанному ключу.|  
|[max\_size](../Topic/hash_map::max_size.md)|Возвращает максимальную длину `hash_map`.|  
|[rbegin](../Topic/hash_map::rbegin.md)|Возвращает итератор, который обращается к первому элементу в обращенном контейнере `hash_map`.|  
|[rend](../Topic/hash_map::rend.md)|Возвращает итератор, который обращается к месту, следующему за последним элементом в обращенном контейнере `hash_map`.|  
|[size](../Topic/hash_map::size.md)|Возвращает количество элементов в контейнере `hash_map`.|  
|[swap](../Topic/hash_map::swap.md)|Выполняет обмен элементами между двумя объектами `hash_map`.|  
|[upper\_bound](../Topic/hash_map::upper_bound.md)|Возвращает итератор, указывающий на первый элемент в `hash_map` со значением ключа, которое больше указанного ключа.|  
|[value\_comp](../Topic/hash_map::value_comp.md)|Извлекает копию объекта сравнения, который используется для упорядочивания значений элементов в наборе `hash_map`.|  
  
### Операторы  
  
|||  
|-|-|  
|[operator&#91;&#93;](../Topic/hash_map::operator.md)|Вставляет элемент в `hash_map` с заданным значением ключа.|  
|[hash\_map::operator\=](../Topic/hash_map::operator=.md)|Заменяет элементы `hash_map` копией другого `hash_map`.|  
  
## Требования  
 **Заголовок:** \<hash\_map\>  
  
 **Пространство имен:** stdext  
  
## См. также  
 [Потокобезопасность в стандартной библиотеке C\+\+](../standard-library/thread-safety-in-the-cpp-standard-library.md)   
 [Библиотека стандартных шаблонов](../misc/standard-template-library.md)