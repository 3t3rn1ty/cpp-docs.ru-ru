---
title: свойство (расширения компонентов C++) | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-windows
ms.topic: reference
f1_keywords:
- property_cpp
- property
dev_langs:
- C++
helpviewer_keywords:
- property keyword [C++]
ms.assetid: cc79d2b2-f013-4d81-8252-eece97a18704
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
- uwp
ms.openlocfilehash: b763131fe91e2df2385f2c06bcba8bc759d695a1
ms.sourcegitcommit: d55ac596ba8f908f5d91d228dc070dad31cb8360
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2018
ms.locfileid: "33882710"
---
# <a name="property--c-component-extensions"></a>property (расширения компонентов C++)
Объявляет *свойство*, который является функция-член, которая действует и доступна как элемент данных или элемент массива.  
  
## <a name="all-runtimes"></a>Все среды выполнения  
 Можно объявить один из следующих типов свойств.  
  
 *Простое свойство*  
 По умолчанию создает *метод доступа set* , присваивает значение свойства, *метод доступа get* , извлекает значение свойства, а также созданных компилятором закрытый элемент данных, содержащий значение свойства.  
  
 *блок свойств*  
 Используется для создания определяемых пользователем методов доступа get и/или set. Свойство доступно для чтения и записи, если заданы оба метода доступа — get и set, доступно только для чтения, если задан только метод доступа get, и доступно только для записи, если задан только метод доступа set.  
  
 Вы должны явно объявить элемент данных для хранения значения свойства.  
  
 *индексированные свойства*  
 Блок свойств, который можно использовать для получения и задания значения свойства, указанного одним или несколькими индексами.  
  
 Можно создать индексированное свойство, либо имя определяемого пользователем свойства или *по умолчанию* имя свойства. Имя свойства индекса по умолчанию — это имя класса, в котором это свойство определено. Чтобы объявить свойство по умолчанию, укажите ключевое слово `default` вместо имени свойства.  
  
 Вы должны явно объявить элемент данных для хранения значения свойства. Для индексированного свойства элементом данных обычно является массив или коллекция.  
  
### <a name="syntax"></a>Синтаксис  
  
```cpp  
property type property_name;

property type property_name { 
   access-modifier type get() inheritance-modifier {property_body}; 
   access-modifier void set(type value) inheritance-modifier {property_body};
} 

property type property_name[index_list] { 
   access-modifier type get(index_list) inheritance-modifier {property_body}; 
   access-modifier void set(index_list, value) inheritance-modifier {property_body};
} 

property type default[index_list] { 
   access-modifier type get(index_list) inheritance-modifier {property_body};
   access-modifier void set(index_list, value) inheritance-modifier {property_body};
}  
```  
  
### <a name="parameters"></a>Параметры  
 `type`  
 Тип данных значения свойства и, следовательно, самого свойства.  
  
 `property_name`  
 Имя свойства.  
  
 `access-modifier`  
 Квалификатор доступа. Допустимые квалификаторы — `static` и `virtual`.  
  
 Методы доступа get или set не требуется согласовывать с квалификатором `virtual`, но они должны быть согласованы с квалификатором `static`.  
  
 `inheritance-modifier`  
 Квалификатор наследования. Допустимые квалификаторы — `abstract` и `sealed`.  
  
 `index_list`  
 Разделенный запятыми список из одного или нескольких индексов. Каждый индекс состоит из типа индекса и необязательного идентификатора, который может использоваться в теле метода свойства.  
  
 `value`  
 Значение для назначения свойству в операции set или извлечения в операции get.  
  
 `property_body`  
 Тело метода свойства метода доступа set или get. Параметр `property_body` может использовать `index_list` для доступа к базовому элементу данных свойства или в качестве параметров в пользовательской обработке.  
  
## <a name="windows-runtime"></a>Среда выполнения Windows  
 Дополнительные сведения см. в разделе [свойства (C + +/ CX)](http://msdn.microsoft.com/library/windows/apps/hh755807.aspx).  
  
### <a name="requirements"></a>Требования  
 Параметр компилятора: **/ZW**  
  
## <a name="common-language-runtime"></a>Среда CLR 
 **Синтаксис**  
  
```cpp  
modifier property type property_name;

modifier property type property_name {
   modifier void set(type);
   modifier type get();
}
modifier property type property_name[index-list, value] {
   modifier void set(index-list, value);
   modifier type get(index-list);

modifier property type default[index];
}  
```  
  
 **Параметры**  
  
 *Модификатор*  
 Модификатор, который может использоваться в объявлении свойства или в методе доступа get/set свойства. Возможными значениями являются `static` и `virtual`.  
  
 *type*  
 Тип значения, представленного свойством.  
  
 *property_name*  
 Параметр или параметры для метода raise; необходимо соответствие сигнатуре делегата.  
  
 *index_list*  
 Разделенный запятыми список из одного или нескольких индексов, указанных в квадратных скобках (оператор индекса, ([])). Для каждого индекса укажите тип и (необязательно) идентификатор, который может использоваться в теле метода свойства.  
  
 **Заметки**  
  
 В первом примере синтаксиса показано *простое свойство*, которое неявно объявляет методы `set` и `get` метод. Компилятор автоматически создает закрытое поле для хранения значения свойства.  
  
 Во втором примере показывается синтаксис *блок property*, который явно объявляет методы `set` и `get` метод.  
  
 В третьем примере синтаксиса показано определяемое пользователем *свойство index*. Свойство индекса принимает параметры, а также значение для установки или получения. Необходимо указать имя для свойства. В отличие от простого свойства методы `set` и `get` свойства индекса должны быть явно определены, и необходимо указать имя для свойства.  
  
 В четвертом примере синтаксиса показано *по умолчанию* свойства, которое предоставляет доступ через массив к экземпляру типа. Ключевое слово `default` служит только для указания свойства по умолчанию. Имя свойства по умолчанию — это имя типа, в котором это свойство определено.  
  
 Ключевое слово `property` может встречаться в классе, интерфейсе или типе значения. Свойство может иметь функцию get (только чтение), функцию set (только запись) или обе эти функции (чтение и запись).  
  
 Имя свойства не может совпадать с именем управляемого класса, к которому оно относится. Функция получения свойства должна иметь тип, который совпадает с типом последнего параметра в соответствующей функции задания свойства.  
  
 В отношении клиентского кода свойство имеет вид обычного элемента данных и может записываться или считываться с помощью того же синтаксиса, что и элемент данных.  
  
 Методы get и set не требуется согласовывать с модификатором `virtual`.  
  
 Доступность методов get и set может отличаться.  
  
 Определение метода свойства может отображаться за пределами тела класса, так же, как в случае обычного метода.  
  
 Методы get и set для свойства должны быть согласованными с **статических** модификатор.  
  
 Свойство является скалярным, если его методы get и set соответствуют следующему описанию.  
  
-   Метод get не имеет параметров и возвращает значение типа `T`.  
  
-   Метод set имеет параметр типа `T`и тип возвращаемого значения **void**.  
  
 Должно существовать только одно скалярное свойство, объявленное в области с тем же идентификатором. Скалярные свойства не могут быть перегружены.  
  
 При объявлении элемента данных свойства компилятор вставляет элемент данных — иногда называемый «резервным хранилищем» — в класс. Однако имя элемента данных имеет такую форму, что вы не можете ссылаться на этот элемент в источнике, как если бы это был фактический элемент данных содержащего класса. Используйте Ildasm.exe для просмотра метаданных для вашего типа и созданного компилятором имени для резервного хранилища свойства.  
  
 В блоке свойств разрешается разная доступность для методов доступа.  То есть метод set может быть открытым, а метод get может быть закрытым.  Однако было бы ошибкой, если бы метод доступа имел менее строгий доступ, нежели в объявлении самого свойства.  
  
 `property` — контекстно-зависимое ключевое слово.  Дополнительные сведения см. в разделе [контекстно-зависимые ключевые слова](../windows/context-sensitive-keywords-cpp-component-extensions.md).  
  
  
### <a name="requirements"></a>Требования  
 Параметр компилятора: **/clr**  
  
### <a name="examples"></a>Примеры  
 В следующем примере показано объявление и использование элемента данных свойства и блока свойств.  В этом примере также показывается, что метод доступа свойства можно определить вне класса.  
  
```  
// mcppv2_property.cpp  
// compile with: /clr  
using namespace System;  
public ref class C {  
   int MyInt;  
public:  
  
   // property data member  
   property String ^ Simple_Property;  
  
   // property block  
   property int Property_Block {  
  
      int get();  
  
      void set(int value) {  
         MyInt = value;  
      }  
   }  
};  
  
int C::Property_Block::get() {  
   return MyInt;  
}  
  
int main() {  
   C ^ MyC = gcnew C();  
   MyC->Simple_Property = "test";  
   Console::WriteLine(MyC->Simple_Property);  
  
   MyC->Property_Block = 21;  
   Console::WriteLine(MyC->Property_Block);  
}  
```  
  
 **Вывод**  
  
```Output  
test  
  
21  
```  
  
## <a name="see-also"></a>См. также  
 [Расширения компонентов для платформ среды выполнения](../windows/component-extensions-for-runtime-platforms.md)