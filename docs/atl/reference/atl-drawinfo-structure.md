---
title: Структура ATL_DRAWINFO | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-atl
ms.topic: reference
f1_keywords:
- ATL::ATL_DRAWINFO
- ATL_DRAWINFO
- ATL.ATL_DRAWINFO
dev_langs:
- C++
helpviewer_keywords:
- ATL_DRAWINFO structure
ms.assetid: dd2e2aa8-e8c5-403b-b4df-35c0f6f57fb7
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 76f21f93bbd8386bbf0b4b63f3cf7c8b34057145
ms.sourcegitcommit: 9a0905c03a73c904014ec9fd3d6e59e4fa7813cd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2018
ms.locfileid: "43210661"
---
# <a name="atldrawinfo-structure"></a>Структура ATL_DRAWINFO
Содержит сведения, используемые для подготовки к просмотру в различные целевые объекты, такие как принтер, метафайла или элемент управления ActiveX.  
  
## <a name="syntax"></a>Синтаксис  
  
```
struct ATL_DRAWINFO {
    UINT cbSize;
    DWORD dwDrawAspect;
    LONG lindex;
    DVTARGETDEVICE* ptd;
    HDC hicTargetDev;
    HDC hdcDraw;
    LPCRECTL prcBounds;
    LPCRECTL prcWBounds;
    BOOL bOptimize;
    BOOL bZoomed;
    BOOL bRectInHimetric;
    SIZEL ZoomNum;
    SIZEL ZoomDen;
};
```  
  
## <a name="members"></a>Участники  
 `cbSize`  
 Размер структуры в байтах.  
  
 `dwDrawAspect`  
 Определяет, как для представления в целевой объект. Представления могут включать содержимое, значок, эскиз или печатном документе. Список возможных значений см. в разделе [DVASPECT](/windows/desktop/api/wtypes/ne-wtypes-tagdvaspect) и [DVASPECT2](/windows/desktop/api/ocidl/ne-ocidl-tagdvaspect2).  
  
 `lindex`  
 Часть целевой объект, который представляет интерес для операции рисования. Его интерпретация зависит от значения в `dwDrawAspect` член.  
  
 `ptd`  
 Указатель на [DVTARGETDEVICE](/windows/desktop/api/objidl/ns-objidl-tagdvtargetdevice) структуру, которая включает оптимизацию рисования в зависимости от заданных пропорций. Обратите внимание на то, что более новые объекты и контейнеры, которые поддерживают оптимизированные графических интерфейсов поддерживают также этот элемент. Более старые объекты и контейнеры, которые не поддерживают оптимизированного графических интерфейсов всегда указано значение NULL для этого элемента.  
  
 `hicTargetDev`  
 Информационный контекст для целевого устройства, на которые указывают `ptd` из которого объект может извлечь метрики устройства и проверить его возможности. Если `ptd` имеет значение NULL, объект должен игнорировать значение `hicTargetDev` член.  
  
 `hdcDraw`  
 Контекст устройства, на котором выполняется отрисовка. Для объекта без окон `hdcDraw` элемент находится в `MM_TEXT` режим сопоставления с его логические координаты соответствующих клиентских координатах содержащего его окна. Кроме того, контекст устройства должны находиться в том же состоянии, которая обычно передается по `WM_PAINT` сообщения.  
  
 `prcBounds`  
 Указатель на [RECTL](https://msdn.microsoft.com/library/windows/desktop/dd162907) структура прямоугольника на `hdcDraw` и в котором должен быть нарисован объект. Этот элемент определяет расположение и Растягивание объекта. Этот элемент должен иметь значение NULL для рисования без окон активного объекта на месте. В любой другой ситуации, не является допустимым значением NULL и должно привести к `E_INVALIDARG` код ошибки. Если контейнер безоконному объекту передает значение отличное от NULL, объект следует визуализировать запрошенный аспект в заданном контексте устройства и прямоугольника. Контейнер может запросить эти данные из объекта без окон для отображения во-вторых, неактивные представления объекта или печати объекта.  
  
 `prcWBounds`  
 Если `hdcDraw` является контексте устройства метафайла (см. в разделе [GetDeviceCaps](/windows/desktop/api/wingdi/nf-wingdi-getdevicecaps) в пакете SDK для Windows), это указатель на `RECTL` структуры, указывающий ограничивающий прямоугольник в базовом метафайле. Структура прямоугольника содержит экстента окна и окна источника. Эти значения можно использовать для рисования метафайлов. Указывает прямоугольник `prcBounds` вложен в это `prcWBounds` прямоугольником; они находятся в одном пространстве координат.  
  
 `bOptimize`  
 Ненулевое значение, если выполняется рисование элемента управления быть оптимизирован, в противном случае 0. Если рисунок оптимизирован, состояние контекста устройства автоматически восстановится, когда вы закончите подготовки к просмотру.  
  
 `bZoomed`  
 Ненулевое значение, если целевой объект имеет значение масштаба, иначе — 0. Коэффициент масштабирования хранится в `ZoomNum`.  
  
 `bRectInHimetric`  
 Ненулевое значение размеры `prcBounds` в HIMETRIC, в противном случае 0.  
  
 `ZoomNum`  
 Ширина и высота прямоугольника, в котором отображается объект. Коэффициент масштабирования по оси x (доля естественным размер объекта в его текущем степени) целевого объекта — это значение `ZoomNum.cx` деленное на значение `ZoomDen.cx`. Аналогичным образом достигается коэффициент масштабирования по оси y.  
  
 `ZoomDen`  
 Фактическая ширина и высота целевой объект.  
  
## <a name="remarks"></a>Примечания  
 Типичное применение этой структуры будет получение сведений об во время отрисовки данного целевого объекта. Например, можно было извлечь значения из ATL_DRAWINFO внутри вашей перегрузка [CComControlBase::OnDrawAdvanced](ccomcontrolbase-class.md#ondrawadvanced).  
  
 Эта структура сохраняет нужные сведения, предназначенные для отрисовки внешний вид объекта для целевого устройства. Информация может использоваться в документе экрана, на принтер или даже метафайл.  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** atlctl.h  
  
## <a name="see-also"></a>См. также  
  [Классы и структуры](../../atl/reference/atl-classes.md) [IViewObject::Draw](/windows/desktop/api/oleidl/nf-oleidl-iviewobject-draw)   
 [CComControlBase::OnDrawAdvanced](../../atl/reference/ccomcontrolbase-class.md#ondrawadvanced)





