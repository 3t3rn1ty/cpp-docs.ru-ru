---
title: Классы коллекций ATL | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-atl
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- DestructElements function
- collection classes, choosing
- ConstructElements function
- SerializeElements function
- traits classes
- collection classes, about collection classes
- CTraits classes
- collection classes
ms.assetid: 4d619d46-5b4e-41dd-b9fd-e86b1fbc00b5
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 4594b87f07cd4d89937ba640d9a04aeacf2ef866
ms.sourcegitcommit: be2a7679c2bd80968204dee03d13ca961eaa31ff
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
---
# <a name="atl-collection-classes"></a>Классы коллекций ATL
Библиотека ATL предоставляет множество классов для хранения и доступа к данным. Класс, который вы решили использовать зависит от нескольких факторов, включая:  
  
-   Объем данных для сохранения  
  
-   Эффективность, так и производительность доступа к данным  
  
-   Возможность доступа к данным по индексу или по ключу  
  
-   Порядок данных  
  
-   Предпочтений  
  
## <a name="small-collection-classes"></a>Классы с небольшим числом  
 Библиотека ATL предоставляет следующие классы массивов обработки при небольшом количестве объектов. Тем не менее эти классы ограниченны и внутренним образом предназначен для работы с ATL. Не рекомендуется использовать их в программах.  
  
|Класс|Тип хранилища данных|  
|-----------|--------------------------|  
|[CSimpleArray](../atl/reference/csimplearray-class.md)|Реализует обработки при небольшом количестве объектов класса массива.|  
|[CSimpleMap](../atl/reference/csimplemap-class.md)|Реализует класс сопоставления для обработки небольшого количества объектов.|  
  
## <a name="general-purpose-collection-classes"></a>Классы коллекций общего назначения  
 Следующие классы реализуют массивов, списков и схем и предоставляются как классы коллекций общего назначения:  
  
|Класс|Тип хранилища данных|  
|-----------|--------------------------|  
|[CAtlArray](../atl/reference/catlarray-class.md)|Реализует объект массива.|  
|[CAtlList](../atl/reference/catllist-class.md)|Реализует список.|  
|[CAtlMap](../atl/reference/catlmap-class.md)|Реализует структуру сопоставление, при котором данные можно ссылаться по ключу или значению.|  
|[CRBMap](../atl/reference/crbmap-class.md)|Реализует структуру сопоставление с использованием алгоритма красный-черный.|  
|[CRBMultiMap](../atl/reference/crbmultimap-class.md)|Реализует структуру multimapping красный-черный.|  
  
 Эти классы будет осуществляться много ошибок программирования при использовании в отладочных сборках, но для производительности, эти проверки не будет выполняться в окончательных сборках.  
  
## <a name="specialized-collection-classes"></a>Специализированные коллекции классов  
 Для управления указатели памяти и указателей интерфейса также используются более специализированные классы коллекций:  
  
|Класс|Цель|  
|-----------|-------------|  
|[CAutoPtrArray](../atl/reference/cautoptrarray-class.md)|Предоставляет методы, используемые при создании массива интеллектуальных указателей.|  
|[CAutoPtrList](../atl/reference/cautoptrlist-class.md)|Предоставляет методы, используемые при построении списка интеллектуальных указателей.|  
|[CComUnkArray](../atl/reference/ccomunkarray-class.md)|Магазины `IUnknown` указателей и предназначен для использования в качестве параметра [IConnectionPointImpl](../atl/reference/iconnectionpointimpl-class.md) класса шаблона.|  
|[CHeapPtrList](../atl/reference/cheapptrlist-class.md)|Предоставляет методы, используемые при построении списка указателей кучи.|  
|[CInterfaceArray](../atl/reference/cinterfacearray-class.md)|Предоставляет методы, используемые при создании массива указателей интерфейса СОМ.|  
|[CInterfaceList](../atl/reference/cinterfacelist-class.md)|Предоставляет методы, используемые при построении список указателей интерфейса СОМ.|  
  
## <a name="choosing-a-collection-class"></a>Выбор класса коллекции  
 Каждый из классов коллекций, доступных предлагает различные характеристики производительности, как показано в следующей таблице.  
  
-   В столбцах 2 и 3 описывают каждый класс упорядочения и доступа характеристики. В таблице термин "упорядочивается" означает, что порядок вставки и удаления элементов определяет их порядок в коллекции. Это не значит, что элементы сортируются по своему содержимому. Термин "индексируется" означает, что элементы в коллекции можно получать с помощью целочисленного индекса, как элементы в обычном массиве.  
  
-   Столбцы, 4 и 5 описывают каждый класс производительности. В приложениях, требующих большого количества вставок в коллекцию, особое значение может иметь скорость вставки, тогда как в других приложениях наиболее важной может оказаться скорость поиска.  
  
-   В столбце 6 указывается допустимость повторяющихся элементов в форме.  
  
-   Производительность операции класс заданной коллекции выражается в терминах связь между время, необходимое для завершения операции и количество элементов в коллекции. Операция занимает дополнительное время, растет линейно как элементы увеличения количества говорится, что алгоритм O(n). В отличие от этого операция занимает определенного периода времени, что увеличивает менее и менее, как элементы увеличения количества описывается, как алгоритм O (n журнала). Таким образом с точки зрения производительности, O (n журнала) алгоритмы превосходят O(n) алгоритмы более как числа элементов.  
  
### <a name="collection-shape-features"></a>Функции форм коллекции  
  
|Фигура|Упорядоченного|Индекс|Вставка<br /><br /> элемент|Искать:<br /><br /> Указанный элемент|Дубликат<br /><br /> элементы|  
|-----------|--------------|--------------|---------------------------|--------------------------------------|-----------------------------|  
|Список|Да|Нет|FAST (постоянное время)|Медленный O(n)|Да|  
|Массив|Да|По целому числу (постоянное время)|Медленное O(n), за исключением того, если вставка в конце какой вариантов константой времени|Медленный O(n)|Да|  
|Карта|Нет|Ключом (постоянное время)|FAST (постоянное время)|FAST (постоянное время)|Нет (ключи) Да (значения)|  
|Красный Черный карты|Да (по ключу)|По ключу O (n журнала)|Быстрый O (n журнала)|Быстрый O (n журнала)|Нет|  
|Красный Черный Multimap|Да (по ключу)|Ключом O(log n) (несколько значений каждого ключа)|Быстрый O (n журнала)|Быстрый O (n журнала)|Да (несколько значений каждого ключа)|  
  
## <a name="using-ctraits-objects"></a>С помощью объектов CTraits  
 Как классы коллекций ATL можно использовать для хранения широкий спектр определяемым пользователем типам данных, может быть полезно иметь возможность переопределять важные функции, такие как сравнения. Это достигается с помощью CTraits-классы.  
  
 CTraits-классы аналогично, но более гибким, чем функции вспомогательный класс коллекции MFC; в разделе [вспомогательные функции классов коллекции](../mfc/reference/collection-class-helpers.md) для получения дополнительной информации.  
  
 При создании класса коллекции, имеется возможность указания класса CTraits. Этот класс будет содержать код, который будет выполнять операции, такие как сравнения при вызове с помощью других методах, которые составляют класс коллекции. Например объект-список содержит собственные структуры, определяемой пользователем, можно переопределить теста равенство сравниваемых только определенных переменных-членов. Таким образом метод Find объект списка будет работать более удобным образом.  
  
## <a name="example"></a>Пример  
  
### <a name="code"></a>Код  
 [!code-cpp[NVC_ATL_Utilities#112](../atl/codesnippet/cpp/atl-collection-classes_1.cpp)]  
  
## <a name="comments"></a>Комментарии  
 Список CTraits-классы см. в разделе [классы коллекций](../atl/collection-classes.md).  
  
 Следующая диаграмма показывает иерархию классов для CTraits-классы.  
  
 ![Иерархия характеристик классов коллекции](../atl/media/vctraitscollectionclasseshierarchy.gif "vctraitscollectionclasseshierarchy")  
  
## <a name="collection-classes-samples"></a>Классы коллекций, образцы  
 В следующих примерах демонстрируются классы коллекций:  
  
-   [Образец MMXSwarm](../visual-cpp-samples.md)  
  
-   [Образец DynamicConsumer](../visual-cpp-samples.md)  
  
-   [Образец UpdatePV](../visual-cpp-samples.md)  
  
-   [Образец Marquee](../visual-cpp-samples.md)  
  
## <a name="see-also"></a>См. также  
 [Основные понятия](../atl/active-template-library-atl-concepts.md)   
 [Классы коллекций](../atl/collection-classes.md)

